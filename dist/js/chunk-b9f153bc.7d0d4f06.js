(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b9f153bc","chunk-1d426d18","chunk-2d0df843"],{"5df3":function(e,t,r){"use strict";var a=r("02f4")(!0);r("01f9")(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=a(t,r),this._i+=e.length,{value:e,done:!1})}))},"88bc":function(e,t,r){(function(t){var r=1/0,a=9007199254740991,n="[object Arguments]",l="[object Function]",i="[object GeneratorFunction]",o="[object Symbol]",c="object"==typeof t&&t&&t.Object===Object&&t,s="object"==typeof self&&self&&self.Object===Object&&self,u=c||s||Function("return this")();function d(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function f(e,t){var r=-1,a=e?e.length:0,n=Array(a);while(++r<a)n[r]=t(e[r],r,e);return n}function b(e,t){var r=-1,a=t.length,n=e.length;while(++r<a)e[n+r]=t[r];return e}var h=Object.prototype,p=h.hasOwnProperty,m=h.toString,v=u.Symbol,g=h.propertyIsEnumerable,y=v?v.isConcatSpreadable:void 0,w=Math.max;function O(e,t,r,a,n){var l=-1,i=e.length;r||(r=x),n||(n=[]);while(++l<i){var o=e[l];t>0&&r(o)?t>1?O(o,t-1,r,a,n):b(n,o):a||(n[n.length]=o)}return n}function j(e,t){return e=Object(e),C(e,t,(function(t,r){return r in e}))}function C(e,t,r){var a=-1,n=t.length,l={};while(++a<n){var i=t[a],o=e[i];r(o,i)&&(l[i]=o)}return l}function k(e,t){return t=w(void 0===t?e.length-1:t,0),function(){var r=arguments,a=-1,n=w(r.length-t,0),l=Array(n);while(++a<n)l[a]=r[t+a];a=-1;var i=Array(t+1);while(++a<t)i[a]=r[a];return i[t]=l,d(e,this,i)}}function x(e){return T(e)||D(e)||!!(y&&e&&e[y])}function S(e){if("string"==typeof e||V(e))return e;var t=e+"";return"0"==t&&1/e==-r?"-0":t}function D(e){return A(e)&&p.call(e,"callee")&&(!g.call(e,"callee")||m.call(e)==n)}var T=Array.isArray;function $(e){return null!=e&&L(e.length)&&!M(e)}function A(e){return q(e)&&$(e)}function M(e){var t=F(e)?m.call(e):"";return t==l||t==i}function L(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=a}function F(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function q(e){return!!e&&"object"==typeof e}function V(e){return"symbol"==typeof e||q(e)&&m.call(e)==o}var P=k((function(e,t){return null==e?{}:j(e,f(O(t,1),S))}));e.exports=P}).call(this,r("24aa"))},"89f2":function(e,t,r){"use strict";r.d(t,"c",(function(){return l})),r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return c}));r("96cf"),r("28a5"),r("6b54"),r("ac4d"),r("8a81"),r("ac6a");var a=r("3b8d"),n=r("4ec3");r("0fea");function l(e){return i.apply(this,arguments)}function i(){return i=Object(a["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return","字典Code不能为空!");case 2:return e.next=4,Object(n["f"])(t);case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)}function o(e,t){if(e instanceof Array){var r=!0,a=!1,n=void 0;try{for(var l,i=e[Symbol.iterator]();!(r=(l=i.next()).done);r=!0){var o=l.value;if(t===o.value)return o.text}}catch(c){a=!0,n=c}finally{try{r||null==i.return||i.return()}finally{if(a)throw n}}}return t}function c(e,t){if(0===t||"0"===t){var r=!0,a=!1,n=void 0;try{for(var l,i=e[Symbol.iterator]();!(r=(l=i.next()).done);r=!0){var o=l.value;if(t==o.value)return o.text}}catch(u){a=!0,n=u}finally{try{r||null==i.return||i.return()}finally{if(a)throw n}}}if(!t||!e||0==e.length)return"";var c="";t=t.toString();var s=t.split(",");return e.forEach((function(e){for(var t=0;t<s.length;t++)if(s[t]===e.value){c+=e.text+",";break}})),""==c?t:c.substring(0,c.length-1)}},b8ad:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("a-modal",{attrs:{title:e.title,width:1200,visible:e.visible,maskClosable:!1,confirmLoading:e.confirmLoading},on:{ok:e.handleOk,cancel:e.handleCancel}},[r("a-spin",{attrs:{spinning:e.confirmLoading}},[r("a-form",{attrs:{form:e.form}},[r("a-row",{staticClass:"form-row",attrs:{gutter:0}},[r("a-col",{attrs:{lg:8}},[r("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"订单号"}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["orderCode",{rules:[{required:!0,message:"请输入订单号!"}]}],expression:"['orderCode', {rules: [{ required: true, message: '请输入订单号!' }]}]"}],attrs:{placeholder:"请输入订单号"}})],1)],1),r("a-col",{attrs:{lg:8}},[r("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"订单类型"}},[r("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["ctype",{}],expression:"['ctype',{}]"}],attrs:{placeholder:"请选择订单类型"}},[r("a-select-option",{attrs:{value:"1"}},[e._v("国内订单")]),r("a-select-option",{attrs:{value:"2"}},[e._v("国际订单")])],1)],1)],1),r("a-col",{attrs:{lg:8}},[r("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"订单日期"}},[r("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["orderDate",{}],expression:"[ 'orderDate',{}]"}],staticStyle:{width:"100%"},attrs:{showTime:"",format:"YYYY-MM-DD HH:mm:ss"}})],1)],1)],1),r("a-row",{staticClass:"form-row",attrs:{gutter:0}},[r("a-col",{attrs:{lg:8}},[r("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"订单金额"}},[r("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["orderMoney",{}],expression:"[ 'orderMoney', {}]"}],staticStyle:{width:"100%"},attrs:{placeholder:"请输入订单金额"}})],1)],1),r("a-col",{attrs:{lg:8}},[r("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"订单备注"}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["content",{}],expression:"['content', {}]"}],attrs:{placeholder:"请输入订单备注"}})],1)],1)],1)],1),r("a-tabs",{on:{change:e.handleChangeTabs},model:{value:e.activeKey,callback:function(t){e.activeKey=t},expression:"activeKey"}},[r("a-tab-pane",{key:"1",attrs:{tab:"客户信息",forceRender:!0}},[r("j-editable-table",{ref:"editableTable1",attrs:{loading:e.table1.loading,columns:e.table1.columns,dataSource:e.table1.dataSource,maxHeight:300,rowNumber:!0,rowSelection:!0,actionButton:!0}})],1),r("a-tab-pane",{key:"2",attrs:{tab:"机票信息",forceRender:!0}},[r("j-editable-table",{ref:"editableTable2",attrs:{loading:e.table2.loading,columns:e.table2.columns,dataSource:e.table2.dataSource,maxHeight:300,rowNumber:!0,rowSelection:!0,actionButton:!0}})],1)],1)],1)],1)},n=[],l=(r("8e6e"),r("456d"),r("bd86")),i=(r("6b54"),r("ac6a"),r("5df3"),r("7550")),o=r("e2e0"),c=r("0fea"),s=r("2dab"),u=r("88bc"),d=r.n(u);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){Object(l["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var h={name:"JeecgOrderModalForJEditableTable",components:{JDate:s["default"],JEditableTable:i["default"]},data:function(){return{title:"操作",visible:!1,form:this.$form.createForm(this),confirmLoading:!1,model:{},labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:18}},activeKey:"1",table1:{loading:!1,dataSource:[],columns:[{title:"客户名",key:"name",width:"24%",type:o["a"].input,defaultValue:"",placeholder:"请输入${title}",validateRules:[{required:!0,message:"${title}不能为空"}]},{title:"性别",key:"sex",width:"18%",type:o["a"].select,options:[{title:"男",value:"1"},{title:"女",value:"2"}],defaultValue:"",placeholder:"请选择${title}"},{title:"身份证号",key:"idcard",width:"24%",type:o["a"].input,defaultValue:"",placeholder:"请输入${title}",validateRules:[{pattern:"^\\d{6}(18|19|20)?\\d{2}(0[1-9]|1[012])(0[1-9]|[12]\\d|3[01])\\d{3}(\\d|[xX])$",message:"${title}格式不正确"}]},{title:"手机号",key:"telphone",width:"24%",type:o["a"].input,defaultValue:"",placeholder:"请输入${title}",validateRules:[{pattern:"^1(3|4|5|7|8)\\d{9}$",message:"${title}格式不正确"}]}]},table2:{loading:!1,dataSource:[],columns:[{title:"航班号",key:"ticketCode",width:"40%",type:o["a"].input,defaultValue:"",placeholder:"请输入${title}",validateRules:[{required:!0,message:"${title}不能为空"}]},{title:"航班时间",key:"tickectDate",width:"30%",type:o["a"].date,placeholder:"请选择${title}",defaultValue:""}]},url:{add:"/test/jeecgOrderMain/add",edit:"/test/jeecgOrderMain/edit",orderCustomerList:"/test/jeecgOrderMain/queryOrderCustomerListByMainId",orderTicketList:"/test/jeecgOrderMain/queryOrderTicketListByMainId"}}},created:function(){},methods:{getAllTable:function(){return Promise.all([Object(o["c"])(this,"editableTable1"),Object(o["c"])(this,"editableTable2")])},add:function(){this.getAllTable().then((function(e){e[0].add(),e[1].add()})),this.edit({})},edit:function(e){var t=this;if(this.visible=!0,this.activeKey="1",this.form.resetFields(),this.model=Object.assign({},e),this.$nextTick((function(){t.form.setFieldsValue(d()(t.model,"orderCode","ctype","orderMoney","content")),t.form.setFieldsValue({orderDate:t.model.orderDate?moment(t.model.orderDate):null})})),this.model.id){var r={id:this.model.id};this.requestTableData(this.url.orderCustomerList,r,this.table1),this.requestTableData(this.url.orderTicketList,r,this.table2)}},close:function(){this.visible=!1,this.getAllTable().then((function(e){e[0].initialize(),e[1].initialize()})),this.$emit("close")},requestTableData:function(e,t,r){r.loading=!0,Object(c["getAction"])(e,t).then((function(e){r.dataSource=e.result||[]})).finally((function(){r.loading=!1}))},handleOk:function(){this.validateFields()},handleCancel:function(){this.close()},handleChangeTabs:function(e){Object(o["c"])(this,"editableTable".concat(e)).then((function(e){e.resetScrollTop()}))},validateFields:function(){var e=this;this.getAllTable().then((function(t){return Object(o["d"])(e.form,t)})).then((function(t){var r=e.classifyIntoFormData(t);return e.requestAddOrEdit(r)})).catch((function(t){t.error===o["b"]?e.activeKey=null==t.index?e.activeKey:(t.index+1).toString():console.error(t)}))},classifyIntoFormData:function(e){var t=Object.assign(this.model,e.formValue);return t.orderDate=t.orderDate?t.orderDate.format("YYYY-MM-DD HH:mm:ss"):null,b({},t,{jeecgOrderCustomerList:e.tablesValue[0].values,jeecgOrderTicketList:e.tablesValue[1].values})},requestAddOrEdit:function(e){var t=this,r=this.url.add,a="post";this.model.id&&(r=this.url.edit,a="put"),this.confirmLoading=!0,Object(c["httpAction"])(r,e,a).then((function(e){e.success?(t.$message.success(e.message),t.$emit("ok"),t.close()):t.$message.warning(e.message)})).finally((function(){t.confirmLoading=!1}))}}},p=h,m=r("2877"),v=Object(m["a"])(p,a,n,!1,null,"7cd044e2",null);t["default"]=v.exports}}]);