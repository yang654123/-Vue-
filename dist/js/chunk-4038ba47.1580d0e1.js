(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4038ba47"],{"0429":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=this,n=t.$createElement,a=t._self._c||n;return a("div",{staticClass:"house-index"},[a("wrapper-content",[a("div",{staticClass:"page-search"},[a("a-form",{attrs:{layout:"inline",autoFormCreate:function(t){e.searchForm=t}},on:{submit:function(e){return e.preventDefault(),t.handleSearchSubmit(e)}}},[a("a-form-item",{attrs:{label:"关键字",fieldDecoratorId:"title"}},[a("a-input",{attrs:{placeholder:"请输入关键字"}})],1),a("a-form-item",{attrs:{label:"日期",fieldDecoratorId:"date"}},[a("a-range-picker",{attrs:{placeholder:["开始日期","结束日期"]}})],1),a("a-form-item",[a("a-button",{attrs:{icon:"search",type:"primary",htmlType:"submit",loading:t.searchLoading}},[t._v("搜索")])],1)],1)],1),a("div",{staticClass:"action"},[a("a-button",{staticClass:"m-r-sm",attrs:{icon:"check",disabled:!t.selectedRowKeys.length},on:{click:function(e){return t.listAction({key:"setReadied"})}}},[a("span",[t._v("批量标记已读")])]),a("a-button",{attrs:{icon:"delete",type:"danger",disabled:!t.selectedRowKeys.length},on:{click:function(e){return t.listAction({key:"delete"})}}},[a("span",[t._v("批量删除")])]),a("span",{directives:[{name:"show",rawName:"v-show",value:t.selectedRowKeys.length,expression:"selectedRowKeys.length"}],staticStyle:{"padding-left":"12px"}},[t._v("\n        已选择\n        "),a("span",{staticClass:"text-warning"},[t._v(t._s(t.selectedRowKeys.length))]),t._v(" 项\n      ")])],1),a("a-table",{attrs:{columns:t.columns,dataSource:t.dataSource,loading:t.loading,showTotal:t.pagination.showTotal,pagination:t.pagination,rowSelection:{selectedRowKeys:t.selectedRowKeys,onChange:t.onSelectChange},rowKey:"id"},on:{change:t.pageChange},scopedSlots:t._u([{key:"expandedRowRender",fn:function(e){return a("p",{staticStyle:{margin:"0"},domProps:{innerHTML:t._s(e.content)}})}},{key:"action",fn:function(e,n,i){return[a("a",{on:{click:function(e){return t.rowClick(n,"del")}}},[t._v("删除")])]}}])})],1)],1)},i=[],o=(n("386d"),n("7514"),n("ac6a"),n("22b6"));function s(e){return o["a"].post("project/notify",e)}function c(e){return o["a"].post("project/notify/delete",{id:e})}function r(e){return o["a"].post("project/notify/batchDel",{ids:e})}function l(e){return o["a"].post("project/notify/setReadied",{ids:e})}var d=n("2f14"),u=n("1b80"),h=[{title:"公告标题",dataIndex:"title",width:"20%"},{title:"时间",dataIndex:"create_time"},{title:"操作",scopedSlots:{customRender:"action"}}],f={mixins:[u["a"]],data:function(){return{columns:h,dataSource:[],selectedRowKeys:[],loading:!0,searchForm:{},searchLoading:!1}},created:function(){this.init()},methods:{init:function(){var e=this;e.requestData.type="system",e.loading=!0,e.selectedRowKeys=[],s(e.requestData).then((function(t){e.dataSource=t.data.list,e.pagination.total=t.data.total,e.loading=!1}))},onSelectChange:function(e){this.selectedRowKeys=e},listAction:function(e){var t=this;switch(e.key){case"setReadied":l(JSON.stringify(t.selectedRowKeys)),t.dataSource.forEach((function(e,n){var a=t.selectedRowKeys.find((function(t){return t==e.id}));a&&(t.dataSource[n].is_read=1)})),t.selectedRowKeys=[],t.$notice("操作成功","message","success");break;case"delete":this.$confirm({title:"确认删除这些公告?",content:"删除后不可恢复",okText:"删除",okType:"danger",cancelText:"取消",onOk:function(){return r(JSON.stringify(t.selectedRowKeys)).then((function(e){Object(d["a"])(e)&&(t.init(),t.notice("操作成功","message","success"),t.selectedRowKeys=[])})),Promise.resolve()}});break}},rowClick:function(e,t){var n=this;"del"==t&&this.$confirm({title:"确认删除此公告?",content:"删除后不可恢复",okText:"删除",okType:"danger",cancelText:"取消",onOk:function(){return c(e.id).then((function(e){n.init()})),Promise.resolve()}})},handleSearchSubmit:function(){var e=this;e.searchForm.validateFields((function(t,n){t||e.search()}))},search:function(){var e=this.searchForm.getFieldsValue();if(e.date&&e.date.length>0){var t=e.date[0].format("YYYY-MM-DD"),n=e.date[1].format("YYYY-MM-DD");e.date=t+"~"+n}Object.assign(this.requestData,e),this.init()}}},p=f,g=n("2877"),m=Object(g["a"])(p,a,i,!1,null,null,null);t["default"]=m.exports},"1b80":function(e,t,n){"use strict";t["a"]={data:function(){return{pagination:{page:1,pageSize:10,total:0,showTotal:function(e,t){return"共 ".concat(e," 条")}}}},computed:{requestData:function(){return{page:this.pagination.page,pageSize:this.pagination.pageSize}}},methods:{init:function(){},pageChange:function(e){this.pagination.page=e,this.requestData.page=e.current,this.init()}}}}}]);