(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7df86d43","chunk-7f868616","chunk-567da155","chunk-5a5ce1fa","chunk-1ae38193","chunk-605b927a"],{"36bd":function(t,e,a){"use strict";var s=a("4bf8"),r=a("77f1"),n=a("9def");t.exports=function(t){var e=s(this),a=n(e.length),o=arguments.length,i=r(o>1?arguments[1]:void 0,a),c=o>2?arguments[2]:void 0,l=void 0===c?a:r(c,a);while(l>i)e[i++]=t;return e}},4201:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"gc-canvas",on:{click:t.reloadPic}},[a("canvas",{attrs:{id:"gc-canvas",width:t.contentWidth,height:t.contentHeight}})])},r=[],n=(a("6c7b"),a("c5f6"),a("0fea")),o={name:"JGraphicCode",props:{length:{type:Number,default:4},fontSizeMin:{type:Number,default:20},fontSizeMax:{type:Number,default:45},backgroundColorMin:{type:Number,default:180},backgroundColorMax:{type:Number,default:240},colorMin:{type:Number,default:50},colorMax:{type:Number,default:160},lineColorMin:{type:Number,default:40},lineColorMax:{type:Number,default:180},dotColorMin:{type:Number,default:0},dotColorMax:{type:Number,default:255},contentWidth:{type:Number,default:136},contentHeight:{type:Number,default:38},remote:{type:Boolean,default:!1,required:!1}},methods:{randomNum:function(t,e){return Math.floor(Math.random()*(e-t)+t)},randomColor:function(t,e){var a=this.randomNum(t,e),s=this.randomNum(t,e),r=this.randomNum(t,e);return"rgb("+a+","+s+","+r+")"},drawPic:function(){var t=this;this.randomCode().then((function(){var e=document.getElementById("gc-canvas"),a=e.getContext("2d");a.textBaseline="bottom",a.fillStyle=t.randomColor(t.backgroundColorMin,t.backgroundColorMax),a.fillRect(0,0,t.contentWidth,t.contentHeight);for(var s=0;s<t.code.length;s++)t.drawText(a,t.code[s],s);t.drawLine(a),t.drawDot(a),t.$emit("success",t.code)}))},drawText:function(t,e,a){t.fillStyle=this.randomColor(this.colorMin,this.colorMax);var s=this.randomNum(this.fontSizeMin,this.fontSizeMax);t.font=s+"px SimHei";var r=10,n=(this.contentWidth-40)/(this.code.length-1),o=r;a>0&&(o=r+a*n);var i=this.randomNum(this.fontSizeMax,this.contentHeight-5);s>40&&(i=40);var c=this.randomNum(-10,10);t.translate(o,i),t.rotate(c*Math.PI/180),t.fillText(e,0,0),t.rotate(-c*Math.PI/180),t.translate(-o,-i)},drawLine:function(t){for(var e=0;e<1;e++)t.strokeStyle=this.randomColor(this.lineColorMin,this.lineColorMax),t.beginPath(),t.moveTo(this.randomNum(0,this.contentWidth),this.randomNum(0,this.contentHeight)),t.lineTo(this.randomNum(0,this.contentWidth),this.randomNum(0,this.contentHeight)),t.stroke()},drawDot:function(t){for(var e=0;e<100;e++)t.fillStyle=this.randomColor(0,255),t.beginPath(),t.arc(this.randomNum(0,this.contentWidth),this.randomNum(0,this.contentHeight),1,0,2*Math.PI),t.fill()},reloadPic:function(){this.drawPic()},randomCode:function(){var t=this;return new Promise((function(e){1==t.remote?Object(n["getAction"])("/sys/getCheckCode").then((function(a){console.log("aaaaa",a),a.success?(t.checkKey=a.result.key,t.code=window.atob(a.result.code),e()):(t.$message.error("生成验证码错误,请联系系统管理员"),t.code="BUG",e())})).catch((function(){console.log("生成验证码连接服务器异常"),t.code="BUG",e()})):(t.randomLocalCode(),e())}))},randomLocalCode:function(){for(var t="",e="QWERTYUPLKJHGFDSAZXCVBNMqwertyupkjhgfdsazxcvbnm1234567890",a=0;a<this.length;a++){var s=Math.floor(57*Math.random());t+=e[s]}this.code=t},getLoginParam:function(){return{checkCode:this.code,checkKey:this.checkKey}}},mounted:function(){this.drawPic()},data:function(){return{code:"",checkKey:""}}},i=o,c=a("2877"),l=Object(c["a"])(i,s,r,!1,null,"6b5c5669",null);e["default"]=l.exports},"6c7b":function(t,e,a){var s=a("5ca1");s(s.P,"Array",{fill:a("36bd")}),a("9c6c")("fill")},"71c6":function(t,e,a){"use strict";var s=a("c8e3"),r=a.n(s);r.a},"89cc":function(t,e,a){},"8e46":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-form",{staticStyle:{margin:"40px auto 0"}},[a("result",{attrs:{title:"更改密码成功","is-success":!0}},[a("div",{staticClass:"toLogin"},[a("h3",[t._v("将在"),a("span",[t._v(t._s(t.time))]),t._v("秒后返回登录页面.")])])])],1)],1)},r=[],n=a("9a3d"),o={name:"Step4",props:["userList"],components:{Result:n["default"]},data:function(){return{loading:!1,time:0}},methods:{countDown:function(){var t=this;t.time--}},mounted:function(){var t=this;t.time=5,setInterval(t.countDown,1e3)},watch:{time:function(t,e){if(0==t){var a={username:this.userList.username};this.$router.push({name:"login",params:a})}}}},i=o,c=(a("e11d"),a("2877")),l=Object(c["a"])(i,s,r,!1,null,"02373d6c",null);e["default"]=l.exports},"9a3d":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"result"},[a("div",[a("a-icon",{class:[t.isSuccess?"success":"error","icon"],attrs:{type:t.isSuccess?"check-circle":"close-circle"}})],1),t.title?a("div",{staticClass:"title"},[t._v(t._s(t.title))]):t._e(),t.description?a("div",{staticClass:"description"},[t._v(t._s(t.description))]):t._e(),t.content?a("div",{staticClass:"content"},[t._t("default")],2):t._e(),a("div",{staticClass:"action"},[t._t("action")],2)])},r=[],n={name:"Result",props:{isSuccess:{type:Boolean,default:!1},title:{type:String,default:""},description:{type:String,default:""},content:{type:Boolean,default:!0}}},o=n,i=(a("fce6"),a("2877")),c=Object(i["a"])(o,s,r,!1,null,"5cd17224",null);e["default"]=c.exports},"9c51":function(t,e,a){},a001:function(t,e,a){"use strict";var s=a("e680"),r=a.n(s);r.a},a1eb:function(t,e,a){},ba6d:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-form",{staticStyle:{"max-width":"500px",margin:"40px auto 0"},attrs:{form:t.form},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.nextStep(e)}}},[a("a-form-item",{attrs:{label:"账号名",labelCol:{span:5},wrapperCol:{span:19}}},[a("a-input",{style:{width:"310px"},attrs:{type:"text",autocomplete:"false",value:t.accountName,disabled:""}})],1),a("a-form-item",{attrs:{label:"手机",labelCol:{span:5},wrapperCol:{span:19}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["phone",{initialValue:t.defaultPhone,rules:t.validatorRules.phone.rule}],expression:"['phone',{initialValue: defaultPhone, rules: validatorRules.phone.rule}]"}],style:{width:"310px"},attrs:{type:"text",autocomplete:"false",placeholder:"请输入手机号"}},[a("a-icon",{style:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"phone"},slot:"prefix"})],1)],1),t.show?a("a-form-item",{attrs:{label:"验证码",labelCol:{span:5},wrapperCol:{span:19}}},[a("a-row",{staticStyle:{"margin-left":"2px"},attrs:{gutter:16}},[a("a-col",{staticClass:"gutter-row",attrs:{span:12}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["captcha",t.validatorRules.captcha],expression:"['captcha',validatorRules.captcha]"}],attrs:{type:"text",placeholder:"手机短信验证码"}})],1),a("a-col",{staticClass:"gutter-row",attrs:{span:8}},[a("a-button",{attrs:{tabindex:"-1",size:"default",disabled:t.state.smsSendBtn},domProps:{textContent:t._s(t.state.smsSendBtn?t.state.time+" s":"获取验证码")},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.getCaptcha(e)}}})],1)],1)],1):t._e(),a("a-form-item",{attrs:{wrapperCol:{span:19,offset:5}}},[a("a-button",{staticStyle:{"margin-left":"8px"},on:{click:t.prevStep}},[t._v("上一步")]),a("a-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary"},on:{click:t.nextStep}},[t._v("下一步")])],1)],1)],1)},r=[],n=a("0fea"),o={name:"Step2",props:["userList"],data:function(){return{form:this.$form.createForm(this),loading:!1,accountName:this.userList.username,dropList:"0",captcha:"",show:!0,state:{time:60,smsSendBtn:!1},formLogin:{captcha:"",mobile:""},validatorRules:{captcha:{rule:[{required:!0,message:"请输入短信验证码!"},{validator:this.validateCaptcha}]},phone:{rule:[{required:!0,message:"请输入手机号码!"}]}}}},computed:{defaultPhone:function(){return this.userList.isPhone?this.userList.phone:null}},methods:{nextStep:function(){var t=this,e=this;e.loading=!0,this.form.validateFields((function(a,s){if(console.log(s),!a&&"0"==e.dropList)if(void 0==s.captcha)t.cmsFailed("请输入短信验证码!");else{var r={};r.phone=t.userList.phone,r.smscode=s.captcha,Object(n["postAction"])("/sys/user/phoneVerification",r).then((function(a){if(a.success){console.log(a);var s={username:t.userList.username,phone:t.userList.phone,smscode:a.result};setTimeout((function(){e.$emit("nextStep",s)}),0)}else t.cmsFailed(a.message)}))}}))},prevStep:function(){this.$emit("prevStep",this.userList)},getCaptcha:function(t){var e=this;t.preventDefault();var a=this;this.state.smsSendBtn=!0;var s=window.setInterval((function(){a.state.time--<=0&&(a.state.time=60,a.state.smsSendBtn=!1,window.clearInterval(s))}),1e3),r=this.$message.loading("验证码发送中..",0),o={mobile:this.userList.phone,smsmode:"2"};Object(n["postAction"])("/sys/sms",o).then((function(t){t.success||(setTimeout(r,1),e.cmsFailed(t.message)),setTimeout(r,500)}))},cmsFailed:function(t){this.$notification["error"]({message:"验证错误",description:t,duration:4})},handleChangeSelect:function(t){var e=this;console.log(t),0==t?(e.dropList="0",e.show=!0):(e.dropList="1",e.show=!1)}}},i=o,c=(a("f28b"),a("2877")),l=Object(c["a"])(i,s,r,!1,null,"0d38e0f0",null);e["default"]=l.exports},c8e3:function(t,e,a){},e11d:function(t,e,a){"use strict";var s=a("9c51"),r=a.n(s);r.a},e680:function(t,e,a){},f14a:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main"},[a("a-form",{staticStyle:{"max-width":"500px",margin:"40px auto 0"},attrs:{form:t.form},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.nextStep(e)}}},[a("a-form-item",[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["username",t.validatorRules.username],expression:"['username',validatorRules.username]"}],attrs:{size:"large",type:"text",autocomplete:"false",placeholder:"请输入用户账号或手机号"}},[a("a-icon",{style:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"lock"},slot:"prefix"})],1)],1),a("a-row",{attrs:{gutter:0}},[a("a-col",{attrs:{span:14}},[a("a-form-item",[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["inputCode",t.validatorRules.inputCode],expression:"['inputCode',validatorRules.inputCode]"}],attrs:{size:"large",type:"text",placeholder:"请输入验证码"},on:{change:t.inputCodeChange}},[t.inputCodeContent==t.verifiedCode?a("a-icon",{style:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"smile"},slot:"prefix"}):a("a-icon",{style:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"frown"},slot:"prefix"})],1)],1)],1),a("a-col",{attrs:{span:10}},[a("j-graphic-code",{staticStyle:{float:"right"},on:{success:t.generateCode}})],1)],1),a("a-form-item",{attrs:{wrapperCol:{span:19,offset:5}}},[a("router-link",{staticStyle:{float:"left","line-height":"40px"},attrs:{to:{name:"login"}}},[t._v("使用已有账户登录")]),a("a-button",{attrs:{type:"primary"},on:{click:t.nextStep}},[t._v("下一步")])],1)],1)],1)},r=[],n=a("4201"),o=a("0fea"),i=a("4ec3"),c={name:"Step1",components:{JGraphicCode:n["default"]},data:function(){return{form:this.$form.createForm(this),inputCodeContent:"",inputCodeNull:!0,verifiedCode:"",validatorRules:{username:{rules:[{required:!1},{validator:this.validateInputUsername}]},inputCode:{rules:[{required:!0,message:"请输入验证码!"},{validator:this.validateInputCode}]}}}},methods:{nextStep:function(){var t=this;this.form.validateFields((function(e,a){if(!e){var s=!1,r={},n=/^[1-9]\d*$|^0$/,i=a.username;1==n.test(i)?(r.phone=i,s=!0):r.username=i,Object(o["getAction"])("/sys/user/querySysUser",r).then((function(e){if(e.success){var a={username:e.result.username,phone:e.result.phone,isPhone:s};setTimeout((function(){t.$emit("nextStep",a)}))}}))}}))},validateInputCode:function(t,e,a){e&&this.verifiedCode!=this.inputCodeContent?a(new Error("您输入的验证码不正确!")):a()},inputCodeChange:function(t){this.inputCodeContent=t.target.value,console.log(this.inputCodeContent),t.target.value&&0!=t.target.value?(this.inputCodeContent=this.inputCodeContent.toLowerCase(),this.inputCodeNull=!1):this.inputCodeNull=!0},generateCode:function(t){this.verifiedCode=t.toLowerCase(),console.log(this.verifiedCode)},validateInputUsername:function(t,e,a){console.log(e);var s=/^[0-9]+.?[0-9]*/;if(e||a("请输入用户名和手机号！"),s.test(e)){var r={phone:e};Object(i["h"])(r).then((function(t){t.success?a("用户名不存在!"):a()}))}else{r={username:e};Object(i["h"])(r).then((function(t){t.success?a("用户名不存在!"):a()}))}}}},l=c,u=a("2877"),d=Object(u["a"])(l,s,r,!1,null,"912d82e8",null);e["default"]=d.exports},f28b:function(t,e,a){"use strict";var s=a("a1eb"),r=a.n(s);r.a},f6d9:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-form",{staticStyle:{"max-width":"500px",margin:"40px auto 0"},attrs:{form:t.form}},[a("a-form-item",{attrs:{label:"账号名",labelCol:{span:5},wrapperCol:{span:19}}},[a("a-input",{attrs:{type:"text",autocomplete:"false",value:t.accountName,disabled:""}})],1),a("a-form-item",{staticClass:"stepFormText",attrs:{label:"新密码",labelCol:{span:5},wrapperCol:{span:19}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["password",t.validatorRules.password],expression:"['password',validatorRules.password]"}],attrs:{type:"password",autocomplete:"false"}})],1),a("a-form-item",{staticClass:"stepFormText",attrs:{label:"确认密码",labelCol:{span:5},wrapperCol:{span:19}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["confirmPassword",t.validatorRules.confirmPassword],expression:"['confirmPassword',validatorRules.confirmPassword]"}],attrs:{type:"password",autocomplete:"false"}})],1),a("a-form-item",{attrs:{wrapperCol:{span:19,offset:5}}},[a("a-button",{staticStyle:{"margin-left":"8px"},on:{click:t.prevStep}},[t._v("上一步")]),a("a-button",{staticStyle:{"margin-left":"20px"},attrs:{loading:t.loading,type:"primary"},on:{click:t.nextStep}},[t._v("提交")])],1)],1)],1)},r=[],n=a("0fea"),o={name:"Step3",props:["userList"],data:function(){return{loading:!1,form:this.$form.createForm(this),accountName:this.userList.username,validatorRules:{username:{rules:[{required:!0,message:"用户名不能为空!"}]},password:{rules:[{required:!0,pattern:/^(?=.*[a-zA-Z])(?=.*\d)(?=.*[~!@#$%^&*()_+`\-={}:";'<>?,.\/]).{8,}$/,message:"密码由8位数字、大小写字母和特殊符号组成!!"},{validator:this.handlePasswordLevel}]},confirmPassword:{rules:[{required:!0,message:"密码不能为空!"},{validator:this.handlePasswordCheck}]}}}},methods:{nextStep:function(){var t=this,e=this;e.loading=!0,this.form.validateFields((function(a,s){if(a)e.loading=!1;else{var r={};r.username=t.userList.username,r.password=s.password,r.smscode=t.userList.smscode,r.phone=t.userList.phone,Object(n["getAction"])("/sys/user/passwordChange",r).then((function(a){if(a.success){var s={username:t.userList.username};console.log(s),setTimeout((function(){e.$emit("nextStep",s)}),1500)}else t.passwordFailed(a.message),e.loading=!1}))}}))},prevStep:function(){this.$emit("prevStep",this.userList)},handlePasswordCheck:function(t,e,a){var s=this.form.getFieldValue("password");e&&s&&e.trim()!==s.trim()&&a(new Error("两次密码不一致")),a()},passwordFailed:function(t){this.$notification["error"]({message:"更改密码失败",description:t,duration:4})}}},i=o,c=(a("71c6"),a("2877")),l=Object(c["a"])(i,s,r,!1,null,"1bbf13ad",null);e["default"]=l.exports},fce6:function(t,e,a){"use strict";var s=a("89cc"),r=a.n(s);r.a},ffc3:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-card",{staticStyle:{width:"130%","text-align":"center","margin-left":"-10%"},attrs:{bordered:!1}},[a("a-steps",{staticClass:"steps",attrs:{current:t.currentTab}},[a("a-step",{attrs:{title:"用户账户"}}),a("a-step",{attrs:{title:"手机验证"}}),a("a-step",{attrs:{title:"密码"}}),a("a-step",{attrs:{title:"完成"}})],1),a("div",{staticClass:"content"},[0===t.currentTab?a("step1",{on:{nextStep:t.nextStep}}):t._e(),1===t.currentTab?a("step2",{attrs:{userList:t.userList},on:{nextStep:t.nextStep,prevStep:t.prevStep}}):t._e(),2===t.currentTab?a("step3",{attrs:{userList:t.userList},on:{nextStep:t.nextStep,prevStep:t.prevStep}}):t._e(),3===t.currentTab?a("step4",{attrs:{userList:t.userList},on:{prevStep:t.prevStep,finish:t.finish}}):t._e()],1)],1)},r=[],n=a("f14a"),o=a("ba6d"),i=a("f6d9"),c=a("8e46"),l={name:"Alteration",components:{Step1:n["default"],Step2:o["default"],Step3:i["default"],Step4:c["default"]},data:function(){return{description:"将一个冗长或用户不熟悉的表单任务分成多个步骤，指导用户完成。",currentTab:0,userList:{},form:null}},methods:{nextStep:function(t){this.userList=t,this.currentTab<4&&(this.currentTab+=1)},prevStep:function(t){this.userList=t,this.currentTab>0&&(this.currentTab-=1)},finish:function(){this.currentTab=0}}},u=l,d=(a("a001"),a("2877")),p=Object(d["a"])(u,s,r,!1,null,"63c12498",null);e["default"]=p.exports}}]);