(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0cd3493e"],{"15da":function(e,t,r){},"65ee":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"main user-layout-forgot"},[e.sended?[e._m(1),r("a-form",{ref:"formRegister",attrs:{form:e.form,id:"formRegister"}},[r("a-form-item",[r("a-input",{attrs:{size:"large",type:"text",placeholder:"邮箱",value:e.email,disabled:""}},[r("a-icon",{style:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"mail"},slot:"prefix"})],1)],1),r("a-popover",{attrs:{placement:"rightTop",trigger:"click",visible:e.state.passwordLevelChecked}},[r("template",{slot:"content"},[r("div",{style:{width:"240px"}},[r("div",{class:["user-register",e.passwordLevelClass]},[e._v("\n              强度：\n              "),r("span",[e._v(e._s(e.passwordLevelName))])]),r("a-progress",{attrs:{percent:e.state.percent,showInfo:!1,strokeColor:e.passwordLevelColor}}),r("div",{staticStyle:{"margin-top":"10px"}},[r("span",[e._v("请至少输入 6 个字符。请不要使用容易被猜到的密码。")])])],1)]),r("a-form-item",[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["password",{rules:[{required:!0,message:"至少6位密码，区分大小写"},{validator:this.handlePasswordLevel}],validateTrigger:["change","blur"]}],expression:"[\n              'password',\n              {\n                rules: [\n                  {required: true, message: '至少6位密码，区分大小写'},\n                  {validator: this.handlePasswordLevel},\n                ],\n                validateTrigger: ['change', 'blur'],\n              },\n            ]"}],attrs:{size:"large",type:"password",autocomplete:"false",placeholder:"密码须至少6位，且区分大小写"},on:{click:e.handlePasswordInputClick}},[r("a-icon",{style:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"lock"},slot:"prefix"})],1)],1)],2),r("a-form-item",[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["password2",{rules:[{required:!0,message:"至少6位密码，区分大小写"},{validator:this.handlePasswordCheck}],validateTrigger:["change","blur"]}],expression:"[\n            'password2',\n            {\n              rules: [\n                {required: true, message: '至少6位密码，区分大小写'},\n                {validator: this.handlePasswordCheck},\n              ],\n              validateTrigger: ['change', 'blur'],\n            },\n          ]"}],attrs:{size:"large",type:"password",autocomplete:"false",placeholder:"再次确认您的密码"}},[r("a-icon",{style:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"check-circle"},slot:"prefix"})],1)],1),r("a-form-item",[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["captcha",{rules:[{required:!0,message:"请输入验证码"}],validateTrigger:["blur"]}],expression:"[\n            'captcha',\n            {\n              rules: [{required: true, message: '请输入验证码'}],\n              validateTrigger: ['blur'],\n            },\n          ]"}],attrs:{size:"large",type:"text",placeholder:"验证码"}},[r("a-icon",{style:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"safety-certificate"},slot:"prefix"})],1)],1),r("a-form-item",[r("a-button",{staticClass:"register-button",attrs:{block:"",size:"large",type:"primary",htmlType:"submit",loading:e.registerBtn,disabled:e.registerBtn},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.handleSubmit(t)}}},[e._v("提交")])],1)],1)]:[e._m(0),r("a-form",{ref:"formForgot",attrs:{form:e.formCaptcha,id:"formForgot"}},[r("a-form-item",[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["email",{rules:[{required:!0,type:"email",message:"请输入邮箱地址"}],validateTrigger:["change","blur"]}],expression:"[\n            'email',\n            {\n              rules: [\n                {required: true, type: 'email', message: '请输入邮箱地址'},\n              ],\n              validateTrigger: ['change', 'blur'],\n            },\n          ]"}],attrs:{size:"large",type:"text",placeholder:"注册邮箱地址"}},[r("a-icon",{style:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"mail"},slot:"prefix"})],1)],1),r("a-form-item",[r("a-button",{staticClass:"forgot-button",attrs:{size:"large",type:"primary",htmlType:"submit",loading:e.forgotBtn,disabled:e.forgotBtn},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.handleSubmitCaptcha(t)}}},[e._v("获取验证码")]),r("router-link",{staticClass:"login",attrs:{to:{name:"login"}}},[e._v("使用其他账户登录")])],1)],1)]],2)},s=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("h3",[r("span",[e._v("通过邮箱重置")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("h3",[r("span",[e._v("重置密码")])])}],o=r("0672"),i=r("2f14"),n=r("97a8"),l={0:"低",1:"低",2:"中",3:"强"},c={0:"error",1:"error",2:"warning",3:"success"},d={0:"#ff0000",1:"#ff0000",2:"#ff7e05",3:"#52c41a"},p={name:"Forgot",components:{},data:function(){return{form:this.$form.createForm(this),formCaptcha:this.$form.createForm(this),email:"",sended:!1,forgotBtn:!1,state:{time:60,smsSendBtn:!1,passwordLevel:0,passwordLevelChecked:!1,percent:10,progressColor:"#FF0000"},registerBtn:!1}},computed:{passwordLevelClass:function(){return c[this.state.passwordLevel]},passwordLevelName:function(){return l[this.state.passwordLevel]},passwordLevelColor:function(){return d[this.state.passwordLevel]}},methods:{handleSubmitCaptcha:function(){var e=this;this.formCaptcha.validateFields((function(t,r){if(!t){e.forgotBtn=!0;var a=e.formCaptcha.getFieldsValue();e.email=a.email,Object(o["e"])(e.email).then((function(t){if(e.sended=!0,e.forgotBtn=!1,e.$message.destroy(),!Object(i["a"])(t))return!1;var r="验证码获取成功";t.data&&(r+="，您的验证码为："+t.data),Object(n["b"])({title:"提示",msg:r},"notification","success",8)}))}}))},handleSubmit:function(){var e=this;this.form.validateFields((function(t,r){if(!t){e.hidePasswordLevelChecked=!1,e.registerBtn=!0;var a=e.form.getFieldsValue();a.email=e.email,a.password=md5(a.password),a.password2=md5(a.password2),Object(o["h"])(a).then((function(t){if(e.registerBtn=!1,!Object(i["a"])(t))return!1;Object(n["b"])({title:"提示",msg:"重置密码成功，请登录"},"notification","success"),e.$router.push({name:"login"})}))}}))},handlePasswordInputClick:function(){this.state.passwordLevelChecked=!0},hidePasswordLevelChecked:function(){this.state.passwordLevelChecked=!1},handlePasswordLevel:function(e,t,r){var a=0;/[0-9]/.test(t)&&a++,/[a-zA-Z]/.test(t)&&a++,/[^0-9a-zA-Z_]/.test(t)&&a++,this.state.passwordLevel=a,this.state.percent=30*a,a>=2?(a>=3&&(this.state.percent=100),r()):(0===a&&(this.state.percent=10),r(new Error("密码强度不够")))},handlePasswordCheck:function(e,t,r){var a=this.form.getFieldValue("password");void 0===t&&r(new Error("请输入密码")),t&&a&&t.trim()!==a.trim()&&r(new Error("两次密码不一致")),r()}},watch:{}},u=p,m=(r("9d09"),r("87d8"),r("2877")),f=Object(m["a"])(u,a,s,!1,null,null,null);t["default"]=f.exports},"87d8":function(e,t,r){"use strict";var a=r("dca0"),s=r.n(a);s.a},"9d09":function(e,t,r){"use strict";var a=r("15da"),s=r.n(a);s.a},dca0:function(e,t,r){}}]);