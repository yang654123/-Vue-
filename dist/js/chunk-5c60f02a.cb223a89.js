(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5c60f02a"],{"1b80":function(t,e,n){"use strict";e["a"]={data:function(){return{pagination:{page:1,pageSize:10,total:0,showTotal:function(t,e){return"共 ".concat(t," 条")}}}},computed:{requestData:function(){return{page:this.pagination.page,pageSize:this.pagination.pageSize}}},methods:{init:function(){},pageChange:function(t){this.pagination.page=t,this.requestData.page=t.current,this.init()}}}},"64de":function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"d",(function(){return o})),n.d(e,"e",(function(){return c})),n.d(e,"c",(function(){return s})),n.d(e,"b",(function(){return r})),n.d(e,"f",(function(){return d}));var a=n("22b6");function i(t){return a["a"].post("project/notify/_clearAll",t)}function o(t){return a["a"].post("project/notify",t)}function c(){return a["a"].post("project/notify/noReads")}function s(t){return a["a"].post("project/notify/delete",{id:t})}function r(t){return a["a"].post("project/notify/batchDel",{ids:t})}function d(t){return a["a"].post("project/notify/setReadied",{ids:t})}},"7ce7":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=this,n=e.$createElement,a=e._self._c||n;return a("div",{staticClass:"house-index"},[a("wrapper-content",[a("div",{staticClass:"page-search"},[a("a-form",{attrs:{layout:"inline",autoFormCreate:function(e){t.searchForm=e}},on:{submit:function(t){return t.preventDefault(),e.handleSearchSubmit(t)}}},[a("a-form-item",{attrs:{label:"关键字",fieldDecoratorId:"title"}},[a("a-input",{attrs:{placeholder:"请输入关键字"}})],1),a("a-form-item",{attrs:{label:"日期",fieldDecoratorId:"date"}},[a("a-range-picker",{attrs:{placeholder:["开始日期","结束日期"]}})],1),a("a-form-item",[a("a-button",{attrs:{icon:"search",type:"primary",htmlType:"submit",loading:e.searchLoading}},[e._v("搜索")])],1)],1)],1),a("div",{staticClass:"action"},[a("a-button",{staticClass:"m-r-sm",attrs:{icon:"check",disabled:!e.selectedRowKeys.length},on:{click:function(t){return e.listAction({key:"setReadied"})}}},[a("span",[e._v("批量标记已读")])]),a("a-button",{attrs:{icon:"delete",type:"danger",disabled:!e.selectedRowKeys.length},on:{click:function(t){return e.listAction({key:"delete"})}}},[a("span",[e._v("批量删除")])]),a("span",{directives:[{name:"show",rawName:"v-show",value:e.selectedRowKeys.length,expression:"selectedRowKeys.length"}],staticStyle:{"padding-left":"12px"}},[e._v("\n        已选择\n        "),a("span",{staticClass:"text-warning"},[e._v(e._s(e.selectedRowKeys.length))]),e._v(" 项\n      ")])],1),a("a-table",{attrs:{columns:e.columns,dataSource:e.dataSource,loading:e.loading,showTotal:e.pagination.showTotal,pagination:e.pagination,rowSelection:{selectedRowKeys:e.selectedRowKeys,onChange:e.onSelectChange},rowKey:"id"},on:{change:e.pageChange},scopedSlots:e._u([{key:"expandedRowRender",fn:function(t){return a("p",{staticStyle:{margin:"0"},domProps:{innerHTML:e._s(t.content)}})}},{key:"action",fn:function(t,n,i){return[a("a",{on:{click:function(t){return e.rowClick(n,"del")}}},[e._v("删除")])]}}])})],1)],1)},i=[],o=(n("386d"),n("7514"),n("ac6a"),n("64de")),c=n("2f14"),s=n("1b80"),r=[{title:"消息标题",dataIndex:"title",width:"20%"},{title:"时间",dataIndex:"create_time"},{title:"操作",scopedSlots:{customRender:"action"}}],d={mixins:[s["a"]],data:function(){return{columns:r,dataSource:[],selectedRowKeys:[],loading:!0,searchForm:{},searchLoading:!1}},created:function(){this.init()},methods:{init:function(){var t=this;t.requestData.type="notice",t.loading=!0,t.selectedRowKeys=[],Object(o["d"])(t.requestData).then((function(e){t.dataSource=e.data.list,t.pagination.total=e.data.total,t.loading=!1}))},onSelectChange:function(t){this.selectedRowKeys=t},listAction:function(t){var e=this;switch(t.key){case"setReadied":Object(o["f"])(JSON.stringify(e.selectedRowKeys)),e.dataSource.forEach((function(t,n){var a=e.selectedRowKeys.find((function(e){return e==t.id}));a&&(e.dataSource[n].is_read=1)})),e.selectedRowKeys=[],e.$notice("操作成功","message","success");break;case"delete":this.$confirm({title:"确认删除这些消息?",content:"删除后不可恢复",okText:"删除",okType:"danger",cancelText:"取消",onOk:function(){return Object(o["b"])(JSON.stringify(e.selectedRowKeys)).then((function(t){Object(c["a"])(t)&&(e.init(),e.notice("操作成功","message","success"),e.selectedRowKeys=[])})),Promise.resolve()}});break}},rowClick:function(t,e){var n=this;"del"==e&&this.$confirm({title:"确认删除此消息?",content:"删除后不可恢复",okText:"删除",okType:"danger",cancelText:"取消",onOk:function(){return Object(o["c"])(t.id).then((function(t){n.init()})),Promise.resolve()}})},handleSearchSubmit:function(){var t=this;t.searchForm.validateFields((function(e,n){e||t.search()}))},search:function(){var t=this.searchForm.getFieldsValue();if(t.date&&t.date.length>0){var e=t.date[0].format("YYYY-MM-DD"),n=t.date[1].format("YYYY-MM-DD");t.date=e+"~"+n}Object.assign(this.requestData,t),this.init()}}},u=d,l=n("2877"),f=Object(l["a"])(u,a,i,!1,null,null,null);e["default"]=f.exports}}]);