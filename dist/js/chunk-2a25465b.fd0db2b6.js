(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2a25465b"],{"009f":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"task-detail",attrs:{id:"task-detail"}},[i("a-spin",{staticClass:"task-detail-spin",attrs:{spinning:t.loading}},[i("div",{staticClass:"task-header",class:{disabled:t.task.deleted}},[t.task.deleted?i("span",{staticClass:"head-title muted"},[i("a-icon",{attrs:{type:"delete"}}),t._v(" \n        "),i("span",[t._v("任务已在回收站中，不可修改")])],1):i("span",{staticClass:"head-title"},[t.task.parentTask?i("span",[i("span",{staticClass:"muted"},[t._v("属于任务：")]),i("a-breadcrumb",{staticClass:"breadcrumb text-default",attrs:{separator:">"}},t._l(t.task.parentTasks,(function(e){return i("a-breadcrumb-item",{key:e.code},[i("a",{staticClass:"text-default",on:{click:function(i){return t.init(e.code)}}},[t._v(t._s(e.name))])])})),1)],1):i("span",[t._v(t._s(t.task.projectName)+" · "+t._s(t.task.stageName))])]),i("span",{staticClass:"header-action text-right"},[t.task.deleted?[i("a",{staticClass:"action-item muted",on:{click:t.recoveryTask}},[i("a-icon",{attrs:{type:"undo"}}),i("span",[t._v("恢复内容")])],1),i("a",{staticClass:"action-item muted",on:{click:t.deleteTask}},[i("a-icon",{attrs:{type:"delete"}}),i("span",[t._v("彻底删除")])],1)]:[i("a-tooltip",{attrs:{mouseEnterDelay:.5}},[i("template",{slot:"title"},[i("span",[t._v("复制任务链接")])]),i("a",{directives:[{name:"clipboard",rawName:"v-clipboard",value:t.taskLink,expression:"taskLink"}],staticClass:"action-item muted",on:{success:t.copyLink}},[i("a-icon",{attrs:{type:"link"}})],1)],2),i("a-tooltip",{attrs:{mouseEnterDelay:.5}},[i("template",{slot:"title"},[i("span",[t._v("点个赞")])]),i("a",{staticClass:"action-item muted",class:{active:t.task.liked},on:{click:function(e){return t.like(!t.task.liked)}}},[i("a-icon",{attrs:{type:"like"}}),i("span",{directives:[{name:"show",rawName:"v-show",value:t.task.like,expression:"task.like"}]},[t._v(t._s(t.task.like))])],1)],2),i("a-dropdown",{attrs:{trigger:["click"],placement:"bottomCenter"},model:{value:t.visibleTaskMenu,callback:function(e){t.visibleTaskMenu=e},expression:"visibleTaskMenu"}},[i("a-tooltip",{attrs:{mouseEnterDelay:.5}},[i("template",{slot:"title"},[i("span",[t._v("打开菜单")])]),i("a",{staticClass:"action-item muted"},[i("a-icon",{attrs:{type:"ellipsis"}})],1)],2),i("a-menu",{staticClass:"field-right-menu",attrs:{slot:"overlay"},on:{click:t.doTask},slot:"overlay"},[i("a-menu-item",{key:"copy"},[i("a-icon",{attrs:{type:"copy"}}),i("span",[t._v("复制任务 *")])],1),i("a-menu-item",{key:"move"},[i("a-icon",{attrs:{type:"snippets"}}),i("span",[t._v("移动任务 *")])],1),i("a-menu-item",{key:"star"},[i("a-icon",{attrs:{type:"star"}}),t.task.stared?i("span",[t._v("取消收藏")]):i("span",[t._v("收藏任务")])],1),i("a-menu-item",{key:"recycle"},[i("a-icon",{attrs:{type:"delete"}}),i("span",[t._v("移到回收站")])],1),i("a-menu-item",{key:"open"},[i("a-icon",{attrs:{type:"book"}}),i("span",[t._v("以新标签页打开")])],1),i("a-menu-divider"),i("a-menu-item",{key:"private"},[i("a-icon",{attrs:{type:t.task.private?"lock":"unlock"}}),i("span",[t._v("隐私模式")]),i("a",{staticClass:"menu-action text-primary"},[t.task.private?i("span",[t._v("已开启")]):i("span",[t._v("已关闭")])]),i("div",{staticClass:"menu-desc muted"},[t.task.private?i("span",[t._v("仅参与者可见")]):i("span",[t._v("所有成员可见")])])],1)],1)],1)],i("a-tooltip",{attrs:{mouseEnterDelay:.5}},[i("template",{slot:"title"},[i("span",[t._v("关闭面板")])]),i("a",{staticClass:"action-item muted",on:{click:t.detailClose}},[i("a-icon",{attrs:{type:"close"}})],1)],2)],2)]),i("div",{staticClass:"task-wrap"},[i("div",{staticClass:"task-content"},[i("div",{staticClass:"content-left"},[i("vue-scroll",{attrs:{ops:t.scrollOps}},[i("div",{staticClass:"task-title",class:{disabled:t.task.deleted}},[i("a-input",{directives:[{name:"show",rawName:"v-show",value:t.showEditName,expression:"showEditName"}],ref:"inputTitle",attrs:{"auto-focus":"",size:"large"},on:{blur:t.doName},model:{value:t.task.name,callback:function(e){t.$set(t.task,"name",e)},expression:"task.name"}}),t.task.deleted?i("div",{directives:[{name:"show",rawName:"v-show",value:!t.showEditName,expression:"!showEditName"}],staticClass:"title-text"},[t._v(t._s(t.task.name))]):i("a-tooltip",{attrs:{mouseEnterDelay:.5}},[i("template",{slot:"title"},[i("span",[t._v("点击即可编辑")])]),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.showEditName,expression:"!showEditName"}],staticClass:"title-text",on:{click:t.editTitle}},[t._v(t._s(t.task.name))])],2)],1),i("div",{staticClass:"task-basic-attrs-view muted"},[i("div",{staticClass:"field-list",class:{disabled:t.task.deleted}},[i("div",{staticClass:"component-mount"},[i("div",{staticClass:"field"},[i("div",{staticClass:"field-left"},[i("a-icon",{attrs:{type:"check-square"}}),i("span",{staticClass:"field-name"},[t._v("状态")])],1),i("div",{staticClass:"field-right"},[i("a-dropdown",{class:{disabled:t.task.hasUnDone},attrs:{trigger:["click"],disabled:!!t.task.deleted||!!t.task.hasUnDone}},[i("a-tooltip",{attrs:{placement:"top"}},[i("template",{slot:"title"},[t.task.hasUnDone?i("span",{staticStyle:{"font-size":"12px"}},[t._v("子任务尚未全部完成，无法完成父任务")]):t._e()]),i("span",[t.task.done?i("a-tag",{attrs:{color:"green"}},[t._v("已完成")]):t._e(),i("span",{directives:[{name:"show",rawName:"v-show",value:!t.task.done,expression:"!task.done"}]},[t._v("未完成")])],1)],2),i("a-menu",{staticClass:"field-right-menu",attrs:{slot:"overlay",selectable:!1},on:{click:function(e){return t.taskDone(t.task.code,!t.task.done)}},slot:"overlay"},[i("a-menu-item",{key:"done"},[i("div",{staticClass:"menu-item-content"},[i("a-tag",{attrs:{color:"green"}},[t._v("已完成")]),i("a-icon",{directives:[{name:"show",rawName:"v-show",value:t.task.done,expression:"task.done"}],staticClass:"check muted",attrs:{type:"check"}})],1)]),i("a-menu-item",{key:"undone"},[i("div",{staticClass:"menu-item-content"},[i("a-tag",{attrs:{color:"grey"}},[t._v("未完成")]),i("a-icon",{directives:[{name:"show",rawName:"v-show",value:!t.task.done,expression:"!task.done"}],staticClass:"check muted",attrs:{type:"check"}})],1)])],1)],1)],1)])]),i("div",{staticClass:"component-mount"},[i("div",{staticClass:"field"},[i("div",{staticClass:"field-left"},[i("a-icon",{attrs:{type:"user"}}),i("span",{staticClass:"field-name"},[t._v("执行者")])],1),i("div",{staticClass:"field-right"},[i("a-dropdown",{attrs:{trigger:["click"],disabled:!!t.task.deleted,placement:"bottomCenter"},model:{value:t.visibleTaskMemberMenu,callback:function(e){t.visibleTaskMemberMenu=e},expression:"visibleTaskMemberMenu"}},[t.task.deleted?i("div",{staticClass:"field-flex"},[t.task.executor?[i("a-avatar",{attrs:{src:t.task.executor.avatar,icon:"user",size:"small"}}),i("a",{staticClass:"muted name"},[t._v(t._s(t.task.executor.name))])]:t._e(),t.task.executor?t._e():[i("a-avatar",{attrs:{icon:"user",size:"small"}}),i("a",{staticClass:"muted name"},[t._v("待认领")])]],2):i("a-tooltip",{attrs:{mouseEnterDelay:.5}},[i("template",{slot:"title"},[i("span",[t._v("点击设置执行者")])]),i("div",{staticClass:"field-flex"},[t.task.executor?[i("a-avatar",{attrs:{src:t.task.executor.avatar,icon:"user",size:"small"}}),i("a",{staticClass:"muted name"},[t._v(t._s(t.task.executor.name))])]:t._e(),t.task.executor?t._e():[i("a-avatar",{attrs:{icon:"user",size:"small"}}),i("a",{staticClass:"muted name"},[t._v("待认领")])]],2)],2),i("div",{attrs:{slot:"overlay"},slot:"overlay"},[t.visibleTaskMemberMenu?i("task-member-menu",{attrs:{projectCode:t.projectCodeCurrent,taskCode:t.code},on:{close:function(e){return t.init(!1)},inviteProjectMember:function(e){t.showInviteMember=!0,t.visibleTaskMemberMenu=!1}}}):t._e()],1)],1)],1)])]),i("div",{staticClass:"component-mount"},[i("div",{staticClass:"field"},[i("div",{staticClass:"field-left"},[i("a-icon",{attrs:{type:"calendar"}}),i("span",{staticClass:"field-name"},[t._v("时间")])],1),i("div",{staticClass:"field-right field-date"},[t.task.openBeginTime?[i("a-dropdown",{attrs:{trigger:["click"],disabled:!!t.task.deleted},model:{value:t.showBeginTime,callback:function(e){t.showBeginTime=e},expression:"showBeginTime"}},[t.task.deleted?i("div",{staticClass:"field-flex"},[i("a",{staticClass:"muted name",staticStyle:{margin:"0"}},[t.task.setBeginTime?[t._v(t._s(t.task.begin_time_format))]:[t._v("设置开始时间")]],2)]):i("a-tooltip",{attrs:{mouseEnterDelay:.5}},[i("template",{slot:"title"},[i("span",[t._v("点击设置开始时间")])]),i("div",{staticClass:"field-flex"},[i("a",{staticClass:"muted name",staticStyle:{margin:"0"}},[t.task.setBeginTime?[t._v(t._s(t.task.begin_time_format))]:[t._v("设置开始时间")]],2)])],2),i("div",{attrs:{slot:"overlay"},slot:"overlay"},[i("a-date-picker",{attrs:{size:"small",format:"MM月DD日 HH:mm",showTime:"",allowClear:"",showToday:!1,open:t.showBeginTime},on:{ok:function(e){return t.doBeginTime(!0)}},model:{value:t.task.begin_time,callback:function(e){t.$set(t.task,"begin_time",e)},expression:"task.begin_time"}},[i("template",{slot:"renderExtraFooter"},[i("a",{staticStyle:{position:"absolute"},attrs:{size:"small"},on:{click:function(e){return t.doBeginTime(!1)}}},[t._v("清除")])])],2)],1)],1),i("span",{staticClass:"m-l-sm m-r-sm"},[t._v("-")])]:t._e(),i("a-dropdown",{attrs:{trigger:["click"],disabled:!!t.task.deleted},model:{value:t.showEndTime,callback:function(e){t.showEndTime=e},expression:"showEndTime"}},[t.task.deleted?i("div",{staticClass:"field-flex"},[i("a",{staticClass:"muted name",staticStyle:{margin:"0"}},[t.task.setEndTime?[t._v(t._s(t.task.end_time_format))]:[t._v("设置截止时间")]],2)]):i("a-tooltip",{attrs:{mouseEnterDelay:.5}},[i("template",{slot:"title"},[i("span",[t._v("点击设置截止时间")])]),i("div",{staticClass:"field-flex"},[i("a",{staticClass:"muted name",staticStyle:{margin:"0"}},[t.task.setEndTime?[t._v(t._s(t.task.end_time_format))]:[t._v("设置截止时间")]],2)])],2),i("div",{attrs:{slot:"overlay"},slot:"overlay"},[i("a-date-picker",{attrs:{size:"small",format:"MM月DD日 HH:mm",showTime:"",allowClear:"",showToday:!1,open:t.showEndTime},on:{ok:function(e){return t.doEndTime(!0)}},model:{value:t.task.end_time,callback:function(e){t.$set(t.task,"end_time",e)},expression:"task.end_time"}},[i("template",{slot:"renderExtraFooter"},[i("a",{staticStyle:{position:"absolute"},attrs:{size:"small"},on:{click:function(e){return t.doEndTime(!1)}}},[t._v("清除")])])],2)],1)],1)],2)])]),i("div",{staticClass:"component-mount"},[i("div",{staticClass:"field"},[i("div",{staticClass:"field-left"},[i("a-icon",{attrs:{type:"file-text"}}),i("span",{staticClass:"field-name"},[t._v("备注")])],1),i("div",{staticClass:"field-right width-block"},[i("div",{directives:[{name:"show",rawName:"v-show",value:!t.showTaskDescriptionEdit,expression:"!showTaskDescriptionEdit"}],staticClass:"task-description",class:{disabled:t.task.deleted},on:{click:t.showTaskDesc}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.task.description,expression:"task.description"}],staticClass:"description-txt",domProps:{innerHTML:t._s(t.task.description)}}),i("span",{directives:[{name:"show",rawName:"v-show",value:!t.task.description,expression:"!task.description"}]},[t._v("添加备注")])]),t.hasMoreDesc?i("div",{staticClass:"m-t-sm"},[i("a",{directives:[{name:"show",rawName:"v-show",value:!t.showMoreDesc,expression:"!showMoreDesc"}],on:{click:function(e){return t.checkShowMoreDesc(!0)}}},[t._v("显示更多")]),i("a",{directives:[{name:"show",rawName:"v-show",value:t.showMoreDesc,expression:"showMoreDesc"}],on:{click:function(e){return t.checkShowMoreDesc(!1)}}},[t._v("收起备注")])]):t._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:t.showTaskDescriptionEdit,expression:"showTaskDescriptionEdit"}]},[i("editor",{ref:"vueWangeditor",attrs:{id:"editor",uploadImgServer:t.editorConfig.uploadImgServer,uploadImgHeaders:t.editorConfig.uploadImgHeaders,menus:t.editorConfig.menus}}),i("div",{staticClass:"action-btn pull-right"},[i("a",{staticClass:"cancel-text muted",attrs:{type:"text"},on:{click:function(e){t.showTaskDescriptionEdit=!1,t.initContent(!1)}}},[t._v("取消")]),i("a-button",{staticClass:"middle-btn",attrs:{type:"primary",htmlType:"submit"},on:{click:t.doContent}},[t._v("保存")])],1)],1)])])]),i("div",{staticClass:"component-mount"},[i("div",{staticClass:"field"},[i("div",{staticClass:"field-left"},[i("a-icon",{attrs:{type:"bulb"}}),i("span",{staticClass:"field-name"},[t._v("优先级")])],1),i("div",{staticClass:"field-right"},[i("a-dropdown",{attrs:{trigger:["click"],disabled:!!t.task.deleted}},[i("span",[i("a-tag",{attrs:{color:t.priColor(t.task.pri)}},[t._v(t._s(t.task.priText))])],1),i("a-menu",{staticClass:"field-right-menu",attrs:{slot:"overlay",selectable:!1},on:{click:t.doPri},slot:"overlay"},[i("a-menu-item",{key:0},[i("div",{staticClass:"menu-item-content"},[i("a-tag",{attrs:{color:t.priColor(0)}},[t._v("普通")]),i("a-icon",{directives:[{name:"show",rawName:"v-show",value:0==t.task.pri,expression:"task.pri == 0"}],staticClass:"check muted",attrs:{type:"check"}})],1)]),i("a-menu-item",{key:1},[i("div",{staticClass:"menu-item-content"},[i("a-tag",{attrs:{color:t.priColor(1)}},[t._v("紧急")]),i("a-icon",{directives:[{name:"show",rawName:"v-show",value:1==t.task.pri,expression:"task.pri == 1"}],staticClass:"check muted",attrs:{type:"check"}})],1)]),i("a-menu-item",{key:2},[i("div",{staticClass:"menu-item-content"},[i("a-tag",{attrs:{color:t.priColor(2)}},[t._v("非常紧急")]),i("a-icon",{directives:[{name:"show",rawName:"v-show",value:2==t.task.pri,expression:"task.pri == 2"}],staticClass:"check muted",attrs:{type:"check"}})],1)])],1)],1)],1)])]),i("div",{staticClass:"component-mount task-tag"},[i("div",{staticClass:"field"},[i("div",{staticClass:"field-left"},[i("a-icon",{attrs:{type:"tag"}}),i("span",{staticClass:"field-name"},[t._v("标签")])],1),i("div",{staticClass:"field-right"},[i("div",{staticClass:"inline-block"},t._l(t.task.tags,(function(e,n){return i("a-tag",{key:n,attrs:{color:e.tag.color}},[t._v("\n                          "+t._s(e.tag.name)+"\n                          "),i("a-icon",{attrs:{type:"close"},on:{click:function(i){return t.removeTag(e.tag,n)}}})],1)})),1),i("a-dropdown",{attrs:{trigger:["click"],disabled:!!t.task.deleted,placement:"bottomCenter"},model:{value:t.visibleTaskTagMenu,callback:function(e){t.visibleTaskTagMenu=e},expression:"visibleTaskTagMenu"}},[t.task.deleted?t._e():i("a-tooltip",{attrs:{mouseEnterDelay:.5}},[i("template",{slot:"title"},[i("span",[t._v("添加标签")])]),i("div",{staticClass:"inline-block"},[i("a-icon",{staticClass:"member-item invite",attrs:{type:"plus-circle",theme:"twoTone"}})],1)],2),i("div",{staticClass:"inline-block"},[i("a-icon",{staticClass:"member-item invite",attrs:{type:"plus-circle",theme:"twoTone"}})],1),i("div",{attrs:{slot:"overlay"},slot:"overlay"},[t.visibleTaskTagMenu?i("task-tag-menu",{attrs:{projectCode:t.projectCodeCurrent,taskCode:t.code},on:{change:t.taskTagChange,update:t.taskTagUpdate,delete:t.taskTagDelete}}):t._e()],1)],1)],1)])]),i("div",{staticClass:"component-mount"},[i("div",{staticClass:"field"},[i("div",{staticClass:"field-left"},[i("a-icon",{attrs:{type:"bars"}}),i("span",{staticClass:"field-name"},[t._v("\n                        子任务\n                        "),i("span",{directives:[{name:"show",rawName:"v-show",value:t.childTaskList.length,expression:"childTaskList.length"}]},[t._v("· "+t._s(t.childTaskDoneNum)+"/"+t._s(t.childTaskList.length))])])],1),i("div",{staticClass:"field-right width-block"})])]),i("div",{staticClass:"component-mount"},[i("div",{staticClass:"field"},[i("div",{staticClass:"block-field width-block"},[i("div",{staticClass:"task-child"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.childTaskList.length,expression:"childTaskList.length"}],staticClass:"task-list"},t._l([0,1],(function(e){return i("div",{key:e},t._l(t.childTaskList,(function(n,a){return i("div",{key:n.code},[n.done==e?i("div",{staticClass:"list-item task"},[i("a-tooltip",{attrs:{placement:"top"}},[i("template",{slot:"title"},[n.parentDone?i("span",{staticStyle:{"font-size":"12px"}},[t._v("父任务已完成，无法重做子任务")]):n.hasUnDone?i("span",{staticStyle:{"font-size":"12px"}},[t._v("子任务尚未全部完成，无法完成父任务")]):t._e()]),i("div",{staticClass:"check-box-wrapper task-item",on:{click:function(e){return e.stopPropagation(),function(){if(t.task.deleted||n.parentDone||n.hasUnDone)return!1;t.taskDone(n.code,!n.done,a,"child")}()}}},[i("a-icon",{staticClass:"check-box",class:{disabled:t.task.deleted||n.parentDone||n.hasUnDone},style:{fontSize:"16px"},attrs:{type:n.done?"check-square":"border"}})],1)],2),i("a-dropdown",{attrs:{trigger:["click"],disabled:!!t.task.deleted,placement:"bottomCenter"},model:{value:n.visibleChildTaskMemberMenu,callback:function(e){t.$set(n,"visibleChildTaskMemberMenu",e)},expression:"childTask.visibleChildTaskMemberMenu"}},[i("a-tooltip",{attrs:{mouseEnterDelay:.5}},[i("template",{slot:"title"},[n.executor?i("span",[t._v(t._s(n.executor.name))]):i("span",[t._v("待认领")])]),n.executor?i("a-avatar",{staticClass:"task-item",class:{disabled:t.task.deleted},attrs:{size:"small",icon:"user",src:n.executor.avatar}}):i("a-avatar",{staticClass:"task-item",class:{disabled:t.task.deleted},attrs:{size:"small",icon:"user"}})],2),i("div",{attrs:{slot:"overlay"},slot:"overlay"},[n.visibleChildTaskMemberMenu?i("task-member-menu",{attrs:{projectCode:t.projectCodeCurrent,taskCode:n.code,isCommit:!0},on:{close:function(e){n.visibleChildTaskMemberMenu=!1,t.getChildTasks()},inviteProjectMember:function(e){t.showInviteMember=!0,n.visibleChildTaskMemberMenu=!1}}}):t._e()],1)],1),i("div",{staticClass:"task-item task-title",on:{click:function(e){return e.stopPropagation(),t.init(n.code)}}},[i("div",{staticClass:"title-text",class:{done:n.done}},[t._v(t._s(n.name))])]),i("a",{staticClass:"muted",on:{click:function(e){return e.stopPropagation(),t.init(n.code)}}},[i("a-icon",{staticClass:"task-item",attrs:{type:"right"}})],1)],1):t._e()])})),0)})),0),i("div",{directives:[{name:"show",rawName:"v-show",value:t.showChildTask,expression:"showChildTask"}],staticClass:"task-list"},[i("div",{staticClass:"add-task"},[i("div",{staticClass:"list-item task"},[i("span",{staticClass:"task-item check-box"}),i("a-dropdown",{attrs:{trigger:["click"],disabled:!!t.task.deleted,placement:"bottomCenter"},model:{value:t.visibleChildTaskMemberMenu,callback:function(e){t.visibleChildTaskMemberMenu=e},expression:"visibleChildTaskMemberMenu"}},[i("a-tooltip",{attrs:{mouseEnterDelay:.5}},[i("template",{slot:"title"},[t.childExecutor?i("span",[t._v(t._s(t.childExecutor.name))]):i("span",[t._v("待认领")])]),i("div",{staticClass:"field-flex"},[t.childExecutor?[i("a-avatar",{staticClass:"task-item",attrs:{src:t.childExecutor.avatar,icon:"user",size:"small"}})]:t._e(),t.childExecutor?t._e():[i("a-avatar",{staticClass:"task-item",attrs:{icon:"user",size:"small"}})]],2)],2),i("div",{attrs:{slot:"overlay"},slot:"overlay"},[t.visibleChildTaskMemberMenu?i("task-member-menu",{attrs:{projectCode:t.projectCodeCurrent,taskCode:t.childExecutor?t.code:"",isCommit:!1},on:{close:t.updateChildExecutor,inviteProjectMember:function(e){t.showInviteChildTaskMember=!0,t.visibleChildTaskMemberMenu=!1}}}):t._e()],1)],1),i("div",{staticClass:"task-item task-input"},[i("a-input",{on:{pressEnter:t.createTask},model:{value:t.childTaskName,callback:function(e){t.childTaskName=e},expression:"childTaskName"}})],1)],1),i("div",{staticClass:"action-btn text-right"},[i("a",{staticClass:"cancel-text muted",attrs:{type:"text"},on:{click:function(e){t.showChildTask=!1}}},[t._v("取消")]),i("a-button",{staticClass:"middle-btn",attrs:{type:"primary",htmlType:"submit"},on:{click:t.createTask}},[t._v("保存")])],1)])]),i("a-tooltip",{attrs:{placement:"top"}},[i("template",{slot:"title"},[t.task.done?i("span",{staticStyle:{"font-size":"12px"}},[t._v("父任务已完成，无法添加新的子任务")]):t._e()]),i("a",{directives:[{name:"show",rawName:"v-show",value:!t.showChildTask,expression:"!showChildTask"}],staticClass:"add-handler",class:{disabled:t.task.done},on:{click:function(){if(t.task.deleted||t.task.done)return!1;t.showChildTask=!0}}},[i("a-icon",{staticStyle:{"margin-right":"6px"},attrs:{type:"plus"}}),t._v("添加子任务\n                          ")],1)],2)],1)])])]),i("div",{staticClass:"component-mount"},[i("div",{staticClass:"field"},[i("div",{staticClass:"field-left",staticStyle:{width:"100%"}},[i("a-icon",{attrs:{type:"clock-circle"}}),i("span",{staticClass:"field-name"},[t._v("\n                        工时\n                        "),t.workTimeList.length?i("span",[t._v("\n                          · 实际工时 "+t._s(t.workTimeTotal)+" 小时，工时记录 "+t._s(t.workTimeList.length)+" 条，预估工时 "+t._s(t.task.work_time)+" 小时\n                          "),i("a",{staticClass:"muted m-l-sm",on:{click:t.doPlainWorkTime}},[i("a-icon",{staticClass:"task-item",attrs:{type:"edit"}})],1)]):i("span",[t.task.work_time?i("span",[t._v("· 预估工时 "+t._s(t.task.work_time)+" 小时")]):t._e(),i("a-tooltip",[i("template",{slot:"title"},[i("span",[t._v("设置预估工时")])]),i("a",{staticClass:"muted m-l-sm",on:{click:t.doPlainWorkTime}},[i("a-icon",{staticClass:"task-item",attrs:{type:"edit"}})],1)],2)],1)])],1)])]),i("div",{staticClass:"component-mount"},[i("div",{staticClass:"field"},[i("div",{staticClass:"block-field width-block"},[i("div",{staticClass:"task-child"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.workTimeList.length,expression:"workTimeList.length"}],staticClass:"task-list"},t._l(t.workTimeList,(function(e,n){return i("div",{key:e.code},[i("div",{staticClass:"list-item task m-l-xs"},[i("div",{staticClass:"task-item task-title hover-none"},[i("div",{staticClass:"title-text"},[i("a-tooltip",{attrs:{mouseEnterDelay:.5}},[i("template",{slot:"title"},[e.member?i("span",[t._v(t._s(e.member.name))]):i("span",[t._v("待认领")])]),i("a-avatar",{staticClass:"task-item",attrs:{size:"small",icon:"user",src:e.member.avatar}})],2),t._v("\n                                  "+t._s(e.member.name)+"\n                                  "+t._s(t.moment(e.begin_time).format("MM月DD日 HH:mm"))+"开始 工时为\n                                  "+t._s(e.num)+" 小时\n                                  "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.content,expression:"workTime.content"}],staticClass:"muted",staticStyle:{"padding-left":"40px","margin-top":"6px"}},[t._v(t._s(e.content))])],1)]),i("a",{staticClass:"muted",on:{click:function(i){return t.doWorkTime(e)}}},[i("a-icon",{staticClass:"task-item",attrs:{type:"edit"}})],1),i("a",{staticClass:"muted",on:{click:function(i){return t.deleteWorkTime(e,n)}}},[i("a-icon",{staticClass:"task-item",attrs:{type:"delete"}})],1)])])})),0),i("a-tooltip",{attrs:{placement:"top"}},[i("a",{staticClass:"add-handler",on:{click:function(e){return t.doWorkTime(!1)}}},[i("a-icon",{staticStyle:{"margin-right":"6px"},attrs:{type:"plus"}}),t._v("添加工时\n                          ")],1)])],1)])])]),i("div",{staticClass:"component-mount"},[i("div",{staticClass:"field"},[i("div",{staticClass:"field-left"},[i("a-icon",{attrs:{type:"paper-clip"}}),i("span",{staticClass:"field-name"},[t._v("关联文件")])],1),i("div",{staticClass:"field-right width-block"})])]),i("div",{staticClass:"component-mount"},[i("div",{staticClass:"field"},[i("div",{staticClass:"block-field width-block"},[i("div",{staticClass:"task-child"},[i("a",{staticClass:"add-handler",attrs:{id:"upload-file"}},[i("a-icon",{staticStyle:{"margin-right":"6px"},attrs:{type:"plus"}}),t._v("上传文件\n                        ")],1)])])])]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.taskSourceList.length>0,expression:"taskSourceList.length > 0"}],staticClass:"component-mount"},[i("div",{staticClass:"field"},[i("div",{staticClass:"block-field width-block"},[i("div",{staticClass:"file-list"},[i("div",{staticClass:"m-xs m-t-none"},[t._v("关联的文件")]),i("a-list",t._l(t.taskSourceList,(function(e,n){return i("a-list-item",{key:n},[i("a-list-item-meta",[i("a-avatar",{attrs:{slot:"avatar",size:"small",shape:"square",icon:"link",src:e.sourceDetail.file_url},slot:"avatar"}),i("div",{attrs:{slot:"title"},slot:"title"},[i("a",{staticClass:"muted",attrs:{target:"_blank",href:e.sourceDetail.file_url}},[t._v("\n                                  "+t._s(e.title)+"\n                                ")])]),i("div",{attrs:{slot:"description"},slot:"description"})],1),i("a",{staticClass:"muted",attrs:{slot:"actions"},slot:"actions"},[i("span",[t._v(t._s(e.sourceDetail.projectName))])]),i("a",{staticClass:"muted",attrs:{slot:"actions"},slot:"actions"},[i("a-dropdown",{attrs:{trigger:["click"],placement:"bottomCenter"}},[i("a",{staticClass:"action-item muted"},[i("a-icon",{attrs:{type:"down"}})],1),i("a-menu",{directives:[{name:"clipboard",rawName:"v-clipboard",value:e.sourceDetail.file_url,expression:"item.sourceDetail.file_url"}],staticClass:"field-right-menu",attrs:{slot:"overlay"},on:{click:function(i){return t.doSource(i,e)}},slot:"overlay"},[i("a-menu-item",{key:"copy"},[i("a-icon",{attrs:{type:"link"}}),i("span",[t._v("复制链接")])],1),i("a-menu-item",{key:"unlink"},[i("a-icon",{attrs:{type:"disconnect"}}),i("span",[t._v("取消关联")])],1)],1)],1)],1)],1)})),1)],1)])])])])])])],1),i("div",{staticClass:"content-right"},[i("div",{staticClass:"header"},[i("div",{staticClass:"title"},[t._v("参与者 · "+t._s(t.taskMemberList.length))]),i("div",{staticClass:"member-list"},[t._l(t.taskMemberList,(function(e){return i("a-tooltip",{key:e.code,attrs:{mouseEnterDelay:.5}},[i("template",{slot:"title"},[i("span",[t._v("\n                    "+t._s(e.name)+"\n                    "),e.is_owner?i("span",[t._v("· 创建者")]):t._e()])]),i("a-avatar",{staticClass:"member-item",attrs:{icon:"user",size:"small",src:e.avatar},on:{click:function(i){return t.routerLink("/members/profile/"+e.membar_account_code+"?key=3")}}})],2)})),i("a-dropdown",{attrs:{trigger:["click"],placement:"bottomCenter"},model:{value:t.visibleProjectMemberMenu,callback:function(e){t.visibleProjectMemberMenu=e},expression:"visibleProjectMemberMenu"}},[i("a-tooltip",{attrs:{mouseEnterDelay:.5}},[i("template",{slot:"title"},[i("span",[t._v("点击添加参与者")])]),i("a-icon",{staticClass:"member-item invite",staticStyle:{"font-size":"24px"},attrs:{type:"plus-circle",theme:"twoTone"}})],2),i("div",{attrs:{slot:"overlay"},slot:"overlay"},[t.visibleProjectMemberMenu?i("project-member-menu",{attrs:{taskCode:t.code,projectCode:t.projectCodeCurrent},on:{close:function(e){return t.init(!1)},inviteProjectMember:function(e){t.showInviteMember=!0,t.visibleProjectMemberMenu=!1}}}):t._e()],1)],1)],2)]),i("div",{staticClass:"log-wrap"},[i("div",{staticClass:"header"},[i("a-dropdown",{attrs:{trigger:["click"]}},[i("a",{staticClass:"text-default"},[t._v("\n                  所有动态\n                  "),i("a-icon",{attrs:{type:"down"}})],1),i("a-menu",{staticClass:"field-right-menu",attrs:{slot:"overlay",selectable:""},slot:"overlay",model:{value:t.taskLogType,callback:function(e){t.taskLogType=e},expression:"taskLogType"}},[i("a-menu-item",{key:"all"},[i("div",{staticClass:"menu-item-content"},[i("span",[t._v("所有动态")])])]),i("a-menu-item",{key:"comment"},[i("div",{staticClass:"menu-item-content"},[i("span",[t._v("仅评论")])])]),i("a-menu-item",{key:"log"},[i("div",{staticClass:"menu-item-content"},[i("span",[t._v("仅动态")])])])],1)],1)],1),i("vue-scroll",[i("div",{staticClass:"log-list muted"},[i("a",{directives:[{name:"show",rawName:"v-show",value:t.checkShowMoreLog,expression:"checkShowMoreLog"}],staticClass:"show-more muted",on:{click:t.getMoreTaskLog}},[i("a-icon",{attrs:{type:"ellipsis"}}),t._v("\n                  显示较早的 "+t._s(t.taskLogTotal-t.taskLogList.length)+" 条动态\n                ")],1),t._l(t.taskLogList,(function(e){return i("div",{key:e.code,class:{"log-comment":e.is_comment,"list-item":!e.is_comment}},[e.is_comment?t._e():[i("a-icon",{staticClass:"log-item",attrs:{type:e.icon}}),i("div",{staticClass:"log-item log-txt"},[i("div",[t._v("\n                        "+t._s(e.member.name)+"\n                        "),i("span",{domProps:{innerHTML:t._s(e.remark)}})]),e.content?i("div",{staticClass:"log-content",domProps:{innerHTML:t._s(e.content)}}):t._e()])],e.is_comment?[i("div",{staticClass:"log-txt text-default",staticStyle:{width:"100%",display:"flex","justify-content":"space-between"}},[i("div",{staticStyle:{display:"flex","align-items":"center"}},[i("a-avatar",{staticClass:"m-r-sm",staticStyle:{"margin-left":"-5px"},attrs:{size:24,src:e.member.avatar}}),i("div",[t._v(t._s(e.member.name))])],1),i("a-tooltip",{attrs:{mouseEnterDelay:.5}},[i("template",{slot:"title"},[i("span",[t._v(t._s(e.create_time))])]),i("span",{staticClass:"muted"},[t._v(t._s(t._f("formatLogTime")(e.create_time)))])],2)],1),i("div",{staticClass:"log-txt text-default",staticStyle:{padding:"0 0 0 30px"}},[i("div",{staticClass:"m-t-xs",domProps:{innerHTML:t._s(t.checkLink(e.content))}})])]:t._e(),e.is_comment?t._e():i("a-tooltip",{attrs:{mouseEnterDelay:.5}},[i("template",{slot:"title"},[i("span",[t._v(t._s(e.create_time))])]),i("span",[t._v(t._s(t._f("formatLogTime")(e.create_time)))])],2)],2)}))],2)])],1),i("div",{staticClass:"footer",attrs:{id:"footer"}},[i("a-popover",{attrs:{trigger:"click",placement:"top",visible:t.showMentions,arrowPointAtCenter:"",getPopupContainer:t.getPopup}},[i("template",{slot:"content"},[i("div",{staticClass:"mentions-content",staticStyle:{width:"200px"}},t._l(t.taskMemberList,(function(e){return i("div",{key:e.id,staticClass:"mentions-wrapper",on:{click:function(i){return t.selectMentionMember(e)}}},[i("a-avatar",{attrs:{src:e.avatar,icon:"user",size:28}}),i("span",{staticClass:"muted name m-l-xs"},[t._v(t._s(e.name))])],1)})),0)]),i("a-textarea",{ref:"commentText",staticStyle:{"margin-right":"24px"},attrs:{rows:1,placeholder:"支持@提及任务成员，Ctrl+Enter发表评论"},on:{focus:function(e){t.commenting=!0},blur:function(e){t.commenting=!1}},model:{value:t.comment,callback:function(e){t.comment=e},expression:"comment"}})],2),i("a-button",{staticClass:"middle-btn",attrs:{type:"primary"},on:{click:t.createComment}},[t._v("评论")])],1)])])])]),t.showInviteMember?i("invite-project-member",{attrs:{"project-code":t.projectCodeCurrent},model:{value:t.showInviteMember,callback:function(e){t.showInviteMember=e},expression:"showInviteMember"}}):t._e(),i("a-modal",{staticClass:"work-time-modal",attrs:{title:t.workTimeDo.modalTitle,bodyStyle:{paddingBottom:"1px"},confirmLoading:t.workTimeDo.confirmLoading},on:{ok:t.workTimeHandleSubmit},model:{value:t.workTimeDo.modalStatus,callback:function(e){t.$set(t.workTimeDo,"modalStatus",e)},expression:"workTimeDo.modalStatus"}},[i("a-form",{attrs:{layout:"vertical",form:t.workTimeDo.form},on:{submit:function(e){return e.preventDefault(),t.workTimeHandleSubmit(e)}}},[i("div",[i("div",{staticStyle:{"font-size":"15px"}},[t._v("登记任务")]),i("div",[t._v(t._s(t.task.name))]),i("a-divider",{staticClass:"m-t-xs m-b-md"})],1),i("div",{staticClass:"work-time-stats"},[i("div",{staticClass:"work-time-item"},[i("div",{staticClass:"muted title"},[t._v("预估工时")]),i("span",{staticClass:"work-time-num"},[t._v(t._s(t.task.work_time))]),i("span",[t._v("小时")])]),i("div",{staticClass:"work-time-item"},[i("div",{staticClass:"muted title"},[t._v("剩余工时")]),i("span",{staticClass:"work-time-num"},[t.task.work_time-t.workTimeTotal<0?[t._v("0")]:[t._v(t._s(t.task.work_time-t.workTimeTotal))]],2),i("span",[t._v("小时")])])]),i("a-row",{attrs:{gutter:24}},[i("a-col",{attrs:{span:12}},[i("a-form-item",{attrs:{label:"开始时间"}},[i("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["begin_time",{rules:[{required:!0,message:"请选择日期"}],validateTrigger:"change",initialValue:t.moment()}],expression:"[\n                              'begin_time',\n                              {rules: [{ required: true, message: '请选择日期' }], validateTrigger: 'change',initialValue: moment()}\n                          ]"}],attrs:{showTime:"",format:"YYYY年MM月DD日 HH:mm",allowClear:"",placeholder:"请选择日期"}})],1)],1),i("a-col",{attrs:{span:12}},[i("a-form-item",{attrs:{label:"消耗时间"}},[i("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["num",{rules:[{required:!0,message:"请输入消耗时间"}],validateTrigger:"change"}],expression:"[\n                              'num',\n                              {rules: [{ required: true, message: '请输入消耗时间' }], validateTrigger: 'change'}\n                          ]"}],attrs:{type:"text",placeholder:"请输入数字",addonAfter:"小时"}})],1)],1),i("a-col",{attrs:{span:24}},[i("a-form-item",{attrs:{label:"工作内容"}},[i("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["content"],expression:"[\n                              'content',\n                          ]"}],attrs:{rows:4,type:"text",placeholder:"在这期间做了什么"}})],1)],1)],1)],1)],1),i("a-modal",{attrs:{title:t.plainWorkTime.modalTitle,bodyStyle:{paddingBottom:"1px"},confirmLoading:t.plainWorkTime.confirmLoading},on:{ok:t.workTimePlainHandleSubmit},model:{value:t.plainWorkTime.modalStatus,callback:function(e){t.$set(t.plainWorkTime,"modalStatus",e)},expression:"plainWorkTime.modalStatus"}},[i("a-form",{attrs:{layout:"vertical",form:t.plainWorkTime.form},on:{submit:function(e){return e.preventDefault(),t.workTimePlainHandleSubmit(e)}}},[i("a-form-item",{attrs:{label:""}},[i("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["work_time",{rules:[{required:!0,message:"请输入预估工时"}],validateTrigger:"change"}],expression:"[\n                              'work_time',\n                              {rules: [{ required: true, message: '请输入预估工时' }], validateTrigger: 'change'}\n                          ]"}],attrs:{type:"text",placeholder:"请输入数字",addonAfter:"小时"}})],1)],1)],1)],1)},a=[],o=(i("8e6e"),i("456d"),i("a481"),i("4917"),i("ac6a"),i("7f7f"),i("20d6"),i("bd86")),s=(i("c5f6"),i("5880")),r=i("a532"),c=i("22b6");function l(t){return c["a"].post("project/task",t)}function d(t){return c["a"].post("project/task/save",t)}function u(t){return c["a"].post("project/task/edit",t)}function m(t,e){return c["a"].post("project/task/like",{like:e,taskCode:t})}function h(t,e){return c["a"].post("project/task/star",{star:e,taskCode:t})}function p(t,e,i){return c["a"].post("project/task/createComment",{taskCode:t,comment:e,mentions:i})}function A(t){return c["a"].post("project/task/read",{taskCode:t})}function f(t,e){return c["a"].post("project/task/taskDone",{taskCode:t,done:e})}function v(t){return c["a"].post("project/task/recycle",{taskCode:t})}function g(t){return c["a"].post("project/task/recovery",{taskCode:t})}function k(t){return c["a"].post("project/task/delete",{taskCode:t})}function w(t){return c["a"].post("project/task/taskLog",t)}function b(t){return c["a"].post("project/source_link/delete",{sourceCode:t})}var C=i("d8bc"),y=i("f66c"),x=i("4540"),_=i("e8d3"),T=i("d3a1"),E=i("68fe"),M=i("2f14"),B=i("97a8"),I=i("81fe"),S=i("ca8d"),D=i("261e"),j=i("cff3");function N(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function L(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?N(Object(i),!0).forEach((function(e){Object(o["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):N(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var Q=Object(E["a"])("tokenList",!0),F="";if(Q){var z=Q.accessToken,O=Q.tokenType;F="".concat(O," ").concat(z)}var P={name:"task-detail",components:{ATextarea:D["a"],editor:r["default"],taskMemberMenu:y["default"],taskTagMenu:x["default"],projectMemberMenu:_["default"],inviteProjectMember:T["default"]},props:{taskCode:{type:[String],default:function(){return""}},width:{type:[String,Number],default:function(){return"1200"}}},data:function(){return{moment:moment,loading:!1,code:this.taskCode,projectCodeCurrent:"",task:{},taskLogList:[],taskLogTotal:0,taskMemberList:[],workTimeList:[],workTimeTotal:[],visibleTaskMenu:!1,visibleTaskMemberMenu:!1,visibleTaskTagMenu:!1,visibleProjectMemberMenu:!1,showInviteMember:!1,taskName:"",showEditName:!1,showBeginTime:!1,showEndTime:!1,showTaskDescriptionEdit:!1,showMoreDesc:!1,hasMoreDesc:!1,editorConfig:{uploadImgServer:Object(M["c"])("project/index/uploadImg"),uploadImgHeaders:{Authorization:F},menus:["head","bold","italic","justify","image","link","list","quote","table","|","fullscreen"]},departmentMemberInfo:null,childTaskList:[],showChildTask:!1,childTaskName:"",childExecutor:null,visibleChildTaskMemberMenu:!1,showInviteChildTaskMember:!1,taskSourceList:[],taskLogType:["all"],showMoreTaskLog:0,hasMoreTaskLog:!1,hideShowMore:!1,comment:"",commenting:!1,workTimeDo:{form:this.$form.createForm(this),info:null,modalTitle:"登记工时记录",modalStatus:!1,confirmLoading:!1},plainWorkTime:{form:this.$form.createForm(this),modalTitle:"设置预估工时",modalStatus:!1,confirmLoading:!1},showMentions:!1,mentionsList:[]}},computed:L({},Object(s["mapState"])({userInfo:function(t){return t.userInfo},uploader:function(t){return t.common.uploader},socketAction:function(t){return t.socketAction}}),{childTaskDoneNum:function(){var t=this.childTaskList.filter((function(t){return 1==t.done}));return t.length},checkShowMoreLog:function(){return!this.hideShowMore&&this.taskLogTotal>5},taskLink:function(){return window.location.href},scrollOps:function(){return{rail:{background:"#e5e5e5",opacity:1},bar:{keepShow:!0}}}}),watch:{$route:function(t,e){},showInviteMember:function(t){t||this.getTaskMembers()},taskLogType:function(){this.getTaskLog()},socketAction:function(t){if("organization:task"===t.action){var e=t.data.data;e.taskCode==this.code&&this.init(null,!1)}},uploader:{handler:function(t,e){var i=this;console.log(t),console.log(t.fileList);var n=t.fileList,a=n.findIndex((function(t){return t.projectName==i.task.projectName}));-1!==a&&(this.taskSources(),this.getTaskLog())},deep:!0}},created:function(){this.init()},mounted:function(){var t=this,e=arguments;this.changeModalHeight(),window.onresize=function(){return function(){t.changeModalHeight()}()},document.onkeydown=function(i){console.log(i);var n=i||window.event||e.callee.caller.arguments[0];13==n.keyCode&&n.ctrlKey&&t.createComment(),"@"==n.key&&t.commenting?t.showMentions=!0:t.showMentions=!1},setTimeout((function(){t.uploader.assignBrowse(document.getElementById("upload-file"))}),500)},filters:{formatLogTime:function(t){return Object(I["c"])(t)}},methods:{init:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&(this.code=t),e&&(this.loading=!0),this.clearMemberMenu(),this.getTask(),this.getChildTasks(),this.getTaskMembers(),this.getTaskWorkTimeList()},detailClose:function(){this.$emit("close",this.task)},clearMemberMenu:function(){this.visibleTaskTagMenu=!1,this.visibleTaskMemberMenu=!1,this.visibleProjectMemberMenu=!1},getTask:function(){var t=this;this.$store.commit("viewRefresh"),this.clearMemberMenu(),A(this.code).then((function(e){t.getTaskLog(),t.taskSources(),t.taskName=e.data.name,t.task=e.data,t.projectCodeCurrent=e.data.project_code,t.task.end_time?(t.task.setEndTime=!0,t.task.end_time=moment(t.task.end_time)):(t.task.setEndTime=!1,t.task.end_time=moment(moment().format("YYYY-MM-DD")+" 18:00")),t.task.end_time_format=Object(I["b"])(t.task.end_time,!0),t.task.begin_time?(t.task.setBeginTime=!0,t.task.begin_time=moment(t.task.begin_time)):(t.task.setBeginTime=!1,t.task.begin_time=moment(moment().format("YYYY-MM-DD")+" 18:00")),t.task.begin_time_format=Object(I["b"])(t.task.begin_time,!0),t.initContent(t.task.description),t.task.executor&&!t.childExecutor&&(t.childExecutor=t.task.executor),t.loading=!1,t.$store.dispatch("setTempData",{projectCode:t.projectCodeCurrent,taskCode:t.code,projectName:e.data.projectName})}))},getTaskLog:function(){var t=this;w({taskCode:this.code,all:this.showMoreTaskLog,pageSize:5,comment:"comment"==this.taskLogType[0]?1:0}).then((function(e){t.taskLogList=e.data.list,t.taskLogTotal=e.data.total,e.data.total>5&&(t.hasMoreTaskLog=!0)}))},taskSources:function(){var t=this;Object(S["t"])({taskCode:this.code}).then((function(e){t.taskSourceList=e.data}))},getMoreTaskLog:function(){this.showMoreTaskLog=1,this.hideShowMore=!0,this.getTaskLog()},getTaskWorkTimeList:function(){var t=this;Object(S["a"])({taskCode:this.code}).then((function(e){t.workTimeList=e.data;var i=0;e.data&&(e.data.forEach((function(t){i+=Number(t.num)})),t.workTimeTotal=i)}))},getTaskMembers:function(){var t=this;this.clearMemberMenu(),Object(C["b"])({taskCode:this.code,pageSize:100}).then((function(e){t.taskMemberList=e.data.list,t.loading=!1}))},doTask:function(t){var e=this,i=this,n=t.key;switch(n){case"recycle":this.$confirm({title:"移到回收站",content:"您确定要把该任务移到回收站吗？",okText:"确定",okType:"danger",cancelText:"再想想",onOk:function(){return v(i.code).then((function(t){var e=Object(M["a"])(t);if(!e)return!1;i.task.deleted=1,i.getTaskLog()})),Promise.resolve()}});break;case"star":return this.task.stared?this.task.stared=0:this.task.stared=1,h(i.code,this.task.stared),!0;case"open":var a=window.location.href;-1!==a.indexOf("?")?a+="&full-screen":a+="?full-screen",window.open(a);break;case"private":return Object(S["p"])(i.code,Number(!this.task.private)).then((function(t){var i=Object(M["a"])(t);if(!i)return!1;e.task.private=Number(!e.task.private)})),!0}this.visibleTaskMenu=!1},editTitle:function(){var t=this;this.showEditName=!0,this.$nextTick((function(){t.$refs.inputTitle.focus()}))},doSource:function(t,e){var i=this,n=t.key;switch(n){case"unlink":this.$confirm({title:"取消关联",content:"您确定永久删除这个关联？",okText:"确定",okType:"danger",cancelText:"再想想",onOk:function(){return b(e.code).then((function(t){var e=Object(M["a"])(t);if(!e)return!1;i.taskSources(),i.getTaskLog()})),Promise.resolve()}});break;case"copy":return Object(B["b"])({title:"复制链接成功",msg:"在地址栏粘贴并打开可下载该资源"},"notice","success",5),!0}},deleteTask:function(){var t=this;this.$confirm({title:"彻底删除",content:"彻底删除任务后，该任务及其子任务将会被永久被删除。",okText:"删除",okType:"danger",cancelText:"再想想",onOk:function(){return k(t.code).then((function(e){t.detailClose()})),Promise.resolve()}})},recoveryTask:function(){var t=this;this.$confirm({title:"恢复内容",content:"您确定要恢复该任务吗？",okText:"确定",okType:"primary",cancelText:"再想想",onOk:function(){return g(t.code).then((function(e){var i=Object(M["a"])(e);if(!i)return!1;t.getTaskLog()})),t.task.deleted=0,Promise.resolve()}})},copyLink:function(){Object(B["b"])({title:"复制链接成功",msg:"你可以在其他标签页粘贴并快速打开任务页面"},"notice","success",5)},like:function(t){t=Number(t),m(this.code,t),t?this.task.like++:this.task.like--,this.task.liked=t},taskDone:function(t,e,i){var n=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"self";e=e?1:0,f(t,e).then((function(t){var o=Object(M["a"])(t);if(!o)return!1;n.getTaskLog(),"self"==a?n.task.done=e:n.childTaskList[i].done=e,n.getTask(),n.getChildTasks()}))},doBeginTime:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.task.setBeginTime=t,this.showBeginTime=e;var i="";t?(i=moment(this.task.begin_time).format("YYYY-MM-DD HH:mm"),this.task.begin_time_format=moment(this.task.begin_time).format("MM月DD日 HH:mm")):i="",this.editTask({begin_time:i})},doEndTime:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.task.setEndTime=t,this.showEndTime=e;var i="";t?(i=moment(this.task.end_time).format("YYYY-MM-DD HH:mm"),this.task.end_time_format=moment(this.task.end_time).format("MM月DD日 HH:mm")):i="",this.editTask({end_time:i})},doPri:function(t){this.editTask({pri:t.key})},doName:function(){if(this.showEditName=!1,!this.task.name.trim()||this.task.name==this.taskName)return this.task.name=this.taskName,!1;this.editTask({name:this.task.name})},editTask:function(t){var e=this;t.taskCode=this.code,u(t).then((function(t){var i=Object(M["a"])(t);if(!i)return!1;e.getTask()}))},priColor:function(t){switch(t){case 1:return"#ff9900";case 2:return"#ed3f14";default:return"#a6a6a6"}},showTaskDesc:function(){if(this.task.deleted)return!1;this.showTaskDescriptionEdit=!0,this.initContent(this.task.description)},initContent:function(t){var e=this;t?this.$refs.vueWangeditor.setHtml(t):this.$refs.vueWangeditor.setHtml(""),this.$nextTick((function(){e.checkShowMoreDesc(!1,!0)}))},doContent:function(){var t=this,e=this.$refs.vueWangeditor.getHtml(),i={taskCode:this.code,description:e};u(i).then((function(){t.task.description=e,t.showTaskDescriptionEdit=!1,t.$nextTick((function(){t.checkShowMoreDesc(!1,!0)})),t.getTaskLog()}))},createComment:function(){var t=this,e=this.comment.trim();if(!e)return!1;e+=" ";var i=/(@[^@]+) /g,n=e.match(i);n&&n.forEach((function(e){var i=e.substring(1,e.length-1);-1===t.mentionsList.findIndex((function(t){return t==i}))&&t.mentionsList.push(i)})),p(this.code,this.comment,JSON.stringify(this.mentionsList)).then((function(){t.comment="",t.mentionsList=[],t.getTaskLog()}))},checkShowMoreDesc:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=$(".description-txt");if(e||(t?(this.showMoreDesc=!0,i.css("max-height",(function(){return"100%"}))):(this.showMoreDesc=!1,i.css("max-height",(function(){return"300px"})))),e){var n=i.height();return n>=300?(this.hasMoreDesc=!0,!0):(this.hasMoreDesc=!1,!1)}return!1},createTask:function(){var t=this,e={pcode:this.code,name:this.childTaskName};this.childExecutor&&(e.assign_to=this.childExecutor.code),d(e).then((function(e){var i=Object(M["a"])(e);if(!i)return!1;t.childTaskName="",t.getChildTasks(),t.getTaskLog()}))},getChildTasks:function(){var t=this;l({pcode:this.code,pageSize:100,deleted:0}).then((function(e){var i=[];e.data.list.forEach((function(t){t.visibleChildTaskMemberMenu=!1,i.push(t)})),t.childTaskList=i}))},taskTagChange:function(t){var e=this.task.tags.findIndex((function(e){return e.tag_code==t.code}));-1!==e?this.task.tags.splice(e,1):this.task.tags.push({tag_code:t.code,tag:t})},taskTagUpdate:function(t){var e=this.task.tags.findIndex((function(e){return e.tag_code==t.code}));-1!==e&&(this.task.tags[e].tag=t)},taskTagDelete:function(t){var e=this.task.tags.findIndex((function(e){return e.tag_code==t.code}));-1!==e&&this.task.tags.splice(e,1)},removeTag:function(t,e){var i=this;Object(S["q"])({taskCode:this.task.code,tagCode:t.code}).then((function(){i.task.tags.splice(e,1)}))},doPlainWorkTime:function(){var t=this;this.plainWorkTime.modalStatus=!0,this.$nextTick((function(){t.plainWorkTime.form.setFieldsValue({work_time:t.task.work_time})}))},doWorkTime:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this;this.workTimeDo.modalStatus=!0,t?(this.workTimeDo.info=t,this.$nextTick((function(){e.workTimeDo.form.setFieldsValue({num:t.num,begin_time:moment(t.begin_time),content:t.content})}))):(this.workTimeDo.form.resetFields(),this.workTimeDo.info=null)},deleteWorkTime:function(t,e){var i=this;this.$confirm({title:"删除工时记录",content:"确定要删除工时记录吗？",okText:"确定",okType:"danger",cancelText:"再想想",onOk:function(){return Object(S["f"])({code:t.code}).then((function(n){Object(M["a"])(n)&&(i.workTimeList.splice(e,1),i.workTimeTotal-=t.num)})),Promise.resolve()}})},workTimePlainHandleSubmit:function(){var t=this;this.plainWorkTime.form.validateFields((function(e,i){e||(t.editTask({work_time:i.work_time}),t.plainWorkTime.modalStatus=!1)}))},workTimeHandleSubmit:function(){var t=this;this.workTimeDo.form.validateFields((function(e,i){if(!e){t.workTimeDo.confirmLoading=!0;var n={beginTime:i.begin_time.format("YYYY-MM-DD HH:mm"),num:i.num,content:i.content,taskCode:t.code};t.workTimeDo.info?(n.code=t.workTimeDo.info.code,Object(S["g"])(n).then((function(e){t.workTimeDo.confirmLoading=!1,Object(M["a"])(e)&&(t.workTimeDo.modalStatus=!1,t.getTaskWorkTimeList())}))):Object(S["n"])(n).then((function(e){t.workTimeDo.confirmLoading=!1,Object(M["a"])(e)&&(t.workTimeDo.modalStatus=!1,t.getTaskWorkTimeList())}))}}))},checkLink:function(t){var e=/(http:\/\/|https:\/\/)((\w|=|\?|\.|\/|&|-)+)/g;return e.exec(t)?(t=t.replace(e,"<a target='_blank' href='$1$2'>$1$2</a>"),t):t},updateChildExecutor:function(t){this.visibleChildTaskMemberMenu=!1,this.childExecutor=t},getPopup:function(){return document.getElementById("footer")},getTaskMemberPopup:function(){return document.getElementById("task-detail")},departmentMemberDetail:function(t){var e=this;Object(j["a"])({code:t,organization:this.$store.state.currentOrganization.code}).then((function(t){e.departmentMemberInfo=t.data}))},selectMentionMember:function(t){var e=this;this.showMentions=!1,this.comment+=t.name+" ",this.$nextTick((function(){e.$refs.commentText.focus()}))},changeModalHeight:function(){var t=this.width,e=$(window).width()-100,i=$(window).height()-150,n=$(window).height()-315;"full-screen"===t||void 0!==this.$route.query["full-screen"]?($(".task-detail-modal").css("width",$(window).width()),$(".task-detail").css("width",$(window).width()),$(".ant-modal").css("top",0),i+=85,n+=85,$(".content-left").css("height",i+"px"),$(".log-wrap").css("height",n+"px")):(e>t&&(e=t),$(".task-detail").css("width",e),$(".content-left").css("height",i+"px"),$(".log-wrap").css("height",n+"px"))}}},Y=P,R=(i("e37d"),i("2877")),H=Object(R["a"])(Y,n,a,!1,null,null,null);e["default"]=H.exports},"1a0b":function(t,e,i){(function(e,i){t.exports=i()})(0,(function(){"use strict";var t=function(){"function"!=typeof Object.assign&&(Object.assign=function(t,e){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(t),n=1;n<arguments.length;n++){var a=arguments[n];if(null!=a)for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])}return i}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(t){var e=(this.document||this.ownerDocument).querySelectorAll(t),i=e.length;while(--i>=0&&e.item(i)!==this);return i>-1})};function e(t){var e=void 0;return e=document.createElement("div"),e.innerHTML=t,e.children}function i(t){return!!t&&(t instanceof HTMLCollection||t instanceof NodeList)}function n(t){var e=document.querySelectorAll(t);return i(e)?e:[e]}var a=[];function o(t){if(t){if(t instanceof o)return t;this.selector=t;var a=t.nodeType,s=[];9===a?s=[t]:1===a?s=[t]:i(t)||t instanceof Array?s=t:"string"===typeof t&&(t=t.replace("/\n/mg","").trim(),s=0===t.indexOf("<")?e(t):n(t));var r=s.length;if(!r)return this;var c=void 0;for(c=0;c<r;c++)this[c]=s[c];this.length=r}}function s(t){return new o(t)}o.prototype={constructor:o,forEach:function(t){var e=void 0;for(e=0;e<this.length;e++){var i=this[e],n=t.call(i,i,e);if(!1===n)break}return this},clone:function(t){var e=[];return this.forEach((function(i){e.push(i.cloneNode(!!t))})),s(e)},get:function(t){var e=this.length;return t>=e&&(t%=e),s(this[t])},first:function(){return this.get(0)},last:function(){var t=this.length;return this.get(t-1)},on:function(t,e,i){i||(i=e,e=null);var n=[];return n=t.split(/\s+/),this.forEach((function(t){n.forEach((function(n){n&&(a.push({elem:t,type:n,fn:i}),e?t.addEventListener(n,(function(t){var n=t.target;n.matches(e)&&i.call(n,t)})):t.addEventListener(n,i))}))}))},off:function(t,e){return this.forEach((function(i){i.removeEventListener(t,e)}))},attr:function(t,e){return null==e?this[0].getAttribute(t):this.forEach((function(i){i.setAttribute(t,e)}))},addClass:function(t){return t?this.forEach((function(e){var i=void 0;e.className?(i=e.className.split(/\s/),i=i.filter((function(t){return!!t.trim()})),i.indexOf(t)<0&&i.push(t),e.className=i.join(" ")):e.className=t})):this},removeClass:function(t){return t?this.forEach((function(e){var i=void 0;e.className&&(i=e.className.split(/\s/),i=i.filter((function(e){return e=e.trim(),!(!e||e===t)})),e.className=i.join(" "))})):this},css:function(t,e){var i=t+":"+e+";";return this.forEach((function(e){var n=(e.getAttribute("style")||"").trim(),a=void 0,o=[];n?(a=n.split(";"),a.forEach((function(t){var e=t.split(":").map((function(t){return t.trim()}));2===e.length&&o.push(e[0]+":"+e[1])})),o=o.map((function(e){return 0===e.indexOf(t)?i:e})),o.indexOf(i)<0&&o.push(i),e.setAttribute("style",o.join("; "))):e.setAttribute("style",i)}))},show:function(){return this.css("display","block")},hide:function(){return this.css("display","none")},children:function(){var t=this[0];return t?s(t.children):null},childNodes:function(){var t=this[0];return t?s(t.childNodes):null},append:function(t){return this.forEach((function(e){t.forEach((function(t){e.appendChild(t)}))}))},remove:function(){return this.forEach((function(t){if(t.remove)t.remove();else{var e=t.parentElement;e&&e.removeChild(t)}}))},isContain:function(t){var e=this[0],i=t[0];return e.contains(i)},getSizeData:function(){var t=this[0];return t.getBoundingClientRect()},getNodeName:function(){var t=this[0];return t.nodeName},find:function(t){var e=this[0];return s(e.querySelectorAll(t))},text:function(t){if(t)return this.forEach((function(e){e.innerHTML=t}));var e=this[0];return e.innerHTML.replace(/<.*?>/g,(function(){return""}))},html:function(t){var e=this[0];return null==t?e.innerHTML:(e.innerHTML=t,this)},val:function(){var t=this[0];return t.value.trim()},focus:function(){return this.forEach((function(t){t.focus()}))},parent:function(){var t=this[0];return s(t.parentElement)},parentUntil:function(t,e){var i=document.querySelectorAll(t),n=i.length;if(!n)return null;var a=e||this[0];if("BODY"===a.nodeName)return null;var o=a.parentElement,r=void 0;for(r=0;r<n;r++)if(o===i[r])return s(o);return this.parentUntil(t,o)},equal:function(t){return 1===t.nodeType?this[0]===t:this[0]===t[0]},insertBefore:function(t){var e=s(t),i=e[0];return i?this.forEach((function(t){var e=i.parentNode;e.insertBefore(t,i)})):this},insertAfter:function(t){var e=s(t),i=e[0];return i?this.forEach((function(t){var e=i.parentNode;e.lastChild===i?e.appendChild(t):e.insertBefore(t,i.nextSibling)})):this}},s.offAll=function(){a.forEach((function(t){var e=t.elem,i=t.type,n=t.fn;e.removeEventListener(i,n)}))};var r={menus:["head","bold","fontSize","fontName","italic","underline","strikeThrough","foreColor","backColor","link","list","justify","quote","emoticon","image","table","video","code","undo","redo"],fontNames:["宋体","微软雅黑","Arial","Tahoma","Verdana"],colors:["#000000","#eeece0","#1c487f","#4d80bf","#c24f4a","#8baa4a","#7b5ba1","#46acc8","#f9963b","#ffffff"],emotions:[{title:"默认",type:"image",content:[{alt:"[坏笑]",src:"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/50/pcmoren_huaixiao_org.png"},{alt:"[舔屏]",src:"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/40/pcmoren_tian_org.png"},{alt:"[污]",src:"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/3c/pcmoren_wu_org.png"}]},{title:"新浪",type:"image",content:[{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/7a/shenshou_thumb.gif",alt:"[草泥马]"},{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/60/horse2_thumb.gif",alt:"[神马]"},{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/bc/fuyun_thumb.gif",alt:"[浮云]"}]},{title:"emoji",type:"emoji",content:"😀 😃 😄 😁 😆 😅 😂 😊 😇 🙂 🙃 😉 😓 😪 😴 🙄 🤔 😬 🤐".split(/\s/)}],zIndex:1e4,debug:!1,linkCheck:function(t,e){return!0},linkImgCheck:function(t){return!0},pasteFilterStyle:!0,pasteIgnoreImg:!1,pasteTextHandle:function(t){return t},showLinkImg:!0,linkImgCallback:function(t){},uploadImgMaxSize:5242880,uploadImgShowBase64:!1,uploadFileName:"",uploadImgParams:{},uploadImgHeaders:{},withCredentials:!1,uploadImgTimeout:1e4,uploadImgHooks:{before:function(t,e,i){},success:function(t,e,i){},fail:function(t,e,i){},error:function(t,e){},timeout:function(t,e){}},qiniu:!1},c={_ua:navigator.userAgent,isWebkit:function(){var t=/webkit/i;return t.test(this._ua)},isIE:function(){return"ActiveXObject"in window}};function l(t,e){var i=void 0,n=void 0;for(i in t)if(t.hasOwnProperty(i)&&(n=e.call(t,i,t[i]),!1===n))break}function d(t,e){var i=void 0,n=void 0,a=void 0,o=t.length||0;for(i=0;i<o;i++)if(n=t[i],a=e.call(t,n,i),!1===a)break}function u(t){return t+Math.random().toString().slice(2)}function m(t){return null==t?"":t.replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;").replace(/(\r\n|\r|\n)/g,"<br/>")}function h(t){return"function"===typeof t}function p(t){this.editor=t,this.$elem=s('<div class="w-e-menu">\n            <i class="w-e-icon-bold"></i>\n        </div>'),this.type="click",this._active=!1}p.prototype={constructor:p,onClick:function(t){var e=this.editor,i=e.selection.isSelectionEmpty();i&&e.selection.createEmptyRange(),e.cmd.do("bold"),i&&(e.selection.collapseRange(),e.selection.restoreSelection())},tryChangeActive:function(t){var e=this.editor,i=this.$elem;e.cmd.queryCommandState("bold")?(this._active=!0,i.addClass("w-e-active")):(this._active=!1,i.removeClass("w-e-active"))}};var A=function(t,e){var i=t.config.langArgs||[],n=e;return i.forEach((function(t){var e=t.reg,i=t.val;e.test(n)&&(n=n.replace(e,(function(){return i})))})),n},f=function(){};function v(t,e){var i=this,n=t.editor;this.menu=t,this.opt=e;var a=s('<div class="w-e-droplist"></div>'),o=e.$title,r=void 0;o&&(r=o.html(),r=A(n,r),o.html(r),o.addClass("w-e-dp-title"),a.append(o));var c=e.list||[],l=e.type||"list",d=e.onClick||f,u=s('<ul class="'+("list"===l?"w-e-list":"w-e-block")+'"></ul>');a.append(u),c.forEach((function(t){var e=t.$elem,a=e.html();a=A(n,a),e.html(a);var o=t.value,r=s('<li class="w-e-item"></li>');e&&(r.append(e),u.append(r),r.on("click",(function(t){d(o),i.hideTimeoutId=setTimeout((function(){i.hide()}),0)})))})),a.on("mouseleave",(function(t){i.hideTimeoutId=setTimeout((function(){i.hide()}),0)})),this.$container=a,this._rendered=!1,this._show=!1}function g(t){var e=this;this.editor=t,this.$elem=s('<div class="w-e-menu"><i class="w-e-icon-header"></i></div>'),this.type="droplist",this._active=!1,this.droplist=new v(this,{width:100,$title:s("<p>设置标题</p>"),type:"list",list:[{$elem:s("<h1>H1</h1>"),value:"<h1>"},{$elem:s("<h2>H2</h2>"),value:"<h2>"},{$elem:s("<h3>H3</h3>"),value:"<h3>"},{$elem:s("<h4>H4</h4>"),value:"<h4>"},{$elem:s("<h5>H5</h5>"),value:"<h5>"},{$elem:s("<p>正文</p>"),value:"<p>"}],onClick:function(t){e._command(t)}})}function k(t){var e=this;this.editor=t,this.$elem=s('<div class="w-e-menu"><i class="w-e-icon-text-heigh"></i></div>'),this.type="droplist",this._active=!1,this.droplist=new v(this,{width:160,$title:s("<p>字号</p>"),type:"list",list:[{$elem:s('<span style="font-size: x-small;">x-small</span>'),value:"1"},{$elem:s('<span style="font-size: small;">small</span>'),value:"2"},{$elem:s("<span>normal</span>"),value:"3"},{$elem:s('<span style="font-size: large;">large</span>'),value:"4"},{$elem:s('<span style="font-size: x-large;">x-large</span>'),value:"5"},{$elem:s('<span style="font-size: xx-large;">xx-large</span>'),value:"6"}],onClick:function(t){e._command(t)}})}function w(t){var e=this;this.editor=t,this.$elem=s('<div class="w-e-menu"><i class="w-e-icon-font"></i></div>'),this.type="droplist",this._active=!1;var i=t.config,n=i.fontNames||[];this.droplist=new v(this,{width:100,$title:s("<p>字体</p>"),type:"list",list:n.map((function(t){return{$elem:s('<span style="font-family: '+t+';">'+t+"</span>"),value:t}})),onClick:function(t){e._command(t)}})}v.prototype={constructor:v,show:function(){this.hideTimeoutId&&clearTimeout(this.hideTimeoutId);var t=this.menu,e=t.$elem,i=this.$container;if(!this._show){if(this._rendered)i.show();else{var n=e.getSizeData().height||0,a=this.opt.width||100;i.css("margin-top",n+"px").css("width",a+"px"),e.append(i),this._rendered=!0}this._show=!0}},hide:function(){this.showTimeoutId&&clearTimeout(this.showTimeoutId);var t=this.$container;this._show&&(t.hide(),this._show=!1)}},g.prototype={constructor:g,_command:function(t){var e=this.editor,i=e.selection.getSelectionContainerElem();e.$textElem.equal(i)||e.cmd.do("formatBlock",t)},tryChangeActive:function(t){var e=this.editor,i=this.$elem,n=/^h/i,a=e.cmd.queryCommandValue("formatBlock");n.test(a)?(this._active=!0,i.addClass("w-e-active")):(this._active=!1,i.removeClass("w-e-active"))}},k.prototype={constructor:k,_command:function(t){var e=this.editor;e.cmd.do("fontSize",t)}},w.prototype={constructor:w,_command:function(t){var e=this.editor;e.cmd.do("fontName",t)}};var b=function(){},C=[];function y(t,e){this.menu=t,this.opt=e}function x(t){this.editor=t,this.$elem=s('<div class="w-e-menu"><i class="w-e-icon-link"></i></div>'),this.type="panel",this._active=!1}function _(t){this.editor=t,this.$elem=s('<div class="w-e-menu">\n            <i class="w-e-icon-italic"></i>\n        </div>'),this.type="click",this._active=!1}function T(t){this.editor=t,this.$elem=s('<div class="w-e-menu">\n            <i class="w-e-icon-redo"></i>\n        </div>'),this.type="click",this._active=!1}function E(t){this.editor=t,this.$elem=s('<div class="w-e-menu">\n            <i class="w-e-icon-strikethrough"></i>\n        </div>'),this.type="click",this._active=!1}function M(t){this.editor=t,this.$elem=s('<div class="w-e-menu">\n            <i class="w-e-icon-underline"></i>\n        </div>'),this.type="click",this._active=!1}function B(t){this.editor=t,this.$elem=s('<div class="w-e-menu">\n            <i class="w-e-icon-undo"></i>\n        </div>'),this.type="click",this._active=!1}function I(t){var e=this;this.editor=t,this.$elem=s('<div class="w-e-menu"><i class="w-e-icon-list2"></i></div>'),this.type="droplist",this._active=!1,this.droplist=new v(this,{width:120,$title:s("<p>设置列表</p>"),type:"list",list:[{$elem:s('<span><i class="w-e-icon-list-numbered"></i> 有序列表</span>'),value:"insertOrderedList"},{$elem:s('<span><i class="w-e-icon-list2"></i> 无序列表</span>'),value:"insertUnorderedList"}],onClick:function(t){e._command(t)}})}function S(t){var e=this;this.editor=t,this.$elem=s('<div class="w-e-menu"><i class="w-e-icon-paragraph-left"></i></div>'),this.type="droplist",this._active=!1,this.droplist=new v(this,{width:100,$title:s("<p>对齐方式</p>"),type:"list",list:[{$elem:s('<span><i class="w-e-icon-paragraph-left"></i> 靠左</span>'),value:"justifyLeft"},{$elem:s('<span><i class="w-e-icon-paragraph-center"></i> 居中</span>'),value:"justifyCenter"},{$elem:s('<span><i class="w-e-icon-paragraph-right"></i> 靠右</span>'),value:"justifyRight"}],onClick:function(t){e._command(t)}})}function D(t){var e=this;this.editor=t,this.$elem=s('<div class="w-e-menu"><i class="w-e-icon-pencil2"></i></div>'),this.type="droplist";var i=t.config,n=i.colors||[];this._active=!1,this.droplist=new v(this,{width:120,$title:s("<p>文字颜色</p>"),type:"inline-block",list:n.map((function(t){return{$elem:s('<i style="color:'+t+';" class="w-e-icon-pencil2"></i>'),value:t}})),onClick:function(t){e._command(t)}})}function j(t){var e=this;this.editor=t,this.$elem=s('<div class="w-e-menu"><i class="w-e-icon-paint-brush"></i></div>'),this.type="droplist";var i=t.config,n=i.colors||[];this._active=!1,this.droplist=new v(this,{width:120,$title:s("<p>背景色</p>"),type:"inline-block",list:n.map((function(t){return{$elem:s('<i style="color:'+t+';" class="w-e-icon-paint-brush"></i>'),value:t}})),onClick:function(t){e._command(t)}})}function N(t){this.editor=t,this.$elem=s('<div class="w-e-menu">\n            <i class="w-e-icon-quotes-left"></i>\n        </div>'),this.type="click",this._active=!1}function L(t){this.editor=t,this.$elem=s('<div class="w-e-menu">\n            <i class="w-e-icon-terminal"></i>\n        </div>'),this.type="panel",this._active=!1}function Q(t){this.editor=t,this.$elem=s('<div class="w-e-menu">\n            <i class="w-e-icon-happy"></i>\n        </div>'),this.type="panel",this._active=!1}function F(t){this.editor=t,this.$elem=s('<div class="w-e-menu"><i class="w-e-icon-table2"></i></div>'),this.type="panel",this._active=!1}function z(t){this.editor=t,this.$elem=s('<div class="w-e-menu"><i class="w-e-icon-play"></i></div>'),this.type="panel",this._active=!1}function O(t){this.editor=t;var e=u("w-e-img");this.$elem=s('<div class="w-e-menu" id="'+e+'"><i class="w-e-icon-image"></i></div>'),t.imgMenuId=e,this.type="panel",this._active=!1}y.prototype={constructor:y,show:function(){var t=this,e=this.menu;if(!(C.indexOf(e)>=0)){var i=e.editor,n=s("body"),a=i.$textContainerElem,o=this.opt,r=s('<div class="w-e-panel-container"></div>'),c=o.width||300;r.css("width",c+"px").css("margin-left",(0-c)/2+"px");var l=s('<i class="w-e-icon-close w-e-panel-close"></i>');r.append(l),l.on("click",(function(){t.hide()}));var d=s('<ul class="w-e-panel-tab-title"></ul>'),u=s('<div class="w-e-panel-tab-content"></div>');r.append(d).append(u);var m=o.height;m&&u.css("height",m+"px").css("overflow-y","auto");var h=o.tabs||[],p=[],f=[];h.forEach((function(t,e){if(t){var n=t.title||"",a=t.tpl||"";n=A(i,n),a=A(i,a);var o=s('<li class="w-e-item">'+n+"</li>");d.append(o);var r=s(a);u.append(r),o._index=e,p.push(o),f.push(r),0===e?(o._active=!0,o.addClass("w-e-active")):r.hide(),o.on("click",(function(t){o._active||(p.forEach((function(t){t._active=!1,t.removeClass("w-e-active")})),f.forEach((function(t){t.hide()})),o._active=!0,o.addClass("w-e-active"),r.show())}))}})),r.on("click",(function(t){t.stopPropagation()})),n.on("click",(function(e){t.hide()})),a.append(r),h.forEach((function(e,i){if(e){var n=e.events||[];n.forEach((function(e){var n=e.selector,a=e.type,o=e.fn||b,s=f[i];s.find(n).on(a,(function(e){e.stopPropagation();var i=o(e);i&&t.hide()}))}))}}));var v=r.find("input[type=text],textarea");v.length&&v.get(0).focus(),this.$container=r,this._hideOtherPanels(),C.push(e)}},hide:function(){var t=this.menu,e=this.$container;e&&e.remove(),C=C.filter((function(e){return e!==t}))},_hideOtherPanels:function(){C.length&&C.forEach((function(t){var e=t.panel||{};e.hide&&e.hide()}))}},x.prototype={constructor:x,onClick:function(t){var e=this.editor,i=void 0;if(this._active){if(i=e.selection.getSelectionContainerElem(),!i)return;e.selection.createRangeByElem(i),e.selection.restoreSelection(),this._createPanel(i.text(),i.attr("href"))}else e.selection.isSelectionEmpty()?this._createPanel("",""):this._createPanel(e.selection.getSelectionText(),"")},_createPanel:function(t,e){var i=this,n=u("input-link"),a=u("input-text"),o=u("btn-ok"),r=u("btn-del"),c=this._active?"inline-block":"none",l=new y(this,{width:300,tabs:[{title:"链接",tpl:'<div>\n                            <input id="'+a+'" type="text" class="block" value="'+t+'" placeholder="链接文字"/></td>\n                            <input id="'+n+'" type="text" class="block" value="'+e+'" placeholder="http://..."/></td>\n                            <div class="w-e-button-container">\n                                <button id="'+o+'" class="right">插入</button>\n                                <button id="'+r+'" class="gray right" style="display:'+c+'">删除链接</button>\n                            </div>\n                        </div>',events:[{selector:"#"+o,type:"click",fn:function(){var t=s("#"+n),e=s("#"+a),o=t.val(),r=e.val();return i._insertLink(r,o),!0}},{selector:"#"+r,type:"click",fn:function(){return i._delLink(),!0}}]}]});l.show(),this.panel=l},_delLink:function(){if(this._active){var t=this.editor,e=t.selection.getSelectionContainerElem();if(e){var i=t.selection.getSelectionText();t.cmd.do("insertHTML","<span>"+i+"</span>")}}},_insertLink:function(t,e){var i=this.editor,n=i.config,a=n.linkCheck,o=!0;a&&"function"===typeof a&&(o=a(t,e)),!0===o?i.cmd.do("insertHTML",'<a href="'+e+'" target="_blank">'+t+"</a>"):alert(o)},tryChangeActive:function(t){var e=this.editor,i=this.$elem,n=e.selection.getSelectionContainerElem();n&&("A"===n.getNodeName()?(this._active=!0,i.addClass("w-e-active")):(this._active=!1,i.removeClass("w-e-active")))}},_.prototype={constructor:_,onClick:function(t){var e=this.editor,i=e.selection.isSelectionEmpty();i&&e.selection.createEmptyRange(),e.cmd.do("italic"),i&&(e.selection.collapseRange(),e.selection.restoreSelection())},tryChangeActive:function(t){var e=this.editor,i=this.$elem;e.cmd.queryCommandState("italic")?(this._active=!0,i.addClass("w-e-active")):(this._active=!1,i.removeClass("w-e-active"))}},T.prototype={constructor:T,onClick:function(t){var e=this.editor;e.cmd.do("redo")}},E.prototype={constructor:E,onClick:function(t){var e=this.editor,i=e.selection.isSelectionEmpty();i&&e.selection.createEmptyRange(),e.cmd.do("strikeThrough"),i&&(e.selection.collapseRange(),e.selection.restoreSelection())},tryChangeActive:function(t){var e=this.editor,i=this.$elem;e.cmd.queryCommandState("strikeThrough")?(this._active=!0,i.addClass("w-e-active")):(this._active=!1,i.removeClass("w-e-active"))}},M.prototype={constructor:M,onClick:function(t){var e=this.editor,i=e.selection.isSelectionEmpty();i&&e.selection.createEmptyRange(),e.cmd.do("underline"),i&&(e.selection.collapseRange(),e.selection.restoreSelection())},tryChangeActive:function(t){var e=this.editor,i=this.$elem;e.cmd.queryCommandState("underline")?(this._active=!0,i.addClass("w-e-active")):(this._active=!1,i.removeClass("w-e-active"))}},B.prototype={constructor:B,onClick:function(t){var e=this.editor;e.cmd.do("undo")}},I.prototype={constructor:I,_command:function(t){var e=this.editor,i=e.$textElem;if(e.selection.restoreSelection(),!e.cmd.queryCommandState(t)){e.cmd.do(t);var n=e.selection.getSelectionContainerElem();if("LI"===n.getNodeName()&&(n=n.parent()),!1!==/^ol|ul$/i.test(n.getNodeName())&&!n.equal(i)){var a=n.parent();a.equal(i)||(n.insertAfter(a),a.remove())}}},tryChangeActive:function(t){var e=this.editor,i=this.$elem;e.cmd.queryCommandState("insertUnOrderedList")||e.cmd.queryCommandState("insertOrderedList")?(this._active=!0,i.addClass("w-e-active")):(this._active=!1,i.removeClass("w-e-active"))}},S.prototype={constructor:S,_command:function(t){var e=this.editor;e.cmd.do(t)}},D.prototype={constructor:D,_command:function(t){var e=this.editor;e.cmd.do("foreColor",t)}},j.prototype={constructor:j,_command:function(t){var e=this.editor;e.cmd.do("backColor",t)}},N.prototype={constructor:N,onClick:function(t){var e=this.editor,i=e.selection.getSelectionContainerElem(),n=i.getNodeName();if(c.isIE()){var a=void 0,o=void 0;if("P"===n)return a=i.text(),o=s("<blockquote>"+a+"</blockquote>"),o.insertAfter(i),void i.remove();"BLOCKQUOTE"===n&&(a=i.text(),o=s("<p>"+a+"</p>"),o.insertAfter(i),i.remove())}else"BLOCKQUOTE"===n?e.cmd.do("formatBlock","<P>"):e.cmd.do("formatBlock","<BLOCKQUOTE>")},tryChangeActive:function(t){var e=this.editor,i=this.$elem,n=/^BLOCKQUOTE$/i,a=e.cmd.queryCommandValue("formatBlock");n.test(a)?(this._active=!0,i.addClass("w-e-active")):(this._active=!1,i.removeClass("w-e-active"))}},L.prototype={constructor:L,onClick:function(t){var e=this.editor,i=e.selection.getSelectionStartElem(),n=e.selection.getSelectionEndElem(),a=e.selection.isSelectionEmpty(),o=e.selection.getSelectionText(),r=void 0;if(i.equal(n))return a?void(this._active?this._createPanel(i.html()):this._createPanel()):(r=s("<code>"+o+"</code>"),e.cmd.do("insertElem",r),e.selection.createRangeByElem(r,!1),void e.selection.restoreSelection());e.selection.restoreSelection()},_createPanel:function(t){var e=this;t=t||"";var i=t?"edit":"new",n=u("texxt"),a=u("btn"),o=new y(this,{width:500,tabs:[{title:"插入代码",tpl:'<div>\n                        <textarea id="'+n+'" style="height:145px;;">'+t+'</textarea>\n                        <div class="w-e-button-container">\n                            <button id="'+a+'" class="right">插入</button>\n                        </div>\n                    <div>',events:[{selector:"#"+a,type:"click",fn:function(){var t=s("#"+n),a=t.val()||t.html();return a=m(a),"new"===i?e._insertCode(a):e._updateCode(a),!0}}]}]});o.show(),this.panel=o},_insertCode:function(t){var e=this.editor;e.cmd.do("insertHTML","<pre><code>"+t+"</code></pre><p><br></p>")},_updateCode:function(t){var e=this.editor,i=e.selection.getSelectionContainerElem();i&&(i.html(t),e.selection.restoreSelection())},tryChangeActive:function(t){var e=this.editor,i=this.$elem,n=e.selection.getSelectionContainerElem();if(n){var a=n.parent();"CODE"===n.getNodeName()&&"PRE"===a.getNodeName()?(this._active=!0,i.addClass("w-e-active")):(this._active=!1,i.removeClass("w-e-active"))}}},Q.prototype={constructor:Q,onClick:function(){this._createPanel()},_createPanel:function(){var t=this,e=this.editor,i=e.config,n=i.emotions||[],a=[];n.forEach((function(e){var i=e.type,n=e.content||[],o="";"emoji"===i&&n.forEach((function(t){t&&(o+='<span class="w-e-item">'+t+"</span>")})),"image"===i&&n.forEach((function(t){var e=t.src,i=t.alt;e&&(o+='<span class="w-e-item"><img src="'+e+'" alt="'+i+'" data-w-e="1"/></span>')})),a.push({title:e.title,tpl:'<div class="w-e-emoticon-container">'+o+"</div>",events:[{selector:"span.w-e-item",type:"click",fn:function(e){var i=e.target,n=s(i),a=n.getNodeName(),o=void 0;return o="IMG"===a?n.parent().html():"<span>"+n.html()+"</span>",t._insert(o),!0}}]})}));var o=new y(this,{width:300,height:200,tabs:a});o.show(),this.panel=o},_insert:function(t){var e=this.editor;e.cmd.do("insertHTML",t)}},F.prototype={constructor:F,onClick:function(){this._active?this._createEditPanel():this._createInsertPanel()},_createInsertPanel:function(){var t=this,e=u("btn"),i=u("row"),n=u("col"),a=new y(this,{width:250,tabs:[{title:"插入表格",tpl:'<div>\n                        <p style="text-align:left; padding:5px 0;">\n                            创建\n                            <input id="'+i+'" type="text" value="5" style="width:40px;text-align:center;"/>\n                            行\n                            <input id="'+n+'" type="text" value="5" style="width:40px;text-align:center;"/>\n                            列的表格\n                        </p>\n                        <div class="w-e-button-container">\n                            <button id="'+e+'" class="right">插入</button>\n                        </div>\n                    </div>',events:[{selector:"#"+e,type:"click",fn:function(){var e=parseInt(s("#"+i).val()),a=parseInt(s("#"+n).val());return e&&a&&e>0&&a>0&&t._insert(e,a),!0}}]}]});a.show(),this.panel=a},_insert:function(t,e){var i=void 0,n=void 0,a='<table border="0" width="100%" cellpadding="0" cellspacing="0">';for(i=0;i<t;i++){if(a+="<tr>",0===i)for(n=0;n<e;n++)a+="<th>&nbsp;</th>";else for(n=0;n<e;n++)a+="<td>&nbsp;</td>";a+="</tr>"}a+="</table><p><br></p>";var o=this.editor;o.cmd.do("insertHTML",a),o.cmd.do("enableObjectResizing",!1),o.cmd.do("enableInlineTableEditing",!1)},_createEditPanel:function(){var t=this,e=u("add-row"),i=u("add-col"),n=u("del-row"),a=u("del-col"),o=u("del-table"),s=new y(this,{width:320,tabs:[{title:"编辑表格",tpl:'<div>\n                        <div class="w-e-button-container" style="border-bottom:1px solid #f1f1f1;padding-bottom:5px;margin-bottom:5px;">\n                            <button id="'+e+'" class="left">增加行</button>\n                            <button id="'+n+'" class="red left">删除行</button>\n                            <button id="'+i+'" class="left">增加列</button>\n                            <button id="'+a+'" class="red left">删除列</button>\n                        </div>\n                        <div class="w-e-button-container">\n                            <button id="'+o+'" class="gray left">删除表格</button>\n                        </dv>\n                    </div>',events:[{selector:"#"+e,type:"click",fn:function(){return t._addRow(),!0}},{selector:"#"+i,type:"click",fn:function(){return t._addCol(),!0}},{selector:"#"+n,type:"click",fn:function(){return t._delRow(),!0}},{selector:"#"+a,type:"click",fn:function(){return t._delCol(),!0}},{selector:"#"+o,type:"click",fn:function(){return t._delTable(),!0}}]}]});s.show()},_getLocationData:function(){var t={},e=this.editor,i=e.selection.getSelectionContainerElem();if(i){var n=i.getNodeName();if("TD"===n||"TH"===n){var a=i.parent(),o=a.children(),s=o.length;o.forEach((function(e,n){if(e===i[0])return t.td={index:n,elem:e,length:s},!1}));var r=a.parent(),c=r.children(),l=c.length;return c.forEach((function(e,i){if(e===a[0])return t.tr={index:i,elem:e,length:l},!1})),t}}},_addRow:function(){var t=this._getLocationData();if(t){var e=t.tr,i=s(e.elem),n=t.td,a=n.length,o=document.createElement("tr"),r="",c=void 0;for(c=0;c<a;c++)r+="<td>&nbsp;</td>";o.innerHTML=r,s(o).insertAfter(i)}},_addCol:function(){var t=this._getLocationData();if(t){var e=t.tr,i=t.td,n=i.index,a=s(e.elem),o=a.parent(),r=o.children();r.forEach((function(t){var e=s(t),i=e.children(),a=i.get(n),o=a.getNodeName().toLowerCase(),r=document.createElement(o);s(r).insertAfter(a)}))}},_delRow:function(){var t=this._getLocationData();if(t){var e=t.tr,i=s(e.elem);i.remove()}},_delCol:function(){var t=this._getLocationData();if(t){var e=t.tr,i=t.td,n=i.index,a=s(e.elem),o=a.parent(),r=o.children();r.forEach((function(t){var e=s(t),i=e.children(),a=i.get(n);a.remove()}))}},_delTable:function(){var t=this.editor,e=t.selection.getSelectionContainerElem();if(e){var i=e.parentUntil("table");i&&i.remove()}},tryChangeActive:function(t){var e=this.editor,i=this.$elem,n=e.selection.getSelectionContainerElem();if(n){var a=n.getNodeName();"TD"===a||"TH"===a?(this._active=!0,i.addClass("w-e-active")):(this._active=!1,i.removeClass("w-e-active"))}}},z.prototype={constructor:z,onClick:function(){this._createPanel()},_createPanel:function(){var t=this,e=u("text-val"),i=u("btn"),n=new y(this,{width:350,tabs:[{title:"插入视频",tpl:'<div>\n                        <input id="'+e+'" type="text" class="block" placeholder="格式如：<iframe src=... ></iframe>"/>\n                        <div class="w-e-button-container">\n                            <button id="'+i+'" class="right">插入</button>\n                        </div>\n                    </div>',events:[{selector:"#"+i,type:"click",fn:function(){var i=s("#"+e),n=i.val().trim();return n&&t._insert(n),!0}}]}]});n.show(),this.panel=n},_insert:function(t){var e=this.editor;e.cmd.do("insertHTML",t+"<p><br></p>")}},O.prototype={constructor:O,onClick:function(){var t=this.editor,e=t.config;e.qiniu||(this._active?this._createEditPanel():this._createInsertPanel())},_createEditPanel:function(){var t=this.editor,e=u("width-30"),i=u("width-50"),n=u("width-100"),a=u("del-btn"),o=[{title:"编辑图片",tpl:'<div>\n                    <div class="w-e-button-container" style="border-bottom:1px solid #f1f1f1;padding-bottom:5px;margin-bottom:5px;">\n                        <span style="float:left;font-size:14px;margin:4px 5px 0 5px;color:#333;">最大宽度：</span>\n                        <button id="'+e+'" class="left">30%</button>\n                        <button id="'+i+'" class="left">50%</button>\n                        <button id="'+n+'" class="left">100%</button>\n                    </div>\n                    <div class="w-e-button-container">\n                        <button id="'+a+'" class="gray left">删除图片</button>\n                    </dv>\n                </div>',events:[{selector:"#"+e,type:"click",fn:function(){var e=t._selectedImg;return e&&e.css("max-width","30%"),!0}},{selector:"#"+i,type:"click",fn:function(){var e=t._selectedImg;return e&&e.css("max-width","50%"),!0}},{selector:"#"+n,type:"click",fn:function(){var e=t._selectedImg;return e&&e.css("max-width","100%"),!0}},{selector:"#"+a,type:"click",fn:function(){var e=t._selectedImg;return e&&e.remove(),!0}}]}],s=new y(this,{width:300,tabs:o});s.show(),this.panel=s},_createInsertPanel:function(){var t=this.editor,e=t.uploadImg,i=t.config,n=u("up-trigger"),a=u("up-file"),o=u("link-url"),r=u("link-btn"),c=[{title:"上传图片",tpl:'<div class="w-e-up-img-container">\n                    <div id="'+n+'" class="w-e-up-btn">\n                        <i class="w-e-icon-upload2"></i>\n                    </div>\n                    <div style="display:none;">\n                        <input id="'+a+'" type="file" multiple="multiple" accept="image/jpg,image/jpeg,image/png,image/gif,image/bmp"/>\n                    </div>\n                </div>',events:[{selector:"#"+n,type:"click",fn:function(){var t=s("#"+a),e=t[0];if(!e)return!0;e.click()}},{selector:"#"+a,type:"change",fn:function(){var t=s("#"+a),i=t[0];if(!i)return!0;var n=i.files;return n.length&&e.uploadImg(n),!0}}]},{title:"网络图片",tpl:'<div>\n                    <input id="'+o+'" type="text" class="block" placeholder="图片链接"/></td>\n                    <div class="w-e-button-container">\n                        <button id="'+r+'" class="right">插入</button>\n                    </div>\n                </div>',events:[{selector:"#"+r,type:"click",fn:function(){var t=s("#"+o),i=t.val().trim();return i&&e.insertLinkImg(i),!0}}]}],l=[];(i.uploadImgShowBase64||i.uploadImgServer||i.customUploadImg)&&window.FileReader&&l.push(c[0]),i.showLinkImg&&l.push(c[1]);var d=new y(this,{width:300,tabs:l});d.show(),this.panel=d},tryChangeActive:function(t){var e=this.editor,i=this.$elem;e._selectedImg?(this._active=!0,i.addClass("w-e-active")):(this._active=!1,i.removeClass("w-e-active"))}};var P={};function Y(t){this.editor=t,this.menus={}}function R(t){var e=t.clipboardData||t.originalEvent&&t.originalEvent.clipboardData,i=void 0;return i=null==e?window.clipboardData&&window.clipboardData.getData("text"):e.getData("text/plain"),m(i)}function H(t,e,i){var n=t.clipboardData||t.originalEvent&&t.originalEvent.clipboardData,a=void 0,o=void 0;if(null==n?a=window.clipboardData&&window.clipboardData.getData("text"):(a=n.getData("text/plain"),o=n.getData("text/html")),!o&&a&&(o="<p>"+m(a)+"</p>"),o){var s=o.split("</html>");return 2===s.length&&(o=s[0]),o=o.replace(/<(meta|script|link).+?>/gim,""),o=o.replace(/<!--.*?-->/gm,""),o=o.replace(/\s?data-.+?=('|").+?('|")/gim,""),i&&(o=o.replace(/<img.+?>/gim,"")),o=e?o.replace(/\s?(class|style)=('|").*?('|")/gim,""):o.replace(/\s?class=('|").*?('|")/gim,""),o}}function U(t){var e=[],i=R(t);if(i)return e;var n=t.clipboardData||t.originalEvent&&t.originalEvent.clipboardData||{},a=n.items;return a?(l(a,(function(t,i){var n=i.type;/image/i.test(n)&&e.push(i.getAsFile())})),e):e}function $(t){var e=[],i=t.childNodes()||[];return i.forEach((function(t){var i=void 0,n=t.nodeType;if(3===n&&(i=t.textContent,i=m(i)),1===n){i={},i.tag=t.nodeName.toLowerCase();for(var a=[],o=t.attributes||{},r=o.length||0,c=0;c<r;c++){var l=o[c];a.push({name:l.name,value:l.value})}i.attrs=a,i.children=$(s(t))}e.push(i)})),e}function J(t){this.editor=t}function G(t){this.editor=t}function V(t){this.editor=t,this._currentRange=null}function W(t){this.editor=t,this._time=0,this._isShow=!1,this._isRender=!1,this._timeoutId=0,this.$textContainer=t.$textContainerElem,this.$bar=s('<div class="w-e-progress"></div>')}P.bold=p,P.head=g,P.fontSize=k,P.fontName=w,P.link=x,P.italic=_,P.redo=T,P.strikeThrough=E,P.underline=M,P.undo=B,P.list=I,P.justify=S,P.foreColor=D,P.backColor=j,P.quote=N,P.code=L,P.emoticon=Q,P.table=F,P.video=z,P.image=O,Y.prototype={constructor:Y,init:function(){var t=this,e=this.editor,i=e.config||{},n=i.menus||[];n.forEach((function(i){var n=P[i];n&&"function"===typeof n&&(t.menus[i]=new n(e))})),this._addToToolbar(),this._bindEvent()},_addToToolbar:function(){var t=this.editor,e=t.$toolbarElem,i=this.menus,n=t.config,a=n.zIndex+1;l(i,(function(t,i){var n=i.$elem;n&&(n.css("z-index",a),e.append(n))}))},_bindEvent:function(){var t=this.menus,e=this.editor;l(t,(function(t,i){var n=i.type;if(n){var a=i.$elem,o=i.droplist;i.panel;"click"===n&&i.onClick&&a.on("click",(function(t){null!=e.selection.getRange()&&i.onClick(t)})),"droplist"===n&&o&&a.on("mouseenter",(function(t){null!=e.selection.getRange()&&(o.showTimeoutId=setTimeout((function(){o.show()}),200))})).on("mouseleave",(function(t){o.hideTimeoutId=setTimeout((function(){o.hide()}),0)})),"panel"===n&&i.onClick&&a.on("click",(function(t){t.stopPropagation(),null!=e.selection.getRange()&&i.onClick(t)}))}}))},changeActive:function(){var t=this.menus;l(t,(function(t,e){e.tryChangeActive&&setTimeout((function(){e.tryChangeActive()}),100)}))}},J.prototype={constructor:J,init:function(){this._bindEvent()},clear:function(){this.html("<p><br></p>")},html:function(t){var e=this.editor,i=e.$textElem,n=void 0;if(null==t)return n=i.html(),n=n.replace(/\u200b/gm,""),n;i.html(t),e.initSelection()},getJSON:function(){var t=this.editor,e=t.$textElem;return $(e)},text:function(t){var e=this.editor,i=e.$textElem,n=void 0;if(null==t)return n=i.text(),n=n.replace(/\u200b/gm,""),n;i.text("<p>"+t+"</p>"),e.initSelection()},append:function(t){var e=this.editor,i=e.$textElem;i.append(s(t)),e.initSelection()},_bindEvent:function(){this._saveRangeRealTime(),this._enterKeyHandle(),this._clearHandle(),this._pasteHandle(),this._tabHandle(),this._imgHandle(),this._dragHandle()},_saveRangeRealTime:function(){var t=this.editor,e=t.$textElem;function i(e){t.selection.saveRange(),t.menus.changeActive()}e.on("keyup",i),e.on("mousedown",(function(t){e.on("mouseleave",i)})),e.on("mouseup",(function(t){i(),e.off("mouseleave",i)}))},_enterKeyHandle:function(){var t=this.editor,e=t.$textElem;function i(e){var i=s("<p><br></p>");i.insertBefore(e),t.selection.createRangeByElem(i,!0),t.selection.restoreSelection(),e.remove()}function n(n){var a=t.selection.getSelectionContainerElem(),o=a.parent();if("<code><br></code>"!==o.html()){if(o.equal(e)){var s=a.getNodeName();"P"!==s&&(a.text()||i(a))}}else i(a)}function a(e){var i=t.selection.getSelectionContainerElem();if(i){var n=i.parent(),a=i.getNodeName(),o=n.getNodeName();if("CODE"===a&&"PRE"===o&&t.cmd.queryCommandSupported("insertHTML")){if(!0===t._willBreakCode){var r=s("<p><br></p>");return r.insertAfter(n),t.selection.createRangeByElem(r,!0),t.selection.restoreSelection(),t._willBreakCode=!1,void e.preventDefault()}var c=t.selection.getRange().startOffset;t.cmd.do("insertHTML","\n"),t.selection.saveRange(),t.selection.getRange().startOffset===c&&t.cmd.do("insertHTML","\n");var l=i.html().length;t.selection.getRange().startOffset+1===l&&(t._willBreakCode=!0),e.preventDefault()}}}e.on("keyup",(function(t){13===t.keyCode&&n(t)})),e.on("keydown",(function(e){13===e.keyCode?a(e):t._willBreakCode=!1}))},_clearHandle:function(){var t=this.editor,e=t.$textElem;e.on("keydown",(function(t){if(8===t.keyCode){var i=e.html().toLowerCase().trim();"<p><br></p>"!==i||t.preventDefault()}})),e.on("keyup",(function(i){if(8===i.keyCode){var n=void 0,a=e.html().toLowerCase().trim();a&&"<br>"!==a||(n=s("<p><br/></p>"),e.html(""),e.append(n),t.selection.createRangeByElem(n,!1,!0),t.selection.restoreSelection())}}))},_pasteHandle:function(){var t=this.editor,e=t.config,i=e.pasteFilterStyle,n=e.pasteTextHandle,a=e.pasteIgnoreImg,o=t.$textElem,s=0;function r(){var t=Date.now(),e=!1;return t-s>=100&&(e=!0),s=t,e}function l(){s=0}o.on("paste",(function(e){if(!c.isIE()&&(e.preventDefault(),r())){var o=H(e,i,a),s=R(e);s=s.replace(/\n/gm,"<br>");var d=t.selection.getSelectionContainerElem();if(d){var u=d.getNodeName();if("CODE"===u||"PRE"===u)return n&&h(n)&&(s=""+(n(s)||"")),void t.cmd.do("insertHTML","<p>"+s+"</p>");if(o)try{n&&h(n)&&(o=""+(n(o)||"")),t.cmd.do("insertHTML",o)}catch(m){n&&h(n)&&(s=""+(n(s)||"")),t.cmd.do("insertHTML","<p>"+s+"</p>")}else l()}}})),o.on("paste",(function(e){if(!c.isIE()&&(e.preventDefault(),r())){var i=U(e);if(i&&i.length){var n=t.selection.getSelectionContainerElem();if(n){var a=n.getNodeName();if("CODE"!==a&&"PRE"!==a){var o=t.uploadImg;o.uploadImg(i)}}}}}))},_tabHandle:function(){var t=this.editor,e=t.$textElem;e.on("keydown",(function(e){if(9===e.keyCode&&t.cmd.queryCommandSupported("insertHTML")){var i=t.selection.getSelectionContainerElem();if(i){var n=i.parent(),a=i.getNodeName(),o=n.getNodeName();"CODE"===a&&"PRE"===o?t.cmd.do("insertHTML","    "):t.cmd.do("insertHTML","&nbsp;&nbsp;&nbsp;&nbsp;"),e.preventDefault()}}}))},_imgHandle:function(){var t=this.editor,e=t.$textElem;e.on("click","img",(function(e){var i=this,n=s(i);"1"!==n.attr("data-w-e")&&(t._selectedImg=n,t.selection.createRangeByElem(n),t.selection.restoreSelection())})),e.on("click  keyup",(function(e){e.target.matches("img")||(t._selectedImg=null)}))},_dragHandle:function(){var t=this.editor,e=s(document);e.on("dragleave drop dragenter dragover",(function(t){t.preventDefault()}));var i=t.$textElem;i.on("drop",(function(e){e.preventDefault();var i=e.dataTransfer&&e.dataTransfer.files;if(i&&i.length){var n=t.uploadImg;n.uploadImg(i)}}))}},G.prototype={constructor:G,do:function(t,e){var i=this.editor;if(i._useStyleWithCSS||(document.execCommand("styleWithCSS",null,!0),i._useStyleWithCSS=!0),i.selection.getRange()){i.selection.restoreSelection();var n="_"+t;this[n]?this[n](e):this._execCommand(t,e),i.menus.changeActive(),i.selection.saveRange(),i.selection.restoreSelection(),i.change&&i.change()}},_insertHTML:function(t){var e=this.editor,i=e.selection.getRange();this.queryCommandSupported("insertHTML")?this._execCommand("insertHTML",t):i.insertNode?(i.deleteContents(),i.insertNode(s(t)[0])):i.pasteHTML&&i.pasteHTML(t)},_insertElem:function(t){var e=this.editor,i=e.selection.getRange();i.insertNode&&(i.deleteContents(),i.insertNode(t[0]))},_execCommand:function(t,e){document.execCommand(t,!1,e)},queryCommandValue:function(t){return document.queryCommandValue(t)},queryCommandState:function(t){return document.queryCommandState(t)},queryCommandSupported:function(t){return document.queryCommandSupported(t)}},V.prototype={constructor:V,getRange:function(){return this._currentRange},saveRange:function(t){if(t)this._currentRange=t;else{var e=window.getSelection();if(0!==e.rangeCount){var i=e.getRangeAt(0),n=this.getSelectionContainerElem(i);if(n&&"false"!==n.attr("contenteditable")&&!n.parentUntil("[contenteditable=false]")){var a=this.editor,o=a.$textElem;o.isContain(n)&&(this._currentRange=i)}}}},collapseRange:function(t){null==t&&(t=!1);var e=this._currentRange;e&&e.collapse(t)},getSelectionText:function(){var t=this._currentRange;return t?this._currentRange.toString():""},getSelectionContainerElem:function(t){t=t||this._currentRange;var e=void 0;if(t)return e=t.commonAncestorContainer,s(1===e.nodeType?e:e.parentNode)},getSelectionStartElem:function(t){t=t||this._currentRange;var e=void 0;if(t)return e=t.startContainer,s(1===e.nodeType?e:e.parentNode)},getSelectionEndElem:function(t){t=t||this._currentRange;var e=void 0;if(t)return e=t.endContainer,s(1===e.nodeType?e:e.parentNode)},isSelectionEmpty:function(){var t=this._currentRange;return!(!t||!t.startContainer||t.startContainer!==t.endContainer||t.startOffset!==t.endOffset)},restoreSelection:function(){var t=window.getSelection();t.removeAllRanges(),t.addRange(this._currentRange)},createEmptyRange:function(){var t=this.editor,e=this.getRange(),i=void 0;if(e&&this.isSelectionEmpty())try{c.isWebkit()?(t.cmd.do("insertHTML","&#8203;"),e.setEnd(e.endContainer,e.endOffset+1),this.saveRange(e)):(i=s("<strong>&#8203;</strong>"),t.cmd.do("insertElem",i),this.createRangeByElem(i,!0))}catch(n){}},createRangeByElem:function(t,e,i){if(t.length){var n=t[0],a=document.createRange();i?a.selectNodeContents(n):a.selectNode(n),"boolean"===typeof e&&a.collapse(e),this.saveRange(a)}}},W.prototype={constructor:W,show:function(t){var e=this;if(!this._isShow){this._isShow=!0;var i=this.$bar;if(this._isRender)this._isRender=!0;else{var n=this.$textContainer;n.append(i)}Date.now()-this._time>100&&t<=1&&(i.css("width",100*t+"%"),this._time=Date.now());var a=this._timeoutId;a&&clearTimeout(a),a=setTimeout((function(){e._hide()}),500)}},_hide:function(){var t=this.$bar;t.remove(),this._time=0,this._isShow=!1,this._isRender=!1}};var q="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function K(t){this.editor=t}K.prototype={constructor:K,_alert:function(t,e){var i=this.editor,n=i.config.debug,a=i.config.customAlert;if(n)throw new Error("wangEditor: "+(e||t));a&&"function"===typeof a?a(t):alert(t)},insertLinkImg:function(t){var e=this;if(t){var i=this.editor,n=i.config,a=n.linkImgCheck,o=void 0;if(a&&"function"===typeof a&&(o=a(t),"string"===typeof o))alert(o);else{i.cmd.do("insertHTML",'<img src="'+t+'" style="max-width:100%;"/>');var s=document.createElement("img");s.onload=function(){var e=n.linkImgCallback;e&&"function"===typeof e&&e(t),s=null},s.onerror=function(){s=null,e._alert("插入图片错误",'wangEditor: 插入图片出错，图片链接是 "'+t+'"，下载该链接失败')},s.onabort=function(){s=null},s.src=t}}},uploadImg:function(t){var e=this;if(t&&t.length){var i=this.editor,n=i.config,a=n.uploadImgServer,o=n.uploadImgShowBase64,s=n.uploadImgMaxSize,r=s/1024/1024,c=n.uploadImgMaxLength||1e4,u=n.uploadFileName||"",m=n.uploadImgParams||{},h=n.uploadImgParamsWithUrl,p=n.uploadImgHeaders||{},A=n.uploadImgHooks||{},f=n.uploadImgTimeout||3e3,v=n.withCredentials;null==v&&(v=!1);var g=n.customUploadImg;if(g||a||o){var k=[],w=[];if(d(t,(function(t){var e=t.name,i=t.size;e&&i&&(!1!==/\.(jpg|jpeg|png|bmp|gif|webp)$/i.test(e)?s<i?w.push("【"+e+"】大于 "+r+"M"):k.push(t):w.push("【"+e+"】不是图片"))})),w.length)this._alert("图片验证未通过: \n"+w.join("\n"));else if(k.length>c)this._alert("一次最多上传"+c+"张图片");else if(g&&"function"===typeof g)g(k,this.insertLinkImg.bind(this));else{var b=new FormData;if(d(k,(function(t){var e=u||t.name;b.append(e,t)})),a&&"string"===typeof a){var C=a.split("#");a=C[0];var y=C[1]||"";l(m,(function(t,e){h&&(a.indexOf("?")>0?a+="&":a+="?",a=a+t+"="+e),b.append(t,e)})),y&&(a+="#"+y);var x=new XMLHttpRequest;if(x.open("POST",a),x.timeout=f,x.ontimeout=function(){A.timeout&&"function"===typeof A.timeout&&A.timeout(x,i),e._alert("上传图片超时")},x.upload&&(x.upload.onprogress=function(t){var e=void 0,n=new W(i);t.lengthComputable&&(e=t.loaded/t.total,n.show(e))}),x.onreadystatechange=function(){var t=void 0;if(4===x.readyState){if(x.status<200||x.status>=300)return A.error&&"function"===typeof A.error&&A.error(x,i),void e._alert("上传图片发生错误","上传图片发生错误，服务器返回状态是 "+x.status);if(t=x.responseText,"object"!==("undefined"===typeof t?"undefined":q(t)))try{t=JSON.parse(t)}catch(a){return A.fail&&"function"===typeof A.fail&&A.fail(x,i,t),void e._alert("上传图片失败","上传图片返回结果错误，返回结果是: "+t)}if(A.customInsert||"0"==t.errno){if(A.customInsert&&"function"===typeof A.customInsert)A.customInsert(e.insertLinkImg.bind(e),t,i);else{var n=t.data||[];n.forEach((function(t){e.insertLinkImg(t)}))}A.success&&"function"===typeof A.success&&A.success(x,i,t)}else A.fail&&"function"===typeof A.fail&&A.fail(x,i,t),e._alert("上传图片失败","上传图片返回结果错误，返回结果 errno="+t.errno)}},A.before&&"function"===typeof A.before){var _=A.before(x,i,k);if(_&&"object"===("undefined"===typeof _?"undefined":q(_))&&_.prevent)return void this._alert(_.msg)}return l(p,(function(t,e){x.setRequestHeader(t,e)})),x.withCredentials=v,void x.send(b)}o&&d(t,(function(t){var i=e,n=new FileReader;n.readAsDataURL(t),n.onload=function(){i.insertLinkImg(this.result)}}))}}}}};var X=1;function Z(t,e){if(null==t)throw new Error("错误：初始化编辑器时候未传入任何参数，请查阅文档");this.id="wangEditor-"+X++,this.toolbarSelector=t,this.textSelector=e,this.customConfig={}}Z.prototype={constructor:Z,_initConfig:function(){var t={};this.config=Object.assign(t,r,this.customConfig);var e=this.config.lang||{},i=[];l(e,(function(t,e){i.push({reg:new RegExp(t,"img"),val:e})})),this.config.langArgs=i},_initDom:function(){var t=this,e=this.toolbarSelector,i=s(e),n=this.textSelector,a=this.config,o=a.zIndex,r=void 0,c=void 0,l=void 0,d=void 0;null==n?(r=s("<div></div>"),c=s("<div></div>"),d=i.children(),i.append(r).append(c),r.css("background-color","#f1f1f1").css("border","1px solid #ccc"),c.css("border","1px solid #ccc").css("border-top","none").css("height","300px")):(r=i,c=s(n),d=c.children()),l=s("<div></div>"),l.attr("contenteditable","true").css("width","100%").css("height","100%"),d&&d.length?l.append(d):l.append(s("<p><br></p>")),c.append(l),r.addClass("w-e-toolbar"),c.addClass("w-e-text-container"),c.css("z-index",o),l.addClass("w-e-text");var m=u("toolbar-elem");r.attr("id",m);var h=u("text-elem");l.attr("id",h),this.$toolbarElem=r,this.$textContainerElem=c,this.$textElem=l,this.toolbarElemId=m,this.textElemId=h;var p=!0;c.on("compositionstart",(function(){p=!1})),c.on("compositionend",(function(){p=!0})),c.on("click keyup",(function(){p&&t.change&&t.change()})),r.on("click",(function(){this.change&&this.change()})),(a.onfocus||a.onblur)&&(this.isFocus=!1,s(document).on("click",(function(e){var i=l.isContain(s(e.target)),n=r.isContain(s(e.target)),a=r[0]==e.target;if(i)t.isFocus||t.onfocus&&t.onfocus(),t.isFocus=!0;else{if(n&&!a)return;t.isFocus&&t.onblur&&t.onblur(),t.isFocus=!1}})))},_initCommand:function(){this.cmd=new G(this)},_initSelectionAPI:function(){this.selection=new V(this)},_initUploadImg:function(){this.uploadImg=new K(this)},_initMenus:function(){this.menus=new Y(this),this.menus.init()},_initText:function(){this.txt=new J(this),this.txt.init()},initSelection:function(t){var e=this.$textElem,i=e.children();if(!i.length)return e.append(s("<p><br></p>")),void this.initSelection();var n=i.last();if(t){var a=n.html().toLowerCase(),o=n.getNodeName();if("<br>"!==a&&"<br/>"!==a||"P"!==o)return e.append(s("<p><br></p>")),void this.initSelection()}this.selection.createRangeByElem(n,!1,!0),this.selection.restoreSelection()},_bindEvent:function(){var t=0,e=this.txt.html(),i=this.config,n=i.onchangeTimeout;n=parseInt(n,10),(!n||n<=0)&&(n=200);var a=i.onchange;a&&"function"===typeof a&&(this.change=function(){var i=this.txt.html();i.length===e.length&&i===e||(t&&clearTimeout(t),t=setTimeout((function(){a(i),e=i}),n))});var o=i.onblur;o&&"function"===typeof o&&(this.onblur=function(){var t=this.txt.html();o(t)});var s=i.onfocus;s&&"function"===typeof s&&(this.onfocus=function(){s()})},create:function(){this._initConfig(),this._initDom(),this._initCommand(),this._initSelectionAPI(),this._initText(),this._initMenus(),this._initUploadImg(),this.initSelection(!0),this._bindEvent()},_offAllEvent:function(){s.offAll()}};try{document}catch(nt){throw new Error("请在浏览器环境下运行")}t();var tt='.w-e-toolbar,.w-e-text-container,.w-e-menu-panel {  padding: 0;  margin: 0;  box-sizing: border-box;}.w-e-toolbar *,.w-e-text-container *,.w-e-menu-panel * {  padding: 0;  margin: 0;  box-sizing: border-box;}.w-e-clear-fix:after {  content: "";  display: table;  clear: both;}.w-e-toolbar .w-e-droplist {  position: absolute;  left: 0;  top: 0;  background-color: #fff;  border: 1px solid #f1f1f1;  border-right-color: #ccc;  border-bottom-color: #ccc;}.w-e-toolbar .w-e-droplist .w-e-dp-title {  text-align: center;  color: #999;  line-height: 2;  border-bottom: 1px solid #f1f1f1;  font-size: 13px;}.w-e-toolbar .w-e-droplist ul.w-e-list {  list-style: none;  line-height: 1;}.w-e-toolbar .w-e-droplist ul.w-e-list li.w-e-item {  color: #333;  padding: 5px 0;}.w-e-toolbar .w-e-droplist ul.w-e-list li.w-e-item:hover {  background-color: #f1f1f1;}.w-e-toolbar .w-e-droplist ul.w-e-block {  list-style: none;  text-align: left;  padding: 5px;}.w-e-toolbar .w-e-droplist ul.w-e-block li.w-e-item {  display: inline-block;  *display: inline;  *zoom: 1;  padding: 3px 5px;}.w-e-toolbar .w-e-droplist ul.w-e-block li.w-e-item:hover {  background-color: #f1f1f1;}@font-face {  font-family: \'w-e-icon\';  src: url(data:application/x-font-woff;charset=utf-8;base64,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) format(\'truetype\');  font-weight: normal;  font-style: normal;}[class^="w-e-icon-"],[class*=" w-e-icon-"] {  /* use !important to prevent issues with browser extensions that change fonts */  font-family: \'w-e-icon\' !important;  speak: none;  font-style: normal;  font-weight: normal;  font-variant: normal;  text-transform: none;  line-height: 1;  /* Better Font Rendering =========== */  -webkit-font-smoothing: antialiased;  -moz-osx-font-smoothing: grayscale;}.w-e-icon-close:before {  content: "\\f00d";}.w-e-icon-upload2:before {  content: "\\e9c6";}.w-e-icon-trash-o:before {  content: "\\f014";}.w-e-icon-header:before {  content: "\\f1dc";}.w-e-icon-pencil2:before {  content: "\\e906";}.w-e-icon-paint-brush:before {  content: "\\f1fc";}.w-e-icon-image:before {  content: "\\e90d";}.w-e-icon-play:before {  content: "\\e912";}.w-e-icon-location:before {  content: "\\e947";}.w-e-icon-undo:before {  content: "\\e965";}.w-e-icon-redo:before {  content: "\\e966";}.w-e-icon-quotes-left:before {  content: "\\e977";}.w-e-icon-list-numbered:before {  content: "\\e9b9";}.w-e-icon-list2:before {  content: "\\e9bb";}.w-e-icon-link:before {  content: "\\e9cb";}.w-e-icon-happy:before {  content: "\\e9df";}.w-e-icon-bold:before {  content: "\\ea62";}.w-e-icon-underline:before {  content: "\\ea63";}.w-e-icon-italic:before {  content: "\\ea64";}.w-e-icon-strikethrough:before {  content: "\\ea65";}.w-e-icon-table2:before {  content: "\\ea71";}.w-e-icon-paragraph-left:before {  content: "\\ea77";}.w-e-icon-paragraph-center:before {  content: "\\ea78";}.w-e-icon-paragraph-right:before {  content: "\\ea79";}.w-e-icon-terminal:before {  content: "\\f120";}.w-e-icon-page-break:before {  content: "\\ea68";}.w-e-icon-cancel-circle:before {  content: "\\ea0d";}.w-e-icon-font:before {  content: "\\ea5c";}.w-e-icon-text-heigh:before {  content: "\\ea5f";}.w-e-toolbar {  display: -webkit-box;  display: -ms-flexbox;  display: flex;  padding: 0 5px;  /* flex-wrap: wrap; */  /* 单个菜单 */}.w-e-toolbar .w-e-menu {  position: relative;  text-align: center;  padding: 5px 10px;  cursor: pointer;}.w-e-toolbar .w-e-menu i {  color: #999;}.w-e-toolbar .w-e-menu:hover i {  color: #333;}.w-e-toolbar .w-e-active i {  color: #1e88e5;}.w-e-toolbar .w-e-active:hover i {  color: #1e88e5;}.w-e-text-container .w-e-panel-container {  position: absolute;  top: 0;  left: 50%;  border: 1px solid #ccc;  border-top: 0;  box-shadow: 1px 1px 2px #ccc;  color: #333;  background-color: #fff;  /* 为 emotion panel 定制的样式 */  /* 上传图片的 panel 定制样式 */}.w-e-text-container .w-e-panel-container .w-e-panel-close {  position: absolute;  right: 0;  top: 0;  padding: 5px;  margin: 2px 5px 0 0;  cursor: pointer;  color: #999;}.w-e-text-container .w-e-panel-container .w-e-panel-close:hover {  color: #333;}.w-e-text-container .w-e-panel-container .w-e-panel-tab-title {  list-style: none;  display: -webkit-box;  display: -ms-flexbox;  display: flex;  font-size: 14px;  margin: 2px 10px 0 10px;  border-bottom: 1px solid #f1f1f1;}.w-e-text-container .w-e-panel-container .w-e-panel-tab-title .w-e-item {  padding: 3px 5px;  color: #999;  cursor: pointer;  margin: 0 3px;  position: relative;  top: 1px;}.w-e-text-container .w-e-panel-container .w-e-panel-tab-title .w-e-active {  color: #333;  border-bottom: 1px solid #333;  cursor: default;  font-weight: 700;}.w-e-text-container .w-e-panel-container .w-e-panel-tab-content {  padding: 10px 15px 10px 15px;  font-size: 16px;  /* 输入框的样式 */  /* 按钮的样式 */}.w-e-text-container .w-e-panel-container .w-e-panel-tab-content input:focus,.w-e-text-container .w-e-panel-container .w-e-panel-tab-content textarea:focus,.w-e-text-container .w-e-panel-container .w-e-panel-tab-content button:focus {  outline: none;}.w-e-text-container .w-e-panel-container .w-e-panel-tab-content textarea {  width: 100%;  border: 1px solid #ccc;  padding: 5px;}.w-e-text-container .w-e-panel-container .w-e-panel-tab-content textarea:focus {  border-color: #1e88e5;}.w-e-text-container .w-e-panel-container .w-e-panel-tab-content input[type=text] {  border: none;  border-bottom: 1px solid #ccc;  font-size: 14px;  height: 20px;  color: #333;  text-align: left;}.w-e-text-container .w-e-panel-container .w-e-panel-tab-content input[type=text].small {  width: 30px;  text-align: center;}.w-e-text-container .w-e-panel-container .w-e-panel-tab-content input[type=text].block {  display: block;  width: 100%;  margin: 10px 0;}.w-e-text-container .w-e-panel-container .w-e-panel-tab-content input[type=text]:focus {  border-bottom: 2px solid #1e88e5;}.w-e-text-container .w-e-panel-container .w-e-panel-tab-content .w-e-button-container button {  font-size: 14px;  color: #1e88e5;  border: none;  padding: 5px 10px;  background-color: #fff;  cursor: pointer;  border-radius: 3px;}.w-e-text-container .w-e-panel-container .w-e-panel-tab-content .w-e-button-container button.left {  float: left;  margin-right: 10px;}.w-e-text-container .w-e-panel-container .w-e-panel-tab-content .w-e-button-container button.right {  float: right;  margin-left: 10px;}.w-e-text-container .w-e-panel-container .w-e-panel-tab-content .w-e-button-container button.gray {  color: #999;}.w-e-text-container .w-e-panel-container .w-e-panel-tab-content .w-e-button-container button.red {  color: #c24f4a;}.w-e-text-container .w-e-panel-container .w-e-panel-tab-content .w-e-button-container button:hover {  background-color: #f1f1f1;}.w-e-text-container .w-e-panel-container .w-e-panel-tab-content .w-e-button-container:after {  content: "";  display: table;  clear: both;}.w-e-text-container .w-e-panel-container .w-e-emoticon-container .w-e-item {  cursor: pointer;  font-size: 18px;  padding: 0 3px;  display: inline-block;  *display: inline;  *zoom: 1;}.w-e-text-container .w-e-panel-container .w-e-up-img-container {  text-align: center;}.w-e-text-container .w-e-panel-container .w-e-up-img-container .w-e-up-btn {  display: inline-block;  *display: inline;  *zoom: 1;  color: #999;  cursor: pointer;  font-size: 60px;  line-height: 1;}.w-e-text-container .w-e-panel-container .w-e-up-img-container .w-e-up-btn:hover {  color: #333;}.w-e-text-container {  position: relative;}.w-e-text-container .w-e-progress {  position: absolute;  background-color: #1e88e5;  bottom: 0;  left: 0;  height: 1px;}.w-e-text {  padding: 0 10px;  overflow-y: scroll;}.w-e-text p,.w-e-text h1,.w-e-text h2,.w-e-text h3,.w-e-text h4,.w-e-text h5,.w-e-text table,.w-e-text pre {  margin: 10px 0;  line-height: 1.5;}.w-e-text ul,.w-e-text ol {  margin: 10px 0 10px 20px;}.w-e-text blockquote {  display: block;  border-left: 8px solid #d0e5f2;  padding: 5px 10px;  margin: 10px 0;  line-height: 1.4;  font-size: 100%;  background-color: #f1f1f1;}.w-e-text code {  display: inline-block;  *display: inline;  *zoom: 1;  background-color: #f1f1f1;  border-radius: 3px;  padding: 3px 5px;  margin: 0 3px;}.w-e-text pre code {  display: block;}.w-e-text table {  border-top: 1px solid #ccc;  border-left: 1px solid #ccc;}.w-e-text table td,.w-e-text table th {  border-bottom: 1px solid #ccc;  border-right: 1px solid #ccc;  padding: 3px 5px;}.w-e-text table th {  border-bottom: 2px solid #ccc;  text-align: center;}.w-e-text:focus {  outline: none;}.w-e-text img {  cursor: pointer;}.w-e-text img:hover {  box-shadow: 0 0 5px #333;}',et=document.createElement("style");et.type="text/css",et.innerHTML=tt,document.getElementsByTagName("HEAD").item(0).appendChild(et);var it=window.wangEditor||Z;return it}))},"20d6":function(t,e,i){"use strict";var n=i("5ca1"),a=i("0a49")(6),o="findIndex",s=!0;o in[]&&Array(1)[o]((function(){s=!1})),n(n.P+n.F*s,"Array",{findIndex:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}}),i("9c6c")(o)},2328:function(t,e,i){},"261e":function(t,e,i){"use strict";var n=i("92fa"),a=i.n(n),o=i("6042"),s=i.n(o),r=i("41b2"),c=i.n(r),l=i("4d26"),d=i.n(l),u=i("0464"),m=i("6dd8"),h=i("c973"),p="\n  min-height:0 !important;\n  max-height:none !important;\n  height:0 !important;\n  visibility:hidden !important;\n  overflow:hidden !important;\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important\n",A=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"],f={},v=void 0;function g(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=t.getAttribute("id")||t.getAttribute("data-reactid")||t.getAttribute("name");if(e&&f[i])return f[i];var n=window.getComputedStyle(t),a=n.getPropertyValue("box-sizing")||n.getPropertyValue("-moz-box-sizing")||n.getPropertyValue("-webkit-box-sizing"),o=parseFloat(n.getPropertyValue("padding-bottom"))+parseFloat(n.getPropertyValue("padding-top")),s=parseFloat(n.getPropertyValue("border-bottom-width"))+parseFloat(n.getPropertyValue("border-top-width")),r=A.map((function(t){return t+":"+n.getPropertyValue(t)})).join(";"),c={sizingStyle:r,paddingSize:o,borderSize:s,boxSizing:a};return e&&i&&(f[i]=c),c}function k(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;v||(v=document.createElement("textarea"),document.body.appendChild(v)),t.getAttribute("wrap")?v.setAttribute("wrap",t.getAttribute("wrap")):v.removeAttribute("wrap");var a=g(t,e),o=a.paddingSize,s=a.borderSize,r=a.boxSizing,c=a.sizingStyle;v.setAttribute("style",c+";"+p),v.value=t.value||t.placeholder||"";var l=Number.MIN_SAFE_INTEGER,d=Number.MAX_SAFE_INTEGER,u=v.scrollHeight,m=void 0;if("border-box"===r?u+=s:"content-box"===r&&(u-=o),null!==i||null!==n){v.value=" ";var h=v.scrollHeight-o;null!==i&&(l=h*i,"border-box"===r&&(l=l+o+s),u=Math.max(l,u)),null!==n&&(d=h*n,"border-box"===r&&(d=d+o+s),m=u>d?"":"hidden",u=Math.min(d,u))}return n||(m="hidden"),{height:u+"px",minHeight:l+"px",maxHeight:d+"px",overflowY:m}}var w=i("daa3"),b=i("4df5");function C(t){return window.requestAnimationFrame?window.requestAnimationFrame(t):window.setTimeout(t,1)}function y(t){window.cancelAnimationFrame?window.cancelAnimationFrame(t):window.clearTimeout(t)}function x(t){return"undefined"===typeof t||null===t?"":t}function _(){}e["a"]={name:"ATextarea",model:{prop:"value",event:"change.value"},props:c()({},h["a"],{autosize:[Object,Boolean]}),inject:{configProvider:{default:function(){return b["a"]}}},data:function(){var t=this.$props,e=t.value,i=void 0===e?"":e,n=t.defaultValue,a=void 0===n?"":n;return{stateValue:x(Object(w["b"])(this,"value")?i:a),nextFrameActionId:void 0,textareaStyles:{}}},computed:{},watch:{value:function(t){var e=this;this.$nextTick((function(){e.resizeOnNextFrame()})),this.stateValue=x(t)},autosize:function(t){!t&&this.$refs.textArea&&(this.textareaStyles=Object(u["a"])(this.textareaStyles,["overflowY"]))}},mounted:function(){var t=this;this.$nextTick((function(){t.resizeTextarea(),t.updateResizeObserverHook(),t.autoFocus&&t.focus()}))},updated:function(){this.updateResizeObserverHook()},beforeDestroy:function(){this.resizeObserver&&this.resizeObserver.disconnect()},methods:{resizeOnNextFrame:function(){this.nextFrameActionId&&y(this.nextFrameActionId),this.nextFrameActionId=C(this.resizeTextarea)},updateResizeObserverHook:function(){!this.resizeObserver&&this.$props.autosize?(this.resizeObserver=new m["a"](this.resizeOnNextFrame),this.resizeObserver.observe(this.$refs.textArea)):this.resizeObserver&&!this.$props.autosize&&(this.resizeObserver.disconnect(),this.resizeObserver=null)},handleKeyDown:function(t){13===t.keyCode&&this.$emit("pressEnter",t),this.$emit("keydown",t)},resizeTextarea:function(){var t=this.$props.autosize;if(t&&this.$refs.textArea){var e=t.minRows,i=t.maxRows,n=k(this.$refs.textArea,!1,e,i);this.textareaStyles=n}},handleTextareaChange:function(t){var e=t.target,i=e.value,n=e.composing;n||this.stateValue===i||(Object(w["b"])(this,"value")?this.$forceUpdate():(this.stateValue=i,this.resizeTextarea()),this.$emit("change.value",i),this.$emit("change",t),this.$emit("input",t))},focus:function(){this.$refs.textArea.focus()},blur:function(){this.$refs.textArea.blur()}},render:function(){var t=arguments[0],e=this.stateValue,i=this.handleKeyDown,n=this.handleTextareaChange,o=this.textareaStyles,r=this.$attrs,l=this.$listeners,m=this.prefixCls,h=this.disabled,p=Object(u["a"])(this.$props,["prefixCls","autosize","type","value","defaultValue","lazy"]),A=this.configProvider.getPrefixCls,f=A("input",m),v=d()(f,s()({},f+"-disabled",h)),g={directives:[{name:"ant-input"}],attrs:c()({},p,r),on:c()({},l,{keydown:i,input:n,change:_})};return t("textarea",a()([g,{domProps:{value:e},class:v,style:o,ref:"textArea"}]))}}},"386b":function(t,e,i){var n=i("5ca1"),a=i("79e5"),o=i("be13"),s=/"/g,r=function(t,e,i,n){var a=String(o(t)),r="<"+e;return""!==i&&(r+=" "+i+'="'+String(n).replace(s,"&quot;")+'"'),r+">"+a+"</"+e+">"};t.exports=function(t,e){var i={};i[t]=e(r),n(n.P+n.F*a((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3})),"String",i)}},"3ed7":function(t,e,i){"use strict";var n=i("2328"),a=i.n(n);a.a},4540:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"member-menu",class:{creating:t.creating,editing:t.editing}},[i("a-spin",{attrs:{spinning:t.listLoading}},[i("div",{staticClass:"search-content"},[i("a-input",{attrs:{size:"large",placeholder:t.creating||t.editing?"标签名称":"搜索标签"},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}},[t.creating||t.editing?i("a-icon",{attrs:{slot:"prefix",type:"tag"},slot:"prefix"}):i("a-icon",{attrs:{slot:"prefix",type:"search"},slot:"prefix"})],1)],1),i("div",{staticClass:"member-list tag-list"},[t.creating||t.editing?t._e():[i("vue-scroll",[i("div",{staticClass:"list-group"},[i("a-list",{directives:[{name:"show",rawName:"v-show",value:t.list.length,expression:"list.length"}],staticClass:"list-content",attrs:{itemLayout:"horizontal",dataSource:t.list},scopedSlots:t._u([{key:"renderItem",fn:function(e,n){return i("a-list-item",{staticClass:"member-list-item",nativeOn:{click:function(i){return t.setTag(e)}}},[i("span",{attrs:{slot:"actions"},slot:"actions"},[i("a",{staticClass:"tag-edit muted"},[i("a-icon",{attrs:{type:"edit"},on:{click:function(i){return i.stopPropagation(),t.editTag(e,n)}}})],1),i("a-icon",{directives:[{name:"show",rawName:"v-show",value:t.showCheck(e),expression:"showCheck(item)"}],staticClass:"m-l-sm",attrs:{type:"check"}})],1),i("a-list-item-meta",[i("span",{staticClass:"tag-title",attrs:{slot:"title"},slot:"title"},[i("a-badge",{class:"badge-"+e.color,attrs:{status:"success"}}),t._v("\n                    "+t._s(e.name)+"\n                  ")],1)])],1)}}],null,!1,2674320970)})],1)])],t.creating||t.editing?[i("div",{staticClass:"tag-badge"},t._l(t.badgeList,(function(e){return i("span",{key:e,staticClass:"badge-item",on:{click:function(i){t.currentBadge=e}}},[i("a-badge",{class:"badge-"+e,attrs:{status:"success"}}),i("a-icon",{directives:[{name:"show",rawName:"v-show",value:t.currentBadge==e,expression:"currentBadge == badge"}],attrs:{type:"check"}})],1)})),0)]:t._e()],2),i("div",{staticClass:"footer"},[t.creating?[i("a-button",{attrs:{type:"default",size:"large"},on:{click:function(e){t.creating=!1,t.keyword=""}}},[t._v("取消")]),i("a-button",{attrs:{type:"primary",disabled:!t.keyword,size:"large"},on:{click:t.createTag}},[t._v("创建")])]:t.editing?[i("a-popconfirm",{attrs:{overlayStyle:{zIndex:"1080"},title:"确认删除标签？",okText:"确定",cancelText:"取消"},on:{confirm:t.deleteTag}},[i("a-button",{attrs:{type:"danger",size:"large"}},[t._v("删除")])],1),i("a-button",{attrs:{type:"primary",disabled:!t.keyword,size:"large"},on:{click:t.saveTag}},[t._v("完成")])]:[i("a-button",{attrs:{type:"primary",size:"large",block:""},on:{click:function(e){t.creating=!0,t.activeCreating=!0}}},[t._v("新建标签")])]],2)])],1)},a=[],o=(i("7f7f"),i("20d6"),i("386d"),i("c5f6"),i("2ef0"),i("db9e6")),s=i("ca8d"),r=i("2f14"),c={name:"taskTagMenu",props:{projectCode:{type:[String,Number],default:function(){return""}},taskCode:{type:[String,Number],default:function(){return""}},isCommit:{type:[Boolean],default:function(){return!0}}},data:function(){return{keyword:"",editing:!1,creating:!1,activeCreating:!1,searching:!1,listLoading:!1,showInviteMember:!1,tags:[],list:[],listTemp:[],badgeList:["blue","red","orange","green","brown","purple"],currentBadge:"blue",currentTag:{tag:null,index:-1}}},created:function(){this.init()},watch:{keyword:function(){this.search()}},methods:{init:function(){var t=this;this.projectCode&&(this.listLoading=!0,Object(o["c"])({projectCode:this.projectCode}).then((function(e){t.list=e.data,t.listTemp=e.data,t.listLoading=!1}))),this.taskCode&&Object(s["u"])({taskCode:this.taskCode}).then((function(e){t.tags=e.data}))},showCheck:function(t){var e=this.tags.findIndex((function(e){return e.tag_code==t.code}));if(-1!==e)return!0},checkTaskChange:function(t){var e=this.tags.findIndex((function(e){return e.tag_code==t.code}));-1!==e?this.tags.splice(e,1):this.tags.push({tag_code:t.code})},editTag:function(t,e){this.editing=!0,this.keyword=t.name,this.currentBadge=t.color,this.currentTag.tag=t,this.currentTag.index=e},saveTag:function(){var t=this;Object(o["b"])({name:this.keyword,color:this.currentBadge,tagCode:this.currentTag.tag.code}).then((function(e){if(!Object(r["a"])(e))return!1;t.currentTag.tag.name=t.listTemp[t.currentTag.index].name=t.keyword,t.currentTag.tag.color=t.listTemp[t.currentTag.index].color=t.currentBadge,t.$emit("update",t.currentTag.tag),t.clearCreating()}))},deleteTag:function(){var t=this;Object(o["a"])(this.currentTag.tag.code).then((function(e){if(!Object(r["a"])(e))return!1;t.listTemp.splice(t.currentTag.index,1),t.$emit("delete",t.currentTag.tag),t.clearCreating()}))},setTag:function(t){var e=this;this.checkTaskChange(t),this.isCommit?Object(s["q"])({taskCode:this.taskCode,tagCode:t.code}).then((function(){e.$emit("change",t)})):this.$emit("change",t)},createTag:function(){var t=this;Object(o["d"])({projectCode:this.projectCode,name:this.keyword,color:this.currentBadge}).then((function(e){if(!Object(r["a"])(e))return!1;var i=e.data;t.listTemp.push(i),t.list.push(i),t.checkTaskChange(i),Object(s["q"])({taskCode:t.taskCode,tagCode:i.code}).then((function(){t.$emit("change",i),t.clearCreating()}))}))},clearCreating:function(){this.editing=!1,this.creating=!1,this.activeCreating=!1,this.keyword=""},search:function(){var t=this;this.keyword=this.keyword.trim(),this.keyword||(this.list=JSON.parse(JSON.stringify(this.listTemp)),this.activeCreating||(this.creating=!1)),this.searching=!0,this.list=this.list.filter((function(e){return-1!=e.name.indexOf(t.keyword)})),this.list.length||this.editing||(this.creating=!0)}}},l=c,d=(i("ae2c"),i("2877")),u=Object(d["a"])(l,n,a,!1,null,null,null);e["default"]=u.exports},7166:function(t,e,i){},"81fe":function(t,e,i){"use strict";i.d(e,"c",(function(){return n})),i.d(e,"b",(function(){return a})),i.d(e,"a",(function(){return o})),i.d(e,"d",(function(){return s}));i("3b2b"),i("a481");var n=function(t,e){e||(e=moment());var i=moment(e).diff(moment(t),"hours");if(i<=1)return moment(t).fromNow();moment(e).get("date"),moment(t).get("date");var n=moment(t).format("H:mm"),a=moment(t).format("YYYY-MM-DD"),o=moment().weekday(0).format("YYYY-MM-DD"),s=moment().weekday(6).format("YYYY-MM-DD"),r="";return r=a<o?"[上周]dd "+n:a>s?"[下周]dd "+n:"[周]dd "+n,moment(t).calendar(null,{sameDay:"[今天 ]"+moment(t).format("H:mm"),nextDay:"[明天 ]"+n,nextWeek:r,lastDay:"[昨天 ]"+n,lastWeek:r,sameElse:"M月D日 H:mm"})},a=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=moment(t).format("H:mm");e||(i="");var n=moment(t).format("YYYY-MM-DD"),a=moment().weekday(0).format("YYYY-MM-DD"),o=moment().weekday(6).format("YYYY-MM-DD"),s="";return s=n<a?"[上周]dd "+i:n>o?"[下周]dd "+i:"[周]dd "+i,moment(t).calendar(null,{sameDay:"[今天 ]"+moment(t).format("H:mm"),nextDay:"[明天 ]"+i,nextWeek:s,lastDay:"[昨天 ]"+i,lastWeek:s,sameElse:"M月D日 H:mm"})},o=function(t,e){return!e&&t?a(t)+" 开始":t?a(t)+" - "+a(e):a(e)+" 截止"},s=function(t){var e="";void 0==t&&(t=new Date);var i=t.getHours();return i>=0&&i<=4&&(e="深夜了，注意身体，"),i>=4&&i<7&&(e="清晨好， "),i>=7&&i<12&&(e="早安，"),i>=12&&i<=13&&(e="午饭时间到了，"),i>=13&&i<=17&&(e="下午好，"),i>=17&&i<=18&&(e="进入傍晚了，"),i>=18&&i<=20&&(e="吃过晚饭了吗，"),i>=20&&i<=24&&(e="在加班吗？辛苦了，"),e}},"82f8":function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));var n=i("22b6");function a(t){return n["a"].post("project/invite_link/save",t)}},"8c90":function(t,e,i){},"9f5d":function(t,e,i){"use strict";i.d(e,"d",(function(){return a})),i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return r}));var n=i("22b6");function a(t,e){return n["a"].post("project/project_member/searchInviteMember",{keyword:t,projectCode:e})}function o(t,e){return n["a"].post("project/project_member/inviteMember",{memberCode:t,projectCode:e})}function s(t){return n["a"].post("project/project_member/index",t)}function r(t){return n["a"].post("project/project_member/_listForInvite",t)}},a532:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{style:t.styleObject},[i("div",{ref:"editor",style:t.styleObject,attrs:{id:t.id}})])},a=[],o=(i("28a5"),i("a481"),i("ac6a"),i("1a0b")),s=i.n(o),r=i("2ef0"),c=i.n(r),l={name:"editor",props:["id","value","width","height","uploadImgServer","disabled","menus","mapKey","menuFixed","pasteFilter","codeDefaultLang","hideLinkImg","uploadImgParams","uploadImgHeaders","isRealtime","disabledMenus","uploadFileName","uploadImgShowBase64"],data:function(){return{styleObject:{width:"auto",height:"auto"},editor:null}},methods:{initSize:function(){this.width&&(this.styleObject.width=this.width+"px"),this.height&&(this.styleObject.height=this.height+"px")},createEditor:function(){this.editor=new s.a(document.getElementById(this.id)),this.initConfig(),this.editor.create()},initConfig:function(){this.editor.customConfig.uploadFileName=this.uploadFileName?this.uploadFileName:"image[]",this.editor.customConfig.uploadImgServer=this.uploadImgServer,this.editor.customConfig.uploadImgShowBase64=!!this.uploadImgShowBase64&&this.uploadImgShowBase64,this.editor.customConfig.uploadImgFileName="file",this.editor.customConfig.pasteFilter=!1,void 0!=this.mapKey&&(this.editor.customConfig.mapAk=this.mapKey),void 0!=this.menus&&this.menus instanceof Array&&this.menus.length?this.editor.customConfig.menus=this.filterMenu(this.menus):this.disabledMenus&&(this.editor.customConfig.menus=this.filterDisabledMenu(this.editor.customConfig.menus,this.disabledMenus)),void 0!=this.menuFixed&&(this.editor.customConfig.menuFixed=this.menuFixed),void 0!=this.pasteFilter&&(this.editor.customConfig.pasteFilter=this.pasteFilter),void 0!=this.codeDefaultLang&&(this.editor.customConfig.codeDefaultLang=this.codeDefaultLang),void 0!=this.hideLinkImg&&(this.editor.customConfig.hideLinkImg=this.hideLinkImg),void 0!=this.uploadImgParams&&this.uploadImgParams instanceof Object&&(this.editor.customConfig.uploadImgParams=this.uploadImgParams),void 0!=this.uploadImgHeaders&&this.uploadImgHeaders instanceof Object&&(this.editor.customConfig.uploadImgHeaders=this.uploadImgHeaders),this.value&&this.setHtml(this.value),this.disabled&&this.disable(),this.listenChange()},filterMenu:function(t){return window.__.map(t,(function(t,e){return"source"===t?null:t}))},filterDisabledMenu:function(t,e){var i=t.join(",");return c()(e).forEach((function(t){i=i.replace(t,"").replace(",,",",")})),i.length&&","==i[0]&&i.substr(1,i.length),i.split(",")},insertImg:function(t){this.editor.command(null,"insertHtml","<img src="+t+' style="max-width:100%;"/>')},getHtml:function(){return this.editor.txt.html()},getText:function(){return this.editor.txt.text()},setHtml:function(t){this.editor.txt.html(t)},appendHtml:function(t){this.editor.txt.append(t)},clear:function(){this.editor.clear()},enable:function(){this.editor.enable()},disable:function(){this.editor.disable()},destroy:function(){this.editor.destroy()},undestroy:function(){this.editor.undestroy()},listenChange:function(){var t=this;this.editor.onchange=function(){t.$emit("change");var e="";t.getText()||(e=t.getHtml()),!1!==t.isRealtime&&t.$emit("input",e)}}},mounted:function(){var t=this;this.initSize(),setTimeout((function(){t.createEditor()}),100)}},d=l,u=i("2877"),m=Object(u["a"])(d,n,a,!1,null,null,null);e["default"]=m.exports},ae2c:function(t,e,i){"use strict";var n=i("7166"),a=i.n(n);a.a},b54a:function(t,e,i){"use strict";i("386b")("link",(function(t){return function(e){return t(this,"a","href",e)}}))},c030:function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"a",(function(){return o})),i.d(e,"d",(function(){return s})),i.d(e,"c",(function(){return r}));var n=i("22b6");function a(t,e){return n["a"].post("project/project_member/inviteMember",{memberCode:t,projectCode:e})}function o(t){return n["a"].post("project/project_member/_joinByInviteLink",{inviteCode:t})}function s(t,e){return n["a"].post("project/project_member/removeMember",{memberCode:t,projectCode:e})}function r(t){return n["a"].post("project/project_member/index",t)}},c973:function(t,e,i){"use strict";var n=i("4d91");e["a"]={prefixCls:n["a"].string,inputPrefixCls:n["a"].string,defaultValue:[String,Number],value:[String,Number],placeholder:[String,Number],type:{default:"text",type:String},name:String,size:{validator:function(t){return["small","large","default"].includes(t)}},disabled:{default:!1,type:Boolean},readOnly:Boolean,addonBefore:n["a"].any,addonAfter:n["a"].any,prefix:n["a"].any,suffix:n["a"].any,spellCheck:Boolean,autoFocus:Boolean,allowClear:Boolean,lazy:{default:!0,type:Boolean}}},ca8d:function(t,e,i){"use strict";i.d(e,"j",(function(){return a})),i.d(e,"h",(function(){return o})),i.d(e,"o",(function(){return s})),i.d(e,"t",(function(){return r})),i.d(e,"r",(function(){return c})),i.d(e,"m",(function(){return l})),i.d(e,"u",(function(){return d})),i.d(e,"q",(function(){return u})),i.d(e,"b",(function(){return m})),i.d(e,"c",(function(){return h})),i.d(e,"s",(function(){return p})),i.d(e,"p",(function(){return A})),i.d(e,"l",(function(){return f})),i.d(e,"k",(function(){return v})),i.d(e,"e",(function(){return g})),i.d(e,"d",(function(){return k})),i.d(e,"i",(function(){return w})),i.d(e,"a",(function(){return b})),i.d(e,"n",(function(){return C})),i.d(e,"g",(function(){return y})),i.d(e,"f",(function(){return x}));var n=i("22b6");function a(t){return n["a"].post("project/task",t)}function o(t){return n["a"].post("project/task/getListByTaskTag",t)}function s(t){return n["a"].post("project/task/selfList",t)}function r(t){return n["a"].post("project/task/taskSources",t)}function c(t){return n["a"].post("project/task/sort",t)}function l(t){return n["a"].post("project/task/save",t)}function d(t){return n["a"].post("project/task/taskToTags",t)}function u(t){return n["a"].post("project/task/setTag",t)}function m(t){return n["a"].post("project/task/assignTask",t)}function h(t){return n["a"].post("project/task/batchAssignTask",t)}function p(t,e){return n["a"].post("project/task/taskDone",{taskCode:t,done:e})}function A(t,e){return n["a"].post("project/task/setPrivate",{taskCode:t,private:e})}function f(t){return n["a"].post("project/task/recycleBatch",t)}function v(t){return n["a"].post("project/task/recovery",{taskCode:t})}function g(t){return n["a"].post("project/task/delete",{taskCode:t})}function k(t){return n["a"].post("project/task/dateTotalForProject",t)}function w(t){return n["a"].post("project/project/getLogBySelfProject",t)}function b(t){return n["a"].post("project/task/_taskWorkTimeList",t)}function C(t){return n["a"].post("project/task/saveTaskWorkTime",t)}function y(t){return n["a"].post("project/task/editTaskWorkTime",t)}function x(t){return n["a"].post("project/task/delTaskWorkTime",t)}},cff3:function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"a",(function(){return o}));var n=i("22b6");i("2f14");function a(t,e){return n["a"].post("project/department_member/removeMember",{accountCode:t,departmentCode:e})}function o(t){return n["a"].post("project/department_member/detail",t)}},d3a1:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("a-modal",{staticClass:"invite-project-member",attrs:{width:500,title:t.actionInfo.modalTitle,footer:null},on:{cancel:t.cancel},model:{value:t.actionInfo.modalStatus,callback:function(e){t.$set(t.actionInfo,"modalStatus",e)},expression:"actionInfo.modalStatus"}},[i("div",{staticClass:"header"},[i("span",[t._v("账号邀请")]),i("a",{on:{click:t.createInviteLink}},[t._v("通过链接邀请")])]),i("div",{staticClass:"search-content m-b"},[i("a-input",{attrs:{placeholder:"输入昵称或邮箱查找"},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}},[i("a-icon",{attrs:{slot:"prefix",type:"search"},slot:"prefix"})],1)],1),i("vue-scroll",[i("div",{staticClass:"member-list"},[i("a-list",{staticClass:"project-list",attrs:{itemLayout:"horizontal",loading:t.searching,dataSource:t.list,locale:{emptyText:t.keyword&&t.keyword.length>1?"没有搜索到相关成员":""}},scopedSlots:t._u([{key:"renderItem",fn:function(e){return i("a-list-item",{},[i("span",{attrs:{slot:"actions"},slot:"actions"},[e.joined?[i("a-icon",{attrs:{type:"user"}}),i("span",[t._v("已加入")])]:i("a-button",{attrs:{size:"small",type:"dashed",icon:"user-add"},on:{click:function(i){return t.invite(e)}}},[t._v("邀请")])],2),i("a-list-item-meta",{attrs:{description:e.email}},[i("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.name))]),i("a-avatar",{attrs:{slot:"avatar",icon:"user",src:e.avatar},slot:"avatar"})],1)],1)}}])})],1)])],1),i("a-modal",{staticClass:"invite-link",attrs:{width:600,title:t.linkInfo.modalTitle,footer:null},model:{value:t.linkInfo.modalStatus,callback:function(e){t.$set(t.linkInfo,"modalStatus",e)},expression:"linkInfo.modalStatus"}},[i("div",{staticClass:"header"},[i("p",[t._v("链接有效日期："+t._s(t.linkInfo.overTime))]),i("a-input-search",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.linkInfo.link,expression:"linkInfo.link",arg:"copy"}],attrs:{size:"large",enterButton:"复制链接"},model:{value:t.linkInfo.link,callback:function(e){t.$set(t.linkInfo,"link",e)},expression:"linkInfo.link"}})],1)])],1)},a=[],o=(i("28a5"),i("b54a"),i("386d"),i("c5f6"),i("2ef0")),s=i.n(o),r=i("9f5d"),c=i("2f14"),l=i("82f8"),d={name:"inviteProjectMember",props:{value:{type:Boolean,default:function(){return!1}},projectCode:{type:[String,Number],default:function(){return""}}},data:function(){return{form:this.$form.createForm(this),actionInfo:{modalStatus:this.value,confirmLoading:!1,modalTitle:"邀请新成员"},linkInfo:{modalStatus:!1,confirmLoading:!1,modalTitle:"邀请成员",link:"",overTime:""},keyword:"",searching:!1,list:[]}},watch:{value:function(t){this.actionInfo.modalStatus=t},keyword:function(){this.search()}},created:function(){this.getMembers()},methods:{getMembers:function(){var t=this;Object(r["a"])({projectCode:t.projectCode}).then((function(e){t.list=e.data}))},invite:function(t){Object(r["b"])(t.memberCode,this.projectCode).then((function(e){var i=Object(c["a"])(e);i&&(t.joined=!0)}))},createInviteLink:function(){var t=this;this.linkInfo.link?this.linkInfo.modalStatus=!0:Object(l["a"])({inviteType:"project",sourceCode:this.projectCode}).then((function(e){var i=Object(c["a"])(e);i&&(t.linkInfo.modalStatus=!0,t.linkInfo.link=window.location.href.split("#")[0]+"#/invite_from_link/"+e.data.code,t.linkInfo.overTime=moment(e.data.code.over_time).format("YYYY年M月D日 HH:mm"))}))},search:s.a.debounce((function(){var t=this;if(this.keyword||(this.list=[]),this.keyword.length<=1)return this.getMembers(),!1;this.searching=!0,Object(r["d"])(this.keyword,this.projectCode).then((function(e){t.searching=!1,t.list=e.data}))}),500),cancel:function(){this.actionInfo.modalStatus=!1,this.$emit("input",this.actionInfo.modalStatus)}}},u=d,m=(i("3ed7"),i("2877")),h=Object(m["a"])(u,n,a,!1,null,null,null);e["default"]=h.exports},d8bc:function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"a",(function(){return o}));var n=i("22b6");function a(t){return n["a"].post("project/task_member",t)}function o(t){return n["a"].post("project/task_member/inviteMemberBatch",t)}},db9e6:function(t,e,i){"use strict";i.d(e,"c",(function(){return a})),i.d(e,"d",(function(){return o})),i.d(e,"b",(function(){return s})),i.d(e,"a",(function(){return r}));var n=i("22b6");function a(t){return n["a"].post("project/task_tag",t)}function o(t){return n["a"].post("project/task_tag/save",t)}function s(t){return n["a"].post("project/task_tag/edit",t)}function r(t){return n["a"].post("project/task_tag/delete",{tagCode:t})}},e37d:function(t,e,i){"use strict";var n=i("8c90"),a=i.n(n);a.a},e8d3:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"member-menu project-member-menu"},[i("a-spin",{attrs:{spinning:t.projectMemberLoading||t.taskMemberLoading}},[i("div",{staticClass:"search-content"},[i("a-input",{attrs:{size:"large",placeholder:"搜索"},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}},[i("a-icon",{attrs:{slot:"prefix",type:"search"},slot:"prefix"})],1)],1),i("div",{staticClass:"member-list"},[i("vue-scroll",[i("div",{directives:[{name:"show",rawName:"v-show",value:!t.keyword,expression:"!keyword"}],staticClass:"list-group"},[i("span",{staticClass:"title muted"},[t._v("参与者")]),i("a-list",{directives:[{name:"show",rawName:"v-show",value:t.taskMemberList.length,expression:"taskMemberList.length"}],staticClass:"list-content",attrs:{itemLayout:"horizontal",dataSource:t.taskMemberList},scopedSlots:t._u([{key:"renderItem",fn:function(e){return i("a-list-item",{staticClass:"member-list-item",class:{owner:e.is_owner},nativeOn:{click:function(i){return t.addToInvite(e.code,e.is_owner)}}},[i("span",{attrs:{slot:"actions"},slot:"actions"},[i("a-icon",{directives:[{name:"show",rawName:"v-show",value:t.showCheck(e.code),expression:"showCheck(item.code)"}],attrs:{type:"check"}})],1),i("a-list-item-meta",[i("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.name))]),i("a-avatar",{attrs:{slot:"avatar",icon:"user",src:e.avatar},slot:"avatar"})],1)],1)}}])})],1),i("div",{staticClass:"list-group"},[i("span",{staticClass:"title muted"},[t._v("其他成员")]),i("div",{staticClass:"member-list-item ant-list-item",on:{click:function(e){return t.addToInvite("all")}}},[i("div",{staticClass:"ant-list-item-meta"},[i("div",{staticClass:"ant-list-item-meta-avatar"},[i("a-avatar",{attrs:{icon:"user"}})],1),i("div",{staticClass:"ant-list-item-meta-content"},[i("h4",{staticClass:"ant-list-item-meta-title"},[i("span",[t._v("所有项目成员")])])])]),i("ul",{directives:[{name:"show",rawName:"v-show",value:t.showCheck("all"),expression:"showCheck('all')"}],staticClass:"ant-list-item-action"},[i("li",[i("span",[i("a-icon",{attrs:{type:"check"}})],1)])])]),i("a-list",{staticClass:"list-content",attrs:{itemLayout:"horizontal",dataSource:t.projectMemberList,locale:{emptyText:t.keyword&&t.keyword.length>1?"该成员不在项目成员列表中":""}},scopedSlots:t._u([{key:"renderItem",fn:function(e){return t.showMember(e)?i("a-list-item",{staticClass:"member-list-item",nativeOn:{click:function(i){return t.addToInvite(e.code,!1)}}},[i("span",{attrs:{slot:"actions"},slot:"actions"},[i("a-icon",{directives:[{name:"show",rawName:"v-show",value:t.showCheck(e.code),expression:"showCheck(item.code)"}],attrs:{type:"check"}})],1),i("a-list-item-meta",[i("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.name))]),i("a-avatar",{attrs:{slot:"avatar",icon:"user",src:e.avatar},slot:"avatar"})],1)],1):t._e()}}],null,!0)})],1)])],1),i("div",{staticClass:"footer"},[i("a-button",{attrs:{type:"primary",size:"large",block:""},on:{click:t.inviteTaskMember}},[t._v("确定")])],1)])],1)},a=[],o=(i("7f7f"),i("20d6"),i("7514"),i("ac6a"),i("386d"),i("c5f6"),i("2ef0")),s=i.n(o),r=i("9f5d"),c=i("d8bc"),l={name:"projectMemberMenu",props:{projectCode:{type:[String,Number],default:function(){return""}},taskCode:{type:[String,Number],default:function(){return""}}},data:function(){return{keyword:"",searching:!1,taskMemberLoading:!0,projectMemberLoading:!0,showInviteMember:!1,taskMemberList:[],projectMemberList:[],listTemp:[],projectMemberListCopy:[],initAllMember:!1}},created:function(){this.init()},watch:{keyword:function(){this.search()}},methods:{init:function(){var t=this;this.projectMemberLoading=!0,this.taskMemberLoading=!0,this.projectCode&&Object(r["c"])({projectCode:this.projectCode,pageSize:300}).then((function(e){t.projectMemberList=e.data.list,t.projectMemberListCopy=e.data.list,t.projectMemberLoading=!1})),this.taskCode&&Object(c["b"])({taskCode:this.taskCode,pageSize:300}).then((function(e){t.taskMemberList=e.data.list,e.data.list.forEach((function(e){t.listTemp.push(e.code)})),t.taskMemberLoading=!1}))},showMember:function(t){var e=!0;return this.taskMemberList.forEach((function(i){t.code==i.code&&(e=!1)})),e},showCheck:function(t){if("all"==t&&!this.initAllMember)return!1;var e=this.listTemp.find((function(e){return e==t}));return!!e||void 0},addToInvite:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e)return!1;"all"==t&&(this.initAllMember=!0);var i=this.listTemp.findIndex((function(e){return e==t}));-1!==i?this.listTemp.splice(i,1):this.listTemp.push(t)},inviteTaskMember:function(){var t=this,e=[];this.taskMemberList.forEach((function(i){var n=t.listTemp.findIndex((function(t){return t==i.code}));-1===n&&e.push(i.code)})),this.listTemp.forEach((function(i){var n=t.taskMemberList.findIndex((function(t){return i==t.code}));-1===n&&e.push(i)})),e?Object(c["a"])({memberCodes:JSON.stringify(e),taskCode:this.taskCode}).then((function(){t.$emit("close")})):this.$emit("close")},search:s.a.debounce((function(){var t=this;if(this.keyword=this.keyword.trim(),this.keyword||(this.projectMemberList=JSON.parse(JSON.stringify(this.projectMemberListCopy))),this.keyword.length<=1)return!1;this.searching=!0,this.projectMemberList=this.projectMemberList.filter((function(e){return-1!=e.name.indexOf(t.keyword)}))}),500)}},d=l,u=i("2877"),m=Object(u["a"])(d,n,a,!1,null,null,null);e["default"]=m.exports},f66c:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"member-menu"},[i("a-spin",{attrs:{spinning:t.listLoading||t.doListLoading}},[i("div",{staticClass:"search-content"},[i("a-input",{attrs:{size:"large",placeholder:"搜索"},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}},[i("a-icon",{attrs:{slot:"prefix",type:"search"},slot:"prefix"})],1)],1),i("div",{staticClass:"member-list"},[i("vue-scroll",[i("div",{directives:[{name:"show",rawName:"v-show",value:!t.keyword,expression:"!keyword"}],staticClass:"list-group"},[i("span",{staticClass:"title muted"},[t._v("执行者")]),t.doList.length||t.doListLoading?t._e():i("div",{staticClass:"member-list-item ant-list-item",on:{click:function(e){return t.assignTask(null)}}},[i("div",{staticClass:"ant-list-item-meta"},[i("div",{staticClass:"ant-list-item-meta-avatar"},[i("a-avatar",{attrs:{icon:"user"}})],1),i("div",{staticClass:"ant-list-item-meta-content"},[i("h4",{staticClass:"ant-list-item-meta-title"},[i("span",[t._v("待认领")])])])]),i("ul",{staticClass:"ant-list-item-action"},[i("li",[i("span",[i("a-icon",{attrs:{type:"check"}})],1)])])]),i("a-list",{directives:[{name:"show",rawName:"v-show",value:t.doList.length,expression:"doList.length"}],staticClass:"list-content",attrs:{itemLayout:"horizontal",dataSource:t.doList},scopedSlots:t._u([{key:"renderItem",fn:function(e){return i("a-list-item",{staticClass:"member-list-item"},[i("span",{attrs:{slot:"actions"},slot:"actions"},[i("a-icon",{directives:[{name:"show",rawName:"v-show",value:t.showCheck(e),expression:"showCheck(item)"}],attrs:{type:"check"}})],1),i("a-list-item-meta",[i("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.name))]),i("a-avatar",{attrs:{slot:"avatar",icon:"user",src:e.avatar},slot:"avatar"})],1)],1)}}])})],1),i("div",{staticClass:"list-group"},[i("span",{staticClass:"title muted"},[t._v("其他成员")]),t.doList.length?i("div",{staticClass:"member-list-item ant-list-item",on:{click:function(e){return t.assignTask(null)}}},[i("div",{staticClass:"ant-list-item-meta"},[i("div",{staticClass:"ant-list-item-meta-avatar"},[i("a-avatar",{attrs:{icon:"user"}})],1),i("div",{staticClass:"ant-list-item-meta-content"},[i("h4",{staticClass:"ant-list-item-meta-title"},[i("span",[t._v("待认领")])])])])]):t._e(),i("a-list",{staticClass:"list-content",attrs:{itemLayout:"horizontal",dataSource:t.list,locale:{emptyText:t.keyword&&t.keyword.length>1?"该成员不在任务成员列表中，你可以邀请他进来":""}},scopedSlots:t._u([{key:"renderItem",fn:function(e){return t.showMember(e)?i("a-list-item",{staticClass:"member-list-item",nativeOn:{click:function(i){return t.assignTask(e.code,e)}}},[i("a-list-item-meta",[i("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.name))]),i("a-avatar",{attrs:{slot:"avatar",icon:"user",src:e.avatar},slot:"avatar"})],1)],1):t._e()}}],null,!0)})],1)])],1),i("div",{staticClass:"footer"},[i("a-button",{attrs:{type:"primary",size:"large",block:""},on:{click:t.inviteProjectMember}},[t._v("邀请新成员")])],1)])],1)},a=[],o=(i("7f7f"),i("ac6a"),i("386d"),i("c5f6"),i("2ef0")),s=i.n(o),r=i("c030"),c=i("22b6");function l(t){return c["a"].post("project/task_member",t)}var d=i("ca8d"),u={name:"taskMemberMenu",props:{projectCode:{type:[String,Number],default:function(){return""}},taskCode:{type:[String,Number],default:function(){return""}},isCommit:{type:[Boolean],default:function(){return!0}}},data:function(){return{keyword:"",searching:!1,doListLoading:!1,listLoading:!1,showInviteMember:!1,doList:[],list:[],listTemp:[]}},created:function(){this.init()},watch:{keyword:function(){this.search()}},methods:{init:function(){var t=this;this.projectCode&&(this.listLoading=!0,Object(r["c"])({projectCode:this.projectCode,pageSize:300}).then((function(e){t.list=e.data.list,t.listTemp=e.data.list,t.listLoading=!1}))),this.taskCode&&(this.doListLoading=!0,l({taskCode:this.taskCode,pageSize:300}).then((function(e){t.doList=e.data.list.filter((function(t){return t.is_executor})),t.doListLoading=!1})))},showMember:function(t){var e=!0;return this.doList.forEach((function(i){t.code==i.code&&(e=!1)})),e},showCheck:function(t){if(t.is_executor)return!0},assignTask:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.isCommit?Object(d["b"])({taskCode:this.taskCode,executorCode:t}).then((function(){e.$emit("close",i)})):this.$emit("close",i)},inviteProjectMember:function(){this.$emit("inviteProjectMember")},search:s.a.debounce((function(){var t=this;if(this.keyword=this.keyword.trim(),this.keyword||(this.list=JSON.parse(JSON.stringify(this.listTemp))),this.keyword.length<=1)return!1;this.searching=!0,this.list=this.list.filter((function(e){return-1!=e.name.indexOf(t.keyword)}))}),500)}},m=u,h=i("2877"),p=Object(h["a"])(m,n,a,!1,null,null,null);e["default"]=p.exports}}]);