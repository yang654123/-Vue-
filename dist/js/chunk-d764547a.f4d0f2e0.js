(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d764547a"],{a8ef:function(e,t,a){"use strict";var n=a("ef8e"),r=a.n(n);r.a},af47:function(e,t,a){"use strict";var n=a("e80f"),r=a.n(n);r.a},bd87:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"account-setting"},[a("div",{staticClass:"layout-item left"},[a("div",{staticClass:"left-content"},[a("div",{staticClass:"search-type"},[a("a-menu",{attrs:{mode:"inline",selectedKeys:e.keys},on:{click:e.menuClick}},[a("a-menu-item",{key:"base"},[a("span",[e._v("基本设置")])]),a("a-menu-item",{key:"security"},[a("span",[e._v("安全设置")])])],1)],1)])])])},r=[],s={name:"accountSetting",props:{keys:{type:Array,default:function(){return["base"]}}},methods:{menuClick:function(e){var t=e.key,a="";switch(t){case"base":a="/account/setting/base";break;case"security":a="/account/setting/security"}this.$router.push(a)}}},i=s,o=(a("af47"),a("2877")),c=Object(o["a"])(i,n,r,!1,null,null,null);t["default"]=c.exports},becf:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"account-setting-base"},[a("wrapper-content",{attrs:{showHeader:!1}},[a("div",{staticClass:"setting-content"},[a("account-setting"),a("div",{staticClass:"layout-item right"},[a("div",{staticClass:"setting-info-title"},[a("span",[e._v("基本设置")])]),a("div",{staticClass:"setting-info"},[a("div",{staticClass:"setting-info-content"},[a("a-form",{attrs:{layout:"vertical",form:e.form,hideRequiredMark:""},on:{submit:function(t){return t.preventDefault(),e.handleSubmit(t)}}},[a("a-form-item",{attrs:{label:"昵称"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:"请输入您的邮箱"}]}],expression:"[\n                    'name',\n                    {rules: [{required: true, message: '请输入您的邮箱'}]},\n                  ]"}]})],1),a("a-form-item",{attrs:{label:"简介"}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["description"],expression:"['description']"}],attrs:{placeholder:"个人简介",rows:4}})],1),a("a-form-item",[a("a-button",{attrs:{type:"primary",htmlType:"submit",loading:e.loading}},[e._v("更新基本信息")])],1)],1)],1),a("div",{staticClass:"setting-info-avatar"},[a("span",[e._v("头像")]),a("a-avatar",{staticClass:"avatar",attrs:{size:150,src:e.userInfo.avatar}},[e._v(e._s(e.userInfo.name))]),a("a-upload",{staticClass:"avatar-uploader",attrs:{name:"avatar",showUploadList:!1,data:{code:e.userInfo.code},headers:e.headers,action:e.uploadAction,beforeUpload:e.beforeUpload},on:{change:e.handleChange}},[a("a-button",{staticClass:"upload",attrs:{icon:"upload"}},[e._v("更换头像")])],1)],1)])])],1)])],1)},r=[],s=(a("8e6e"),a("ac6a"),a("456d"),a("7f7f"),a("bd86")),i=a("5880"),o=a("bd87"),c=a("2f14"),u=a("0672"),l=(a("68fe"),a("97a8"));function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(Object(a),!0).forEach((function(t){Object(s["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var p={name:"settingBase",components:{AccountSetting:o["default"]},data:function(){return{loading:!1,form:this.$form.createForm(this),uploadLoading:!1,uploadAction:Object(c["c"])("project/index/uploadAvatar")}},computed:d({},Object(i["mapState"])({userInfo:function(e){return e.userInfo}}),{headers:function(){return Object(c["d"])()}}),mounted:function(){var e=this;this.$nextTick((function(){e.form.setFieldsValue({email:e.userInfo.email,name:e.userInfo.name,description:e.userInfo.description})}))},methods:{handleSubmit:function(){var e=this;this.form.validateFields((function(t,a){if(!t){var n=e.form.getFieldsValue();n.code=e.userInfo.code,n.avatar=e.userInfo.avatar,Object(u["m"])(n).then((function(t){e.loading=!1,Object(c["a"])(t)&&(e.userInfo.email=n.email,e.userInfo.name=n.name,e.userInfo.name=n.name,e.userInfo.description=n.description,e.$store.dispatch("SET_USER",e.userInfo))}))}}))},handleChange:function(e){var t=this;if("uploading"===e.file.status)return Object(l["b"])("正在上传，请稍后...","message","loading",0),void(this.uploadLoading=!0);"done"===e.file.status&&Object(c["e"])(e.file.originFileObj,(function(a){t.userInfo.avatar=e.file.response.data.url,t.$store.dispatch("SET_USER",t.userInfo),t.uploadLoading=!1,setTimeout((function(){Object(l["a"])()}),500)}))},beforeUpload:function(e){var t=e.size/1024/1024<2;return t||this.$message.error("图片不能超过2MB!"),t}}},m=p,v=(a("a8ef"),a("2877")),b=Object(v["a"])(m,n,r,!1,null,null,null);t["default"]=b.exports},e80f:function(e,t,a){},ef8e:function(e,t,a){}}]);