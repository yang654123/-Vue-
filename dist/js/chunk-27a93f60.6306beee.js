(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-27a93f60"],{"48f7":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-skeleton",{attrs:{active:"",loading:t.loading,paragraph:{rows:17}}},[a("a-card",{attrs:{bordered:!1}},[a("a-alert",{attrs:{type:"info",showIcon:!0}},[a("div",{attrs:{slot:"message"},slot:"message"},[t._v("\n        上次更新时间："+t._s(this.time)+"\n        "),a("a-divider",{attrs:{type:"vertical"}}),a("a",{on:{click:t.handleClickUpdate}},[t._v("立即更新")])],1)]),a("a-table",{staticStyle:{"margin-top":"20px"},attrs:{rowKey:"id",size:"middle",columns:t.columns,dataSource:t.dataSource,pagination:!1,loading:t.tableLoading},scopedSlots:t._u([{key:"param",fn:function(e,o){return[a("a-tag",{attrs:{color:t.textInfo[o.param].color}},[t._v(t._s(e))])]}},{key:"text",fn:function(e,a){return[t._v(t._s(t.textInfo[a.param].text))]}},{key:"value",fn:function(e,a){return[t._v(t._s(e)+" "+t._s(t.textInfo[a.param].unit))]}}])})],1)],1)},n=[],r=(a("c5f6"),a("7f7f"),a("ac6a"),a("5df3"),a("0fea"));moment.locale("zh-cn");var s={data:function(){return{time:"",loading:!0,tableLoading:!0,columns:[{title:"参数",width:"30%",dataIndex:"param",scopedSlots:{customRender:"param"}},{title:"描述",width:"40%",dataIndex:"text",scopedSlots:{customRender:"text"}},{title:"当前值",width:"30%",dataIndex:"value",scopedSlots:{customRender:"value"}}],dataSource:[],textInfo:{"system.cpu.count":{color:"green",text:"CPU 数量",unit:"核"},"system.cpu.usage":{color:"green",text:"系统 CPU 使用率",unit:"%"},"process.start.time":{color:"purple",text:"应用启动时间点",unit:""},"process.uptime":{color:"purple",text:"应用已运行时间",unit:"秒"},"process.cpu.usage":{color:"purple",text:"当前应用 CPU 使用率",unit:"%"}},moreInfo:{}}},mounted:function(){this.loadTomcatInfo()},methods:{handleClickUpdate:function(){this.loadTomcatInfo()},loadTomcatInfo:function(){var t=this;this.tableLoading=!0,this.time=moment().format("YYYY年MM月DD日 HH时mm分ss秒"),Promise.all([Object(r["getAction"])("actuator/metrics/system.cpu.count"),Object(r["getAction"])("actuator/metrics/system.cpu.usage"),Object(r["getAction"])("actuator/metrics/process.start.time"),Object(r["getAction"])("actuator/metrics/process.uptime"),Object(r["getAction"])("actuator/metrics/process.cpu.usage")]).then((function(e){var a=[];e.forEach((function(e,o){var n=t.moreInfo[e.name];n instanceof Array||(n=[""]),n.forEach((function(n,r){var s=e.name+n,c=e.measurements[r].value;"system.cpu.usage"!==s&&"process.cpu.usage"!==s||(c=t.convert(c,Number)),"process.start.time"===s&&(c=t.convert(c,Date)),a.push({id:s+o,param:s,text:"false value",value:c})}))})),t.dataSource=a})).catch((function(e){console.error(e),t.$message.error("获取服务器信息失败")})).finally((function(){t.loading=!1,t.tableLoading=!1}))},convert:function(t,e){return e===Number?Number(100*t).toFixed(2):e===Date?moment(1e3*t).format("YYYY-MM-DD HH:mm:ss"):t}}},c=s,i=a("2877"),u=Object(i["a"])(c,o,n,!1,null,null,null);e["default"]=u.exports},"5df3":function(t,e,a){"use strict";var o=a("02f4")(!0);a("01f9")(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,a=this._i;return a>=e.length?{value:void 0,done:!0}:(t=o(e,a),this._i+=t.length,{value:t,done:!1})}))}}]);