(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3665c0a2"],{"24d2":function(t,e,o){"use strict";o.d(e,"a",(function(){return n})),o.d(e,"c",(function(){return r})),o.d(e,"b",(function(){return i}));var a=o("22b6");function n(t){return a["a"].post("project/project",t)}function r(t){return a["a"].post("project/project/selfList",t)}function i(t){return a["a"].post("project/project/read",{projectCode:t})}},"653e":function(t,e,o){},7934:function(t,e,o){"use strict";var a=o("b845"),n=o.n(a);n.a},"81fe":function(t,e,o){"use strict";o.d(e,"c",(function(){return a})),o.d(e,"b",(function(){return n})),o.d(e,"a",(function(){return r})),o.d(e,"d",(function(){return i}));o("3b2b"),o("a481");var a=function(t,e){e||(e=moment());var o=moment(e).diff(moment(t),"hours");if(o<=1)return moment(t).fromNow();moment(e).get("date"),moment(t).get("date");var a=moment(t).format("H:mm"),n=moment(t).format("YYYY-MM-DD"),r=moment().weekday(0).format("YYYY-MM-DD"),i=moment().weekday(6).format("YYYY-MM-DD"),s="";return s=n<r?"[上周]dd "+a:n>i?"[下周]dd "+a:"[周]dd "+a,moment(t).calendar(null,{sameDay:"[今天 ]"+moment(t).format("H:mm"),nextDay:"[明天 ]"+a,nextWeek:s,lastDay:"[昨天 ]"+a,lastWeek:s,sameElse:"M月D日 H:mm"})},n=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=moment(t).format("H:mm");e||(o="");var a=moment(t).format("YYYY-MM-DD"),n=moment().weekday(0).format("YYYY-MM-DD"),r=moment().weekday(6).format("YYYY-MM-DD"),i="";return i=a<n?"[上周]dd "+o:a>r?"[下周]dd "+o:"[周]dd "+o,moment(t).calendar(null,{sameDay:"[今天 ]"+moment(t).format("H:mm"),nextDay:"[明天 ]"+o,nextWeek:i,lastDay:"[昨天 ]"+o,lastWeek:i,sameElse:"M月D日 H:mm"})},r=function(t,e){return!e&&t?n(t)+" 开始":t?n(t)+" - "+n(e):n(e)+" 截止"},i=function(t){var e="";void 0==t&&(t=new Date);var o=t.getHours();return o>=0&&o<=4&&(e="深夜了，注意身体，"),o>=4&&o<7&&(e="清晨好， "),o>=7&&o<12&&(e="早安，"),o>=12&&o<=13&&(e="午饭时间到了，"),o>=13&&o<=17&&(e="下午好，"),o>=17&&o<=18&&(e="进入傍晚了，"),o>=18&&o<=20&&(e="吃过晚饭了吗，"),o>=20&&o<=24&&(e="在加班吗？辛苦了，"),e}},b845:function(t,e,o){},bc46:function(t,e,o){"use strict";var a=o("653e"),n=o.n(a);n.a},ca8d:function(t,e,o){"use strict";o.d(e,"j",(function(){return n})),o.d(e,"h",(function(){return r})),o.d(e,"o",(function(){return i})),o.d(e,"t",(function(){return s})),o.d(e,"r",(function(){return c})),o.d(e,"m",(function(){return l})),o.d(e,"u",(function(){return u})),o.d(e,"q",(function(){return d})),o.d(e,"b",(function(){return p})),o.d(e,"c",(function(){return f})),o.d(e,"s",(function(){return m})),o.d(e,"p",(function(){return v})),o.d(e,"l",(function(){return h})),o.d(e,"k",(function(){return j})),o.d(e,"e",(function(){return g})),o.d(e,"d",(function(){return b})),o.d(e,"i",(function(){return k})),o.d(e,"a",(function(){return y})),o.d(e,"n",(function(){return _})),o.d(e,"g",(function(){return w})),o.d(e,"f",(function(){return C}));var a=o("22b6");function n(t){return a["a"].post("project/task",t)}function r(t){return a["a"].post("project/task/getListByTaskTag",t)}function i(t){return a["a"].post("project/task/selfList",t)}function s(t){return a["a"].post("project/task/taskSources",t)}function c(t){return a["a"].post("project/task/sort",t)}function l(t){return a["a"].post("project/task/save",t)}function u(t){return a["a"].post("project/task/taskToTags",t)}function d(t){return a["a"].post("project/task/setTag",t)}function p(t){return a["a"].post("project/task/assignTask",t)}function f(t){return a["a"].post("project/task/batchAssignTask",t)}function m(t,e){return a["a"].post("project/task/taskDone",{taskCode:t,done:e})}function v(t,e){return a["a"].post("project/task/setPrivate",{taskCode:t,private:e})}function h(t){return a["a"].post("project/task/recycleBatch",t)}function j(t){return a["a"].post("project/task/recovery",{taskCode:t})}function g(t){return a["a"].post("project/task/delete",{taskCode:t})}function b(t){return a["a"].post("project/task/dateTotalForProject",t)}function k(t){return a["a"].post("project/project/getLogBySelfProject",t)}function y(t){return a["a"].post("project/task/_taskWorkTimeList",t)}function _(t){return a["a"].post("project/task/saveTaskWorkTime",t)}function w(t){return a["a"].post("project/task/editTaskWorkTime",t)}function C(t){return a["a"].post("project/task/delTaskWorkTime",t)}},e4e3:function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"project-space-overview",class:t.project.task_board_theme},[o("div",{staticClass:"project-navigation"},[o("div",{staticClass:"project-nav-header"},[o("a-breadcrumb",[o("a-breadcrumb-item",[o("router-link",{attrs:{to:"/home"}},[o("a-icon",{attrs:{type:"home"}}),t._v("首页\n          ")],1)],1),o("a-breadcrumb-item",[o("project-select",{staticClass:"nav-title",staticStyle:{display:"inline-block"},attrs:{code:t.code}}),o("span",{staticClass:"actions"},[o("a-tooltip",{attrs:{mouseEnterDelay:.3,title:t.project.collected?"取消收藏":"加入收藏"},on:{click:t.collectProject}},[o("a-icon",{directives:[{name:"show",rawName:"v-show",value:!t.project.collected,expression:"!project.collected"}],staticStyle:{color:"grey"},attrs:{type:"star",theme:"filled"}}),o("a-icon",{directives:[{name:"show",rawName:"v-show",value:t.project.collected,expression:"project.collected"}],staticStyle:{color:"#ffaf38"},attrs:{type:"star",theme:"filled"}})],1)],1),0===t.project.private?o("span",{staticClass:"label label-normal"},[o("a-icon",{attrs:{type:"global"}}),t._v("公开\n          ")],1):t._e()],1)],1)],1),o("section",{staticClass:"nav-body"},[o("ul",{staticClass:"nav-wrapper nav nav-underscore pull-left"},[o("li",[o("a",{staticClass:"app",attrs:{"data-app":"tasks"},on:{click:function(e){return t.$router.push("/project/space/task/"+t.code)}}},[t._v("任务")])]),o("li",{},[o("a",{staticClass:"app",attrs:{"data-app":"works"},on:{click:function(e){return t.$router.push("/project/space/files/"+t.code)}}},[t._v("文件")])]),o("li",{staticClass:"actives"},[o("a",{staticClass:"app",attrs:{"data-app":"build"},on:{click:function(e){return t.$router.push("/project/space/overview/"+t.code)}}},[t._v("概览")])]),o("li",{},[o("a",{staticClass:"app",attrs:{"data-app":"build"},on:{click:function(e){return t.$router.push("/project/space/features/"+t.code)}}},[t._v("版本")])])])])]),o("wrapper-content",{attrs:{showHeader:!1}},[o("div",{staticClass:"overview-item m-b"},[o("div",{staticClass:"content-item"},[o("h3",{staticClass:"m-sm m-b text-center"},[t._v("任务燃尽图")]),o("a-spin",{attrs:{spinning:t.burnoutMap.loading}},[t.burnoutMap.loading?t._e():o("ve-line",{attrs:{data:t.burnoutMap.chartData,settings:t.burnoutMap.chartSettings,extend:t.burnoutMap.chartExtend,series:t.burnoutMap.series,"legend-visible":!1,height:"200px"}})],1)],1)]),o("div",{staticClass:"overview-item"},[o("div",{staticClass:"content-left"},[o("div",{staticClass:"content-item log-list"},[o("div",{staticClass:"title"},[t._v("\n            项目信息\n            "),o("a-tooltip",{attrs:{mouseEnterDelay:.5}},[o("template",{slot:"title"},[o("span",[t._v("添加信息")])]),o("a",{staticClass:"pull-right muted",on:{click:function(e){return t.createInfo()}}},[o("a-icon",{attrs:{type:"plus-circle"}})],1)],2)],1),o("div",{staticClass:"list-content"},[o("a-list",t._l(t.projectInfoList,(function(e,a){return o("a-list-item",{key:a},[o("a-list-item-meta",[o("div",{attrs:{slot:"title"},slot:"title"},[o("a-tooltip",{attrs:{mouseEnterDelay:.5}},[o("template",{slot:"title"},[o("span",[t._v("\n                          "+t._s(e.description?e.description:"暂无描述")+"\n                        ")])]),o("span",[t._v(t._s(e.name))])],2)],1),o("div",{attrs:{slot:"description"},slot:"description"},[t._v(t._s(e.value))])]),o("span",{attrs:{slot:"actions"},on:{click:function(o){return t.editInfo(e)}},slot:"actions"},[o("a-tooltip",{attrs:{title:"编辑"}},[o("a-icon",{attrs:{type:"edit"}})],1)],1),o("span",{attrs:{slot:"actions"},on:{click:function(o){return t.delInfo(e,a)}},slot:"actions"},[o("a-tooltip",{attrs:{title:"删除"}},[o("a-icon",{attrs:{type:"delete"}})],1)],1)],1)})),1)],1)]),o("div",{staticClass:"content-item log-list"},[o("div",{staticClass:"title"},[t._v("项目动态")]),o("div",{staticClass:"list-content"},[o("a-list",[t.showLoadingMore?o("div",{style:{textAlign:"center",marginTop:"12px",height:"32px",lineHeight:"32px"},attrs:{slot:"loadMore"},slot:"loadMore"},[t.loadingMore?o("a-spin"):o("a-button",{on:{click:t.onLoadMore}},[t._v("查看更多动态")])],1):t._e(),t._l(t.activities,(function(e,a){return o("a-list-item",{key:a},[o("a-list-item-meta",[o("a-avatar",{attrs:{slot:"avatar",src:e.member_avatar},slot:"avatar"}),o("div",{attrs:{slot:"title"},slot:"title"},[o("span",[t._v(t._s(e.member_name))]),0==e.is_comment?o("span",[o("span",{domProps:{innerHTML:t._s(e.remark)}})]):t._e(),t._v(" \n                    "),1==e.is_comment?[t._v("\n                      发表了评论\n                      "),o("p",{staticClass:"comment-text"},[t._v(t._s(e.content))])]:t._e(),o("span",{staticClass:"right-item muted"},[t._v("\n                      "+t._s(t.formatTime(e.create_time))+"\n                    ")])],2),o("div",{attrs:{slot:"description"},slot:"description"},["task"==e.action_type?[o("router-link",{staticClass:"muted",attrs:{to:"/project/space/task/"+e.project_code+"/detail/"+e.source_code}},[t._v(t._s(e.sourceInfo.name))])]:t._e(),"project"==e.action_type?[o("span",{domProps:{innerHTML:t._s(e.content)}})]:t._e()],2)],1)],1)}))],2)],1)])]),o("div",{staticClass:"content-right"},[o("div",{staticClass:"content-item"},[o("div",{staticClass:"list-content"},[o("div",{staticClass:"default-list"},[o("a-list",t._l([t.project],(function(e,a){return o("a-list-item",{key:a},[o("a-list-item-meta",[o("a-avatar",{attrs:{slot:"avatar",src:e.cover},slot:"avatar"}),o("div",{attrs:{slot:"title"},slot:"title"},[o("span",[t._v(t._s(e.name))])]),o("div",{attrs:{slot:"description"},slot:"description"},[t._v("\n                      "+t._s(e.owner_name)+" 创建于\n                      "+t._s(t.moment(e.create_time).format("YYYY年MM月DD日"))+"\n                    ")])],1)],1)})),1)],1)]),o("p",{},[t._v(t._s(t.project.description))]),o("div",{staticClass:"project-date m-b-lg m-t-lg"},[o("div",{staticClass:"muted m-b-xs"},[o("a-tag",{attrs:{color:"green"}},[t._v("项目周期")])],1),o("a-range-picker",{attrs:{format:"YYYY年MM月DD日"},on:{change:t.ondateChange},model:{value:t.projectDate,callback:function(e){t.projectDate=e},expression:"projectDate"}})],1),o("div",{staticClass:"project-stats m-b-lg"},[o("div",{staticClass:"muted m-b-xs"},[o("a-tag",{attrs:{color:"green"}},[t._v("项目统计")])],1),o("div",{staticClass:"stats-content"},t._l(t.projectStats,(function(e,a){return o("div",{key:a,staticClass:"stats-item"},[o("div",{staticClass:"stats-title muted"},[t._v(t._s(e.title))]),o("div",{staticClass:"stats-number"},[t._v(t._s(e.number))]),o("a-tooltip",{attrs:{placement:"right",mouseEnterDelay:.3,title:e.schedule+"%"}},[o("a-progress",{attrs:{strokeColor:"#1890ff",strokeWidth:3,showInfo:!1,percent:e.schedule}})],1)],1)})),0)]),o("div",[o("div",{staticClass:"muted"},[o("a-tag",{attrs:{color:"green"}},[t._v("新增任务趋势")])],1),o("ve-line",{attrs:{data:t.chartData,settings:t.chartSettings,extend:t.chartExtend,"legend-visible":!1,height:"200px"}})],1)])])])]),o("a-modal",{staticClass:"project-info",attrs:{width:400,title:t.infoModal.modalTitle,confirmLoading:t.infoModal.loading},on:{ok:t.handleSubmit},model:{value:t.infoModal.modalStatus,callback:function(e){t.$set(t.infoModal,"modalStatus",e)},expression:"infoModal.modalStatus"}},[o("a-form",{attrs:{form:t.infoModal.form},on:{submit:function(e){return e.preventDefault(),t.handleSubmit(e)}}},[o("a-form-item",[o("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:"请输入名称"}]}],expression:"[\n            'name',\n            {rules: [{required: true, message: '请输入名称'}]},\n          ]"}],attrs:{placeholder:"名称"}})],1),o("a-form-item",[o("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["value"],expression:"['value']"}],attrs:{placeholder:"内容",rows:2}})],1),o("a-form-item",[o("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["description"],expression:"['description']"}],attrs:{placeholder:"描述",rows:2}})],1),o("a-form-item")],1)],1)],1)},n=[],r=(o("7f7f"),o("ac6a"),o("c3da")),i=o.n(r),s=o("6be7"),c=o("22b6");function l(t){return c["a"].post("project/project_info",t)}function u(t){var e="project/project_info/save";return t.infoCode&&(e="project/project_info/edit"),c["a"].post(e,t)}function d(t){return c["a"].post("project/project_info/delete",t)}var p=o("e55b"),f=o("2f14"),m=o("ca8d"),v=o("81fe"),h=o("1b80"),j=o("f8c7"),g={name:"project-space-overview",components:{VeLine:i.a,projectSelect:j["default"]},mixins:[h["a"]],data:function(){return{code:this.$route.params.code,loading:!0,project:{task_board_theme:"simple"},projectDate:[],activities:[],projectInfoList:[],showLoadingMore:!1,loadingMore:!1,infoModal:{form:this.$form.createForm(this),newData:{code:""},loading:!1,modalStatus:!1,modalTitle:"项目信息"},burnoutMap:{loading:!0,chartData:{columns:["日期","实际剩余任务","理想剩余任务"],rows:[]},series:[{type:"line",name:"实际剩余任务",smooth:!1,color:"#1890ff",data:[]},{type:"line",name:"理想剩余任务",color:"#52C41A",smooth:!1,lineStyle:{type:"dashed"},data:[]}],chartSettings:{},chartExtend:{grid:{left:"5",right:"20",top:"10",bottom:"0"},xAxis:{show:!0,splitLine:{show:!1}},yAxis:{show:!0,splitLine:{show:!0,lineStyle:{type:"dashed",color:["#e4e4e4"]}}},tooltip:{backgroundColor:"#fff",textStyle:{color:"#333"},borderWidth:1,borderColor:"#e8e8e8"},axisPointer:{lineStyle:{width:0}}}},chartData:{columns:["日期","任务"],rows:[]},chartSettings:{area:!0,itemStyle:{color:"#1890ff"},areaStyle:{color:"#e6f7ff"}},chartExtend:{grid:{left:"-20",right:"0",top:"10",bottom:"0"},xAxis:{show:!1},yAxis:{show:!1},tooltip:{backgroundColor:"#fff",textStyle:{color:"#333"},borderWidth:1,borderColor:"#e8e8e8"},axisPointer:{lineStyle:{width:0}}},projectStats:[{title:"未完成",key:"unDone",number:0,schedule:0},{title:"已完成",key:"done",number:0,schedule:0},{title:"已逾期",key:"overdue",number:0,schedule:0},{title:"待认领",key:"toBeAssign",number:0,schedule:0},{title:"今日到期",key:"expireToday",number:0,schedule:0},{title:"逾期完成",key:"doneOverdue",number:0,schedule:0}]}},created:function(){this.getProject(),this.init()},methods:{moment:moment,init:function(){this.getProjectInfoList(),this.getProjectLog(),this.overviewForProject(),this.getProjectStats(),this.getProjectReport()},getProject:function(){var t=this;this.loading=!0,Object(s["h"])(this.code).then((function(e){t.loading=!1,t.project=e.data,t.project.begin_time&&(t.projectDate=[moment(t.project.begin_time),moment(t.project.end_time)])}))},getProjectReport:function(){var t=this;Object(s["a"])({projectCode:this.code}).then((function(e){var o=[];e.data.date.forEach((function(t){o.push({"日期":t})})),t.burnoutMap.loading=!1,t.burnoutMap.chartData.rows=o,t.burnoutMap.series[0].data=e.data.undoneTask,t.burnoutMap.series[1].data=e.data.baseLineList}))},getProjectLog:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=this;t&&(e.pagination.page=1,e.pagination.pageSize=20,e.showLoadingMore=!1),this.requestData.projectCode=this.code,Object(m["i"])(this.requestData).then((function(o){var a=[];o.data.list.forEach((function(t){a.push(t)})),t&&(e.activities=[]),e.activities=e.activities.concat(a),e.pagination.total=o.data.total,e.showLoadingMore=e.pagination.total>e.activities.length,e.loading=!1,e.loadingMore=!1}))},getProjectInfoList:function(){var t=this;l({projectCode:t.code}).then((function(e){t.projectInfoList=e.data}))},getProjectStats:function(){var t=this;Object(s["b"])({projectCode:this.code}).then((function(e){var o=e.data,a=o["total"];t.projectStats.forEach((function(t,e){t.number=o[t.key],a&&(t.schedule=parseInt(t.number/a*100))}))}))},onLoadMore:function(){this.loadingMore=!0,this.pagination.page++,this.getProjectLog(!1)},overviewForProject:function(){var t=this;Object(m["d"])({projectCode:this.code}).then((function(e){var o=[];e.data.forEach((function(t){o.push({"日期":moment(t.date).format("M月D日"),"任务":t.total})})),t.chartData.rows=o}))},createInfo:function(){var t=this;t.infoModal.newData={code:""},setTimeout((function(){t.infoModal.form&&t.infoModal.form.resetFields()}),0),t.infoModal.modalStatus=!0,t.infoModal.modalTitle="添加字段"},editInfo:function(t){var e=this;e.infoModal.newData=t,e.infoModal.modalStatus=!0,setTimeout((function(){e.infoModal.modalTitle="编辑字段",e.infoModal.form.setFieldsValue({name:t.name,value:t.value,description:t.description})}),0)},delInfo:function(t,e){var o=this;o.$confirm({title:"确定删除当前字段吗？",okText:"删除",okType:"danger",cancelText:"再想想",onOk:function(){return d({infoCode:t.code}).then((function(){o.projectInfoList.splice(e,1)})),Promise.resolve()}})},handleSubmit:function(){var t=this;t.infoModal.form.validateFields((function(e){e||t.handleOk()}))},handleOk:function(){var t=this;t.infoModal.loading=!0;var e=t.infoModal.form.getFieldsValue();t.infoModal.newData.code?e.infoCode=t.infoModal.newData.code:Object.assign(e,t.infoModal.newData),e.projectCode=t.code,console.log(e),u(e).then((function(e){t.infoModal.loading=!1,Object(f["a"])(e)&&(t.infoModal.form.resetFields(),t.infoModal.newData={code:0},t.infoModal.modalStatus=!1,t.getProjectInfoList())}))},collectProject:function(){var t=this,e=this.project.collected?"cancel":"collect";Object(p["a"])(this.project.code,e).then((function(e){Object(f["a"])(e)&&(t.project.collected=!t.project.collected)}))},ondateChange:function(t){console.log(t);var e=this.project;Object(s["e"])({projectCode:e.code,begin_time:t.length?t[0].format("YYYY-MM-DD"):"",end_time:t.length?t[1].format("YYYY-MM-DD"):""})},formatTime:function(t){return Object(v["c"])(t)}}},b=g,k=(o("bc46"),o("2877")),y=Object(k["a"])(b,a,n,!1,null,null,null);e["default"]=y.exports},e55b:function(t,e,o){"use strict";o.d(e,"a",(function(){return n}));var a=o("22b6");function n(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"collect";return a["a"].post("project/project_collect/collect",{type:e,projectCode:t})}},f8c7:function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return t.currentProject?o("div",{attrs:{id:"project-select"}},[o("a-dropdown",{staticClass:"action-item",attrs:{trigger:["click"],placement:"bottomCenter"},model:{value:t.visibleMenu,callback:function(e){t.visibleMenu=e},expression:"visibleMenu"}},[o("a-tooltip",{attrs:{mouseEnterDelay:.3,title:t.currentProject.name}},[o("a",{staticClass:"project-select",staticStyle:{color:"#333"},on:{click:function(e){t.visibleMenu=!0}}},[o("span",[t._v(t._s(t.currentProject.name))]),o("span",{staticClass:"m-l-xs"},[o("a-icon",{attrs:{type:"down"}})],1)])]),o("div",{staticClass:"middle-menu member-menu project-select-menu",attrs:{slot:"overlay"},slot:"overlay"},[o("div",{staticClass:"search-content"},[o("a-input",{attrs:{size:"large",placeholder:"搜索"},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}},[o("a-icon",{attrs:{slot:"prefix",type:"search"},slot:"prefix"})],1)],1),o("div",{staticClass:"member-list"},[o("vue-scroll",[o("div",{staticClass:"list-group"},[o("a-list",{staticClass:"list-content",attrs:{itemLayout:"horizontal",dataSource:t.projectList,locale:{emptyText:t.keyword&&t.keyword.length>1?"没有找到该项目":""}},scopedSlots:t._u([{key:"renderItem",fn:function(e){return o("a-list-item",{staticClass:"member-list-item",nativeOn:{click:function(o){return t.changeProject(e.code)}}},[o("span",{attrs:{slot:"actions"},slot:"actions"},[o("a-icon",{directives:[{name:"show",rawName:"v-show",value:t.showCheck(e.code),expression:"showCheck(item.code)"}],attrs:{type:"check"}})],1),o("a-list-item-meta",[o("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.name))]),o("a-avatar",{attrs:{slot:"avatar",icon:"user",src:e.cover},slot:"avatar"})],1)],1)}}],null,!1,3141279394)})],1)])],1)])],1)],1):t._e()},n=[],r=(o("8e6e"),o("ac6a"),o("456d"),o("7f7f"),o("386d"),o("bd86")),i=o("2ef0"),s=o.n(i),c=o("5880"),l=o("24d2"),u=o("1b80");function d(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,a)}return o}function p(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?d(Object(o),!0).forEach((function(e){Object(r["a"])(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):d(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}var f={name:"ProjectSelect",props:{code:{type:[String],default:function(){return""}}},data:function(){return{visibleMenu:!1,keyword:"",loading:!1,currentProject:null,projectList:[],projectListCopy:[],projectTotal:0}},mixins:[u["a"]],computed:p({},Object(c["mapState"])({currentOrganization:function(t){return t.currentOrganization},organizationList:function(t){return t.organizationList}})),watch:{code:function(){this.init()},keyword:function(){this.search()}},created:function(){this.init()},methods:{init:function(){this.getProject(),this.getProjectList(!0)},getProject:function(){var t=this;Object(l["b"])(this.code).then((function(e){t.currentProject=e.data}))},getProjectList:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.loading=e,this.requestData.pageSize=50,this.requestData.archive=-1,Object(l["c"])(this.requestData).then((function(e){t.projectList=e.data.list,t.projectListCopy=e.data.list,t.projectTotal=e.data.total,t.loading=!1}))},changeProject:function(t){this.visibleMenu=!1,this.$router.push("/project/space/task/"+t)},showCheck:function(t){if(t==this.code)return!0},search:s.a.debounce((function(){var t=this;if(this.keyword=this.keyword.trim(),this.keyword||(this.projectList=JSON.parse(JSON.stringify(this.projectListCopy))),this.keyword.length<=1)return!1;this.projectList=this.projectList.filter((function(e){return-1!=e.name.indexOf(t.keyword)}))}),500),getPopup:function(){return document.getElementById("project-select")}}},m=f,v=(o("7934"),o("2877")),h=Object(v["a"])(m,a,n,!1,null,null,null);e["default"]=h.exports}}]);