(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6773e5e9"],{"01fa":function(t,e,n){},"0600":function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.userInfo?n("div",[n("a-dropdown",{staticClass:"action-item",attrs:{placement:"bottomRight"}},[n("div",{staticClass:"user-info"},[n("a-avatar",{attrs:{src:t.userInfo.avatar,alt:""}},[t._v(t._s(t.userInfo.name))]),n("span",[t._v(t._s(t.userInfo.name))])],1),n("a-menu",{staticClass:"middle-menu",attrs:{slot:"overlay",selectable:!1},on:{click:t.userAction},slot:"overlay"},[n("a-menu-item",{key:"setting"},[n("a",{attrs:{href:"javascript:;"}},[n("a-icon",{attrs:{type:"user"}}),t._v("个人设置\n        ")],1)]),n("a-menu-item",{key:"theme"},[n("a",{attrs:{href:"javascript:;"}},[n("a-icon",{attrs:{type:"swap"}}),t._v("切换主题\n        ")],1)]),n("a-menu-divider"),n("a-menu-item",{key:"logout"},[n("a",{attrs:{href:"javascript:;"}},[n("a-icon",{attrs:{type:"logout"}}),t._v("退出登录\n        ")],1)])],1)],1)],1):t._e()},r=[],i=(n("8e6e"),n("ac6a"),n("456d"),n("bd86")),s=n("5880"),a=n("0672");function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){Object(i["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var l={name:"HeaderAvatar",data:function(){return{}},computed:u({},Object(s["mapState"])({userInfo:function(t){return t.userInfo},theme:function(t){return t.theme}})),methods:{userAction:function(t){var e=this;if("logout"==t.key)Object(a["g"])(),e.$store.dispatch("SET_LOGOUT");else if("setting"==t.key)e.$router.push("/account/setting/base");else if("theme"==t.key){var n="dark";this.theme==n&&(n="light"),this.$store.dispatch("setTheme",n)}}}},f=l,d=(n("8d0e"),n("2877")),p=Object(d["a"])(f,o,r,!1,null,null,null);e["default"]=p.exports},"0610":function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"d",(function(){return s})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return c}));var o=n("22b6"),r=n("2f14");function i(t){return o["a"].post("project/file",t)}function s(){return Object(r["c"])("project/file/uploadFiles")}function a(t){return o["a"].post("project/file/recovery",{fileCode:t})}function c(t){return o["a"].post("project/file/delete",{fileCode:t})}},"10bd":function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.currentOrganization?n("div",[n("a-dropdown",{staticClass:"action-item",attrs:{placement:"bottomCenter"}},[n("div",{staticClass:"organization-select"},[n("span",[t._v(t._s(t.currentOrganization.name))]),n("a-icon",{style:{fontSize:"14px",marginLeft:"2px"},attrs:{type:"down"}})],1),n("a-menu",{staticClass:"middle-menu organization-menu",attrs:{slot:"overlay",selectable:!1},on:{click:t.organizationAction},slot:"overlay"},t._l(t.organizationList,(function(e,o){return n("a-menu-item",{key:o},[n("div",{staticClass:"muted flex ant-row-flex-middle"},[n("span",{staticClass:"text-default",attrs:{href:"javascript:;"}},[t._v(t._s(e.name))]),n("a-icon",{directives:[{name:"show",rawName:"v-show",value:t.currentOrganization.code==e.code,expression:"currentOrganization.code == organization.code"}],staticClass:"muted m-l-lg",attrs:{type:"check"}})],1)])})),1)],1)],1):t._e()},r=[],i=(n("8e6e"),n("ac6a"),n("456d"),n("a481"),n("bd86")),s=n("5880"),a=n("c24f"),c=n("2f14");function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){Object(i["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var f={name:"HeaderSelect",data:function(){return{}},computed:l({},Object(s["mapState"])({currentOrganization:function(t){return t.currentOrganization},organizationList:function(t){return t.organizationList}})),methods:{organizationAction:function(t){var e=this;Object(a["d"])(e.organizationList[t.key]).then((function(n){Object(c["a"])(n)&&e.$router.replace("/home/"+e.organizationList[t.key].code),console.log(n)}))}}},d=f,p=n("2877"),m=Object(p["a"])(d,o,r,!1,null,null,null);e["default"]=m.exports},"14f0":function(t,e,n){"use strict";var o=n("01fa"),r=n.n(o);r.a},"269b":function(t,e,n){},5744:function(t,e,n){t.exports=n.p+"assets/bell.356efdc3.svg"},"64de":function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"d",(function(){return i})),n.d(e,"e",(function(){return s})),n.d(e,"c",(function(){return a})),n.d(e,"b",(function(){return c})),n.d(e,"f",(function(){return u}));var o=n("22b6");function r(t){return o["a"].post("project/notify/_clearAll",t)}function i(t){return o["a"].post("project/notify",t)}function s(){return o["a"].post("project/notify/noReads")}function a(t){return o["a"].post("project/notify/delete",{id:t})}function c(t){return o["a"].post("project/notify/batchDel",{ids:t})}function u(t){return o["a"].post("project/notify/setReadied",{ids:t})}},6503:function(t,e,n){},"7e25":function(t,e,n){t.exports=n.p+"assets/laba.9a723c40.svg"},"81fe":function(t,e,n){"use strict";n.d(e,"c",(function(){return o})),n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return i})),n.d(e,"d",(function(){return s}));n("3b2b"),n("a481");var o=function(t,e){e||(e=moment());var n=moment(e).diff(moment(t),"hours");if(n<=1)return moment(t).fromNow();moment(e).get("date"),moment(t).get("date");var o=moment(t).format("H:mm"),r=moment(t).format("YYYY-MM-DD"),i=moment().weekday(0).format("YYYY-MM-DD"),s=moment().weekday(6).format("YYYY-MM-DD"),a="";return a=r<i?"[上周]dd "+o:r>s?"[下周]dd "+o:"[周]dd "+o,moment(t).calendar(null,{sameDay:"[今天 ]"+moment(t).format("H:mm"),nextDay:"[明天 ]"+o,nextWeek:a,lastDay:"[昨天 ]"+o,lastWeek:a,sameElse:"M月D日 H:mm"})},r=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=moment(t).format("H:mm");e||(n="");var o=moment(t).format("YYYY-MM-DD"),r=moment().weekday(0).format("YYYY-MM-DD"),i=moment().weekday(6).format("YYYY-MM-DD"),s="";return s=o<r?"[上周]dd "+n:o>i?"[下周]dd "+n:"[周]dd "+n,moment(t).calendar(null,{sameDay:"[今天 ]"+moment(t).format("H:mm"),nextDay:"[明天 ]"+n,nextWeek:s,lastDay:"[昨天 ]"+n,lastWeek:s,sameElse:"M月D日 H:mm"})},i=function(t,e){return!e&&t?r(t)+" 开始":t?r(t)+" - "+r(e):r(e)+" 截止"},s=function(t){var e="";void 0==t&&(t=new Date);var n=t.getHours();return n>=0&&n<=4&&(e="深夜了，注意身体，"),n>=4&&n<7&&(e="清晨好， "),n>=7&&n<12&&(e="早安，"),n>=12&&n<=13&&(e="午饭时间到了，"),n>=13&&n<=17&&(e="下午好，"),n>=17&&n<=18&&(e="进入傍晚了，"),n>=18&&n<=20&&(e="吃过晚饭了吗，"),n>=20&&n<=24&&(e="在加班吗？辛苦了，"),e}},8215:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"v-uploader",class:{"hidden-files":!t.showFiles,"hidden-uploader":!t.showUploader}},[n("a-card",{attrs:{title:t.uploaderTitle}},[n("div",{staticClass:"actions",attrs:{slot:"extra"},slot:"extra"},[n("a",{staticClass:"muted action-item",on:{click:function(e){t.showFiles=!t.showFiles}}},[n("a-icon",{directives:[{name:"show",rawName:"v-show",value:t.showFiles,expression:"showFiles"}],attrs:{type:"shrink"}}),n("a-icon",{directives:[{name:"show",rawName:"v-show",value:!t.showFiles,expression:"!showFiles"}],attrs:{type:"arrows-alt"}})],1),n("a",{staticClass:"muted action-item",on:{click:t.closeUploader}},[n("a-icon",{attrs:{type:"close"}})],1)]),n("uploader",{ref:"uploader",staticClass:"uploader-workplace",attrs:{options:t.options,autoStart:t.autoStart},on:{"files-submitted":t.filesSubmitted,"file-progress":t.fileProgress,"file-success":t.fileSuccess,"file-error":t.fileError,"file-complete":t.fileComplete,complete:t.complete}},[n("vue-scroll",[n("uploader-list",{scopedSlots:t._u([{key:"default",fn:function(e){return[n("ul",{staticClass:"uploader-wrapper"},t._l(e.fileList,(function(e){return n("uploader-file",{key:e.id,attrs:{file:e,list:!0},scopedSlots:t._u([{key:"default",fn:function(e){return[n("li",{staticClass:"uploader-item"},[n("div",{staticClass:"item-content"},[n("div",{staticClass:"item-info"},[n("div",{staticClass:"file-item"},[n("div",{staticClass:"file-icon"},[n("a-avatar",{attrs:{icon:"link",shape:"square",src:e.file.fileUrl}})],1),n("div",{staticClass:"file-info"},[n("div",{staticClass:"file-content"},[n("div",{staticClass:"file-title"},[n("a-tooltip",{attrs:{placement:"top",mouseEnterDelay:.3,title:e.file.name}},[t._v(t._s(e.file.name))])],1),n("div",{staticClass:"file-extra"},[n("span",[t._v(t._s(e.file.projectName?e.file.projectName:t.tempData.projectName))]),"success"==e.status?n("span",[t._v("("+t._s(e.formatedSize)+")")]):n("span",[t._v("("+t._s((Number(e.uploadedSize)/1024e3).toFixed(2))+"MB/"+t._s(e.formatedSize)+")")])])]),n("div",{directives:[{name:"show",rawName:"v-show",value:"success"!=e.status,expression:"file.status != 'success'"}],staticClass:"uploader-progress"},[n("a-progress",{attrs:{strokeWidth:2,showInfo:!1,percent:100*e.progress}})],1)])])]),n("div",{staticClass:"item-status"},[n("a",{staticClass:"muted",on:{click:function(n){return t.cancelUpload(e)}}},[n("a-icon",{directives:[{name:"show",rawName:"v-show",value:"success"!=e.status,expression:"file.status != 'success'"}],attrs:{type:"close"}})],1),n("a-icon",{directives:[{name:"show",rawName:"v-show",value:"success"==e.status,expression:"file.status == 'success'"}],staticClass:"text-success",attrs:{type:"check"}})],1)])])]}}],null,!0)})})),1)]}}])})],1)],1)],1)],1)},r=[],i=(n("8e6e"),n("ac6a"),n("456d"),n("bd86")),s=n("2f14"),a=n("5880"),c=n("68fe"),u=n("97a8"),l=n("0610");function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach((function(e){Object(i["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var p={name:"v-uploader",props:{code:{type:[String],default:function(){return""}}},data:function(){return{loading:!1,showFiles:!1,showUploader:!1,progressTotal:0,completeTotal:0,options:{target:l["d"],testChunks:!1,query:function(){return Object(c["a"])("tempData",!0)},headers:function(){var t=Object(c["a"])("currentOrganization",!0),e=Object(s["d"])();return e.organizationcode=t.code,e}},attrs:{accept:"image/*"},autoStart:!0}},computed:d({},Object(a["mapState"])({uploader:function(t){return t.common.uploader},tempData:function(t){return t.common.tempData}}),{uploaderTitle:function(){if(!this.progressTotal)return"上传完成";var t=this.completeTotal+1;return t>this.progressTotal&&(t=this.progressTotal),"正在上传 ".concat(t,"/").concat(this.progressTotal)}}),watch:{code:function(){this.init()}},created:function(){this.init()},mounted:function(){var t=this;this.$nextTick((function(){window.uploader=t.$refs.uploader.uploader,t.$store.dispatch("setUploader",window.uploader),console.log(window.uploader)}))},methods:{init:function(){},closeUploader:function(){this.showUploader=!1,this.uploader.cancel()},filesSubmitted:function(t){this.showUploader=!0,this.showFiles=!0,this.progressTotal+=t.length,console.log("file submitted",t)},fileProgress:function(t,e,n){this.showUploader=!0,this.showFiles=!0,console.log("file progress",arguments)},fileSuccess:function(t,e,n,o){var r=JSON.parse(n);if(!Object(s["a"])(r))return Object(u["b"])({title:r.msg},"notice","error"),!1;t.projectName=r.data.projectName,t.fileUrl=r.data.url,console.log("file success",t),this.completeTotal++},fileError:function(t,e,n,o){this.completeTotal--;var r=JSON.parse(n);e.cancel(),t.projectName=r.data.projectName,console.log("file error",t),Object(u["b"])({title:r.msg},"notice","error")},fileComplete:function(t){console.log("file complete",t)},complete:function(){var t=this;console.log("complete",arguments),this.progressTotal=this.completeTotal=0,Object(u["b"])({title:"关联文件成功"},"notice","success"),setTimeout((function(){t.showFiles=!1}),3e3)},cancelUpload:function(t){console.log(t),this.progressTotal--,this.completeTotal--,t.file.cancel()},filterList:function(t){return t},testSomeThing:function(){console.log(this.uploader.fileList),this.uploader.fileList[0].resume()}}},m=p,h=(n("f7fb"),n("2877")),g=Object(h["a"])(m,o,r,!1,null,null,null);e["default"]=g.exports},"8d0e":function(t,e,n){"use strict";var o=n("269b"),r=n.n(o);r.a},9527:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"index"},[o("a-spin",{attrs:{spinning:t.windowLoading}},[o("a-layout",{class:t.layoutClass,attrs:{id:"layout"}},[o("a-layout-header",{class:{collapsed:t.collapsed}},[o("div",{staticClass:"logo",on:{click:t.toHome}},[o("img",{staticClass:"logo-img",attrs:{src:n("bae8"),alt:""}}),t.system?o("span",{staticClass:"title"},[t._v("\n            "+t._s(t.system.app_name)+"\n            "),o("span",{staticClass:"version"},[t._v(t._s(t.system.app_version))])]):t._e()]),o("a-menu",{style:{lineHeight:"63px",paddingLeft:"15px"},attrs:{mode:"horizontal"},on:{click:t.menuModelClick,openChange:t.onModelOpenChange},model:{value:t.selectedModelKeys,callback:function(e){t.selectedModelKeys=e},expression:"selectedModelKeys"}},t._l(t.menu,(function(e,n){return o("a-menu-item",{key:e.id.toString(),attrs:{disabled:!e.status}},[e.icon?o("a-icon",{attrs:{type:e.icon}}):t._e(),o("span",[t._v(t._s(e.title))])],1)})),1),o("div",{staticClass:"right-menu"},[t.config.WS_URI?o("div",{staticClass:"m-r-lg"},[o("a-badge",{attrs:{title:"当前在线",count:t.online,showZero:"",numberStyle:{backgroundColor:"#52c41a"},offset:[10,0]}},[o("a-icon",{attrs:{type:"team"}})],1)],1):t._e(),t.organizationList.length>1?o("div",{staticClass:"action action-organization"},[o("header-select")],1):t._e(),o("div",{staticClass:"action"},[o("header-notice")],1),o("div",{staticClass:"action action-avatar"},[o("header-avatar")],1)])],1),o("a-layout",{staticStyle:{"padding-top":"65px"}},[o("a-sider",{attrs:{mode:"inline",breakpoint:"md",collapsible:""},model:{value:t.collapsed,callback:function(e){t.collapsed=e},expression:"collapsed"}},t._l(t.menus,(function(e){return o("a-menu",{key:e.id.toString(),attrs:{theme:t.theme,openKeys:t.openKeys,mode:"inline"},on:{click:function(n){return t.menuClick(n,e)},openChange:t.onOpenChange},model:{value:t.selectedKeys,callback:function(e){t.selectedKeys=e},expression:"selectedKeys"}},[e.children||e.is_inner||"#"==e.node?t._e():o("a-menu-item",{key:e.id,attrs:{disabled:!e.status}},[o("a-icon",{attrs:{type:e.icon}}),o("span",[t._v(t._s(e.title))])],1),e.children&&!e.is_inner?o("a-sub-menu",{key:e.id.toString()},[o("span",{attrs:{slot:"title"},slot:"title"},[o("a-icon",{attrs:{type:e.icon}}),o("span",[t._v(t._s(e.title))])],1),t._l(e.children,(function(e,n){return e.is_inner?t._e():o("a-menu-item",{key:e.id.toString(),attrs:{disabled:!e.status}},[t._v(t._s(e.title))])}))],2):t._e()],1)})),1),o("a-layout",{staticClass:"main-content",style:t.collapsed?{paddingLeft:"80px"}:{paddingLeft:"256px"}},[o("a-layout-content",[o("transition",{attrs:{name:"router-fade",mode:"out-in"}},[o("a-spin",{attrs:{spinning:t.pageLoading}},[o("router-view")],1)],1)],1)],1)],1)],1),t.config.WS_URI?o("Socket",{ref:"socket"}):t._e()],1),o("v-uploader")],1)},r=[],i=(n("8e6e"),n("456d"),n("7514"),n("6b54"),n("ac6a"),n("7f7f"),n("bd86")),s=n("5880"),a=n("6042"),c=n.n(a),u=n("9b57"),l=n.n(u),f=n("41b2"),d=n.n(f),p=n("4d91"),m=n("4d26"),h=n.n(m),g=n("daa3"),b=n("4df5"),v={prefixCls:p["a"].string,hasSider:p["a"].boolean};function y(t,e){return function(n){return{name:e,props:n.props,inject:{configProvider:{default:function(){return b["a"]}}},render:function(){var e=arguments[0],o=t.suffixCls,r=this.$props.prefixCls,i=this.configProvider.getPrefixCls,s=i(o,r),a={props:d()({prefixCls:s},Object(g["i"])(this)),on:this.$listeners};return e(n,a,[this.$slots["default"]])}}}}var k={props:v,render:function(){var t=arguments[0],e=this.prefixCls,n=this.$slots,o=this.$listeners,r={class:e,on:o};return t("div",r,[n["default"]])}},w={props:v,data:function(){return{siders:[]}},provide:function(){var t=this;return{siderHook:{addSider:function(e){t.siders=[].concat(l()(t.siders),[e])},removeSider:function(e){t.siders=t.siders.filter((function(t){return t!==e}))}}}},render:function(){var t=arguments[0],e=this.prefixCls,n=this.$slots,o=this.hasSider,r=this.$listeners,i=h()(e,c()({},e+"-has-sider",o||this.siders.length>0)),s={class:i,on:r};return t("div",s,[n["default"]])}},O=y({suffixCls:"layout"},"ALayout")(w),j=y({suffixCls:"layout-header"},"ALayoutHeader")(k),C=y({suffixCls:"layout-footer"},"ALayoutFooter")(k),_=y({suffixCls:"layout-content"},"ALayoutContent")(k);O.Header=j,O.Footer=C,O.Content=_;var S=O,T=n("1fca"),x=n("db14");S.Sider=T["a"],S.install=function(t){t.use(x["a"]),t.component(S.name,S),t.component(S.Header.name,S.Header),t.component(S.Footer.name,S.Footer),t.component(S.Sider.name,S.Sider),t.component(S.Content.name,S.Content)};var P=S,D=n("e84e"),L=n("0600"),$=n("10bd"),N=n("8215"),z=n("cef1"),E=n("a078"),M=n("97a8"),K=(n("68fe"),n("22b6")),U=n("4360");function Y(t){return K["a"].post("project/organization/_getOrgList",t).then((function(t){return t.data&&U["a"].dispatch("setOrganizationList",t.data),Promise.resolve(t)}))}function H(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function A(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?H(Object(n),!0).forEach((function(e){Object(i["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var F=P.Sider,I=P.Footer,W={name:"index",components:{HeaderNotice:D["default"],HeaderAvatar:L["default"],HeaderSelect:$["default"],ALayout:P,ASider:F,AFooter:I,Socket:z["default"],VUploader:N["default"]},data:function(){return{menus:[],collapsed:!1,inline:1,openKeys:[],openKeysTemp:[],selectedKeys:[],selectedModelKeys:[],breadCrumbInfo:[],config:E["a"],online:0}},computed:A({},Object(s["mapState"])({theme:function(t){return t.theme},logged:function(t){return t.logged},menu:function(t){return t.menu.menu},system:function(t){return t.system},pageLoading:function(t){return t.pageLoading},windowLoading:function(t){return t.windowLoading},organizationList:function(t){return t.organizationList},socketAction:function(t){return t.socketAction}}),{layoutClass:function(){var t="layout-"+this.theme;return this.$route.meta.info.show_slider||(t+=" hide"),t}}),created:function(){this.checkLayout(),this.$route.query.logged&&this.$store.dispatch("checkLogin"),this.$route.query.message&&Object(M["b"])({title:this.$route.query.message},"notice"),this.logged&&Y()},watch:{$route:function(t,e){this.checkLayout()},collapsed:function(t){t?(this.openKeysTemp=JSON.parse(JSON.stringify(this.openKeys)),this.openKeys=[]):this.openKeys=JSON.parse(JSON.stringify(this.openKeysTemp))},logged:function(t){t||this.$router.push({name:"login"})},socketAction:function(t){"connect"!==t.action&&"onClose"!==t.action||(this.online=t.data.online)}},methods:{footerClick:function(){autoPlay("order");this.$refs.socket;this.$websocket.send(JSON.stringify({uid:this.$store.state.userInfo.id}))},checkLayout:function(){var t=this,e=(this.$route.name,this.$route.path),n=this.$route.meta,o=this.$route.meta.info;t.breadCrumbInfo=[],t.breadCrumbInfo.push({title:o.title,path:"/"+o.fullUrl}),o.is_inner||(t.openKeys=[],t.selectedKeys=[]);var r=null;function i(t,e){t.forEach((function(t){t.id==e&&(r=t),t.children&&i(t.children,e)}))}if(n.model){if(i(t.menu,n.model),!r)return!1;t.breadCrumbInfo.push({title:r.title,path:"/"+r.fullUrl}),r.pid&&i(t.menu,r.pid)}else i(t.menu,n.info.id);return t.breadCrumbInfo.push({title:r.title,path:"/"+r.fullUrl}),this.selectedModelKeys=[r.id.toString()],r.children?(t.menus=r.children,!o.is_inner&&(t.menus.forEach((function(n){n.pid==t.selectedModelKeys&&(n.children?n.children.forEach((function(n){"/"+n.fullUrl==e&&(t.selectedKeys.push(n.id.toString()),t.collapsed?t.openKeysTemp=[n.pid.toString()]:t.openKeys.push(n.pid.toString()))})):t.selectedKeys.push(n.id.toString()))})),void t.$store.dispatch("setBreadCrumbInfo",t.breadCrumbInfo))):(t.menus=[],!1)},menuClick:function(t,e){var n=this,o=[];o=this.openKeys.length?JSON.parse(JSON.stringify(n.openKeys)):[e.id.toString()],n.menus.forEach((function(e){if(e.id==o){var r="/";e.children?e.children.forEach((function(e){e.id==t.key&&(r+=e.fullUrl)})):r+=e.fullUrl,n.$router.push(r)}}))},menuModelClick:function(t){var e=this;e.menu.forEach((function(n,o){if(n.id==t.key){e.menus=n.children;var r="/";if(n.children?n.children[0].children?r+=n.children[0].children[0].fullUrl:r+=n.children[0].fullUrl:r+=n.fullUrl,"/home"==r)return e.toHome(),!1;"/#"!=r&&e.$router.push(r)}}))},onModelOpenChange:function(t){},onOpenChange:function(t){var e=this,n=this,o=t.find((function(t){return-1===e.openKeys.indexOf(t)})),r=!1;this.menus.forEach((function(t,e){t.id==o&&(n.openKeys=o?[o]:[],r=!0)})),r||(n.openKeys=t)}}},R=W,J=n("2877"),B=Object(J["a"])(R,o,r,!1,null,null,null);e["default"]=B.exports},bae8:function(t,e,n){t.exports=n.p+"img/logo.b83ac094.png"},c24f:function(t,e,n){"use strict";n.d(e,"a",(function(){return c})),n.d(e,"j",(function(){return l})),n.d(e,"h",(function(){return f})),n.d(e,"d",(function(){return d})),n.d(e,"i",(function(){return p})),n.d(e,"g",(function(){return m})),n.d(e,"k",(function(){return h})),n.d(e,"f",(function(){return g})),n.d(e,"c",(function(){return b})),n.d(e,"e",(function(){return v})),n.d(e,"b",(function(){return y}));n("96cf"),n("ac6a");var o=n("3b8d"),r=n("22b6"),i=n("a18c"),s=n("4360"),a=n("2f14");function c(t){return u.apply(this,arguments)}function u(){return u=Object(o["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",r["a"].post("project/login",e));case 1:case"end":return t.stop()}}),t)}))),u.apply(this,arguments)}function l(t){return r["a"].post("project/login/register",t)}function f(t){return r["a"].post("project/login/getCaptcha",{mobile:t})}function d(t){var e=t.code;return s["a"].dispatch("setCurrentOrganization",t),r["a"].post("project/index/changeCurrentOrganization",{organizationCode:e}).then((function(t){if(Object(a["a"])(t))return s["a"].dispatch("SET_MENU",t.data.menuList),s["a"].dispatch("SET_USER",t.data.member),s["a"].dispatch("windowLoading",!0),setTimeout((function(){var e=t.data.menuList;if(e){var n=i["a"].options.routes;e.forEach((function(t){n[0].children.push(Object(a["b"])(t)),t.children&&t.children.forEach((function(t){n[0].children.push(Object(a["b"])(t)),t.children&&t.children.forEach((function(t){n[0].children.push(Object(a["b"])(t))}))}))})),i["a"].addRoutes(n),s["a"].dispatch("windowLoading",!1)}}),500),Promise.resolve(t)}))}function p(t){return r["a"].post("project/account",t)}function m(t){return r["a"].post("project/account/forbid",{accountCode:t,status:0})}function h(t){return r["a"].post("project/account/resume",{accountCode:t,status:1})}function g(t){var e="project/account/add";return t.code&&(e="project/account/edit"),r["a"].post(e,t)}function b(t,e){return r["a"].post("project/account/auth",{id:t,auth:e})}function v(t){return r["a"].post("project/account/del",{accountCode:t})}function y(t){return r["a"].post("project/login/_checkBindMail",t)}},ca8d:function(t,e,n){"use strict";n.d(e,"j",(function(){return r})),n.d(e,"h",(function(){return i})),n.d(e,"o",(function(){return s})),n.d(e,"t",(function(){return a})),n.d(e,"r",(function(){return c})),n.d(e,"m",(function(){return u})),n.d(e,"u",(function(){return l})),n.d(e,"q",(function(){return f})),n.d(e,"b",(function(){return d})),n.d(e,"c",(function(){return p})),n.d(e,"s",(function(){return m})),n.d(e,"p",(function(){return h})),n.d(e,"l",(function(){return g})),n.d(e,"k",(function(){return b})),n.d(e,"e",(function(){return v})),n.d(e,"d",(function(){return y})),n.d(e,"i",(function(){return k})),n.d(e,"a",(function(){return w})),n.d(e,"n",(function(){return O})),n.d(e,"g",(function(){return j})),n.d(e,"f",(function(){return C}));var o=n("22b6");function r(t){return o["a"].post("project/task",t)}function i(t){return o["a"].post("project/task/getListByTaskTag",t)}function s(t){return o["a"].post("project/task/selfList",t)}function a(t){return o["a"].post("project/task/taskSources",t)}function c(t){return o["a"].post("project/task/sort",t)}function u(t){return o["a"].post("project/task/save",t)}function l(t){return o["a"].post("project/task/taskToTags",t)}function f(t){return o["a"].post("project/task/setTag",t)}function d(t){return o["a"].post("project/task/assignTask",t)}function p(t){return o["a"].post("project/task/batchAssignTask",t)}function m(t,e){return o["a"].post("project/task/taskDone",{taskCode:t,done:e})}function h(t,e){return o["a"].post("project/task/setPrivate",{taskCode:t,private:e})}function g(t){return o["a"].post("project/task/recycleBatch",t)}function b(t){return o["a"].post("project/task/recovery",{taskCode:t})}function v(t){return o["a"].post("project/task/delete",{taskCode:t})}function y(t){return o["a"].post("project/task/dateTotalForProject",t)}function k(t){return o["a"].post("project/project/getLogBySelfProject",t)}function w(t){return o["a"].post("project/task/_taskWorkTimeList",t)}function O(t){return o["a"].post("project/task/saveTaskWorkTime",t)}function j(t){return o["a"].post("project/task/editTaskWorkTime",t)}function C(t){return o["a"].post("project/task/delTaskWorkTime",t)}},cef1:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div")},r=[],i=n("68fe"),s=n("22b6");function a(t,e){return s["a"].post("index/index/bindClientId",{client_id:t,uid:e})}var c=n("a078"),u={data:function(){return{websocket:null}},methods:{threadPoxi:function(){var t={uid:this.$store.state.userInfo.id};if(this.websocket.readyState===this.websocket.OPEN)this.websocketSend(t);else if(this.websocket.readyState===this.websocket.CONNECTING){var e=this;setTimeout((function(){e.websocketSend(t)}),300)}else{this.initWebSocket();var n=this;setTimeout((function(){n.websocketSend(t)}),500)}},initWebSocket:function(){try{var t=c["a"].WS_URI;this.websocket=new WebSocket(t),this.websocket.onmessage=this.websocketOnMessage,this.websocket.onclose=this.websocketClose,Vue.prototype.$websocket=this.websocket}catch(e){console.log(e)}},websocketOnMessage:function(t){var e=JSON.parse(t.data);if("ping"!=e.action&&(console.log(e),this.$store.commit("catchSocketAction",e)),"connect"===e.action&&e.data.client_id&&!this.$store.state.boundClient){Object(i["c"])("client_id",e.data.client_id);var n=Object(i["a"])("userInfo",!0),o=n?n.code:"";o&&(a(e.data.client_id,o),this.$store.dispatch("setBoundClient",!0))}},websocketSend:function(t){console.log("发送消息："),console.log(t),this.websocket.send(t)},websocketClose:function(t){console.log("connection closed ("+t.code+")")}},created:function(){this.initWebSocket()}},l=u,f=n("2877"),d=Object(f["a"])(l,o,r,!1,null,null,null);e["default"]=d.exports},e84e:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("a-popover",{attrs:{overlayClassName:"header-notice",trigger:"click",placement:"bottomRight"},model:{value:t.showNotice,callback:function(e){t.showNotice=e},expression:"showNotice"}},[o("template",{slot:"content"},[o("a-spin",{attrs:{spinning:t.loading}},[o("a-tabs",{staticClass:"header-notice-content",attrs:{tabBarGutter:25}},[o("a-tab-pane",{key:"1"},[o("span",{attrs:{slot:"tab"},slot:"tab"},[t._v("\n            消息\n            "),t.total&&t.totalSum["message"]?o("span",[t._v("("+t._s(t.totalSum["message"])+")")]):t._e()]),t.total&&t.totalSum["message"]?[o("a-list",[t._l(t.list["message"],(function(e){return[o("a-list-item",{key:e.id},[o("a-list-item-meta",{attrs:{description:e.create_time}},[o("span",{attrs:{slot:"title"},slot:"title"},[o("p",[t._v(t._s(e.title))]),o("p",{staticClass:"ant-list-item-meta-description",domProps:{innerHTML:t._s(e.content)}})]),o("a-avatar",{attrs:{slot:"avatar",src:e.avatar},slot:"avatar"})],1)],1)]}))],2),o("div",{staticClass:"footer-action"},[o("a",{staticClass:"item muted",on:{click:function(e){return t.setRead("message")}}},[t._v("清空消息")]),o("a",{staticClass:"item muted",on:{click:function(e){return t.showMore("1")}}},[t._v("查看更多")])])]:[o("div",{staticClass:"notFound"},[o("img",{attrs:{src:n("7e25"),alt:"not found"}}),o("div",[t._v("你已读完所有消息")])])]],2),o("a-tab-pane",{key:"2"},[o("span",{attrs:{slot:"tab"},slot:"tab"},[t._v("\n            通知\n            "),t.total&&t.totalSum["notice"]?o("span",[t._v("("+t._s(t.totalSum["notice"])+")")]):t._e()]),t.total&&t.totalSum["notice"]?[o("a-list",[t._l(t.list["notice"],(function(e){return[o("a-list-item",{key:e.id},[o("a-list-item-meta",{attrs:{description:e.create_time}},[o("span",{attrs:{slot:"title"},slot:"title"},[o("p",{domProps:{innerHTML:t._s(e.title)}}),o("p",{staticClass:"ant-list-item-meta-description",domProps:{innerHTML:t._s(e.content)}})]),o("a-avatar",{staticStyle:{"background-color":"white"},attrs:{slot:"avatar",src:"https://gw.alipayobjects.com/zos/rmsportal/ThXAXghbEsBCCSDihZxY.png"},slot:"avatar"})],1)],1)]}))],2),o("div",{staticClass:"footer-action"},[o("a",{staticClass:"item muted",on:{click:function(e){return t.setRead("notice")}}},[t._v("清空通知")]),o("a",{staticClass:"item muted",on:{click:function(){t.$router.push("/notify/notice")}}},[t._v("查看更多")])])]:[o("div",{staticClass:"notFound"},[o("img",{attrs:{src:n("5744"),alt:"not found"}}),o("div",[t._v("你已查看所有通知")])])]],2)],1)],1)],1),o("span",[o("a-badge",{attrs:{count:t.total}},[o("a-icon",{staticClass:"action-item",attrs:{type:"bell"}})],1)],1)],2)},r=[],i=(n("8e6e"),n("ac6a"),n("456d"),n("bd86")),s=n("5880"),a=n("64de"),c=n("97a8"),u=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o={body:e,icon:n.icon||"http://static.vilson.xyz/preview.jpg",showTime:n.showTime||15e3,onclick:n.onclick,onshow:n.onshow,onerror:n.onerror,onclose:n.onclose},r=window.Notification||window.mozNotification||window.webkitNotification;if(console.log(r.permission),r&&"granted"===r.permission){var i=new r(t,o);i.onclick=function(){"function"===typeof o.onclick&&o.onclick(i)},i.onerror=function(){"function"===typeof o.onerror&&o.onerror(i)},i.onshow=function(){"function"===typeof o.onshow&&o.onshow(i),setTimeout((function(){i.close()}),o.showTime)},i.onclose=function(){"function"===typeof o.onclose&&o.onclose(i)}}else{if(!r||"denied"===r.permission)return!1;r.requestPermission((function(e){if(r.permission!==e&&(r.permission=e),"granted"!==e)return!1;var n=new r(t,o);n.onclick=function(){"function"===typeof o.onclick&&o.onclick(n)},n.onerror=function(){"function"===typeof o.onerror&&o.onerror(n)},n.onshow=function(){"function"===typeof o.onshow&&o.onshow(n),setTimeout((function(){n.close()}),o.showTime)},n.onclose=function(){"function"===typeof o.onclose&&o.onclose(n)}}))}},l=n("ca8d");n("81fe");function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach((function(e){Object(i["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var p={name:"HeaderNotice",data:function(){return{showNotice:!1,loading:!1,total:0,messageTotal:0,totalSum:0,list:[],task:{page:1,pageSize:5,total:0,list:[]}}},computed:d({},Object(s["mapState"])({socketAction:function(t){return t.socketAction},currentOrganization:function(t){return t.currentOrganization}})),watch:{socketAction:function(t){if("notice"===t.action)this.init();else if("task"===t.action){this.init();var e=u(t.title,t.msg,{icon:t.data.notify.avatar});!1===e&&Object(c["b"])(t,"notice","info",10)}}},created:function(){this.init()},methods:{init:function(){this.fetchNotice()},fetchNotice:function(){var t=this;Object(a["e"])().then((function(e){t.list=e.data.list,t.messageTotal=e.data.total,t.total=t.messageTotal+t.task.total,t.totalSum=e.data.totalSum}))},setRead:function(t){switch(this.total-=this.list[t].length,this.list[t]=[],t){case"message":this.totalSum.message=0,Object(a["a"])()}},showMore:function(t){switch(t){default:this.showNotice=!1,this.$router.push("/notify/notice")}},getTasks:function(){var t=this;Object(l["o"])({page:this.task.page,pageSize:this.task.pageSize}).then((function(e){t.task.list=e.data.list,t.task.total=e.data.total,t.total=t.messageTotal+t.task.total}))},formatTime:function(t){return moment(t).format("YY年MM月DD日 HH:mm")},showDiff:function(t,e){var n=moment(t).diff(moment(e),"days");return n<=0?(n=moment(t).diff(moment(e),"hours"),n+="小时"):n+="天",n}}},m=p,h=(n("14f0"),n("2877")),g=Object(h["a"])(m,o,r,!1,null,null,null);e["default"]=g.exports},f7fb:function(t,e,n){"use strict";var o=n("6503"),r=n.n(o);r.a}}]);