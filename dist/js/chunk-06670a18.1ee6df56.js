(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-06670a18"],{"0908":function(t,e,n){},"8a24":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"inviteFromLink",staticStyle:{height:"100%"}},[n("div",{staticClass:"content"},[n("a-spin",{attrs:{spinning:t.loading}},[t.inviteLink?n("a-card",{attrs:{title:"来自 "+t.inviteLink.member.name+" 的邀请"}},[n("div",{staticClass:"header"},[n("span",[t._v("\n            "+t._s(t.inviteLink.member.name)+" 邀请你\n            "),"project"==t.inviteLink.invite_type?n("span",[t._v("加入项目「"+t._s(t.inviteLink.sourceDetail.name)+"」")]):t._e(),"organization"==t.inviteLink.invite_type?n("span",[t._v("加入组织「"+t._s(t.inviteLink.sourceDetail.name)+"」")]):t._e()])]),n("div",{staticClass:"member-info"},[n("div",{staticClass:"avatar"},[n("a-avatar",{attrs:{size:"large",src:t.inviteLink.member.avatar}})],1),n("div",{staticClass:"info"},[n("p",[t._v(t._s(t.inviteLink.member.name))]),n("p",{staticClass:"muted"},[t._v(t._s(t.inviteLink.member.email))])])]),n("a-button",{staticClass:"middle-btn",attrs:{type:"primary",block:"",size:"large"},on:{click:t.acceptInvite}},["project"==t.inviteLink.invite_type?n("span",[t._v("加入项目")]):t._e(),"organization"==t.inviteLink.invite_type?n("span",[t._v("加入组织")]):t._e()])],1):t._e()],1)],1)])},r=[],a=(n("8e6e"),n("ac6a"),n("456d"),n("a481"),n("bd86")),o=n("5880"),c=n("2f14"),s=n("efb5"),u=n("c030"),p=n("0672");function v(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?v(Object(n),!0).forEach((function(e){Object(a["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var f={data:function(){return{loading:!1,inviteLink:void 0}},computed:d({},Object(o["mapState"])({userInfo:function(t){return t.userInfo}})),created:function(){this.getInviteInfo()},methods:{getInviteInfo:function(){var t=this;this.loading=!0,Object(s["c"])(this.$route.params.code).then((function(e){t.inviteLink=e.data,t.loading=!1}))},acceptInvite:function(){var t=this,e=this;"project"==this.inviteLink.invite_type?Object(u["a"])(this.$route.params.code).then((function(n){var i=Object(c["a"])(n);if(!i)return!1;t.$store.dispatch("setOrganizationList",n.data.organizationList),t.$store.dispatch("setCurrentOrganization",n.data.currentOrganization),setTimeout((function(){e.$router.replace({name:"task",params:{code:e.inviteLink.source_code}})}),500)})):"organization"==this.inviteLink.invite_type&&Object(p["f"])(this.$route.params.code).then((function(n){Object(c["a"])(n)&&(t.$store.dispatch("setOrganizationList",n.data.organizationList),t.$store.dispatch("setCurrentOrganization",n.data.currentOrganization),t.$notice({title:"你已成功加入组织",msg:"你可以在右上方切换当前组织"},"notice","success"),setTimeout((function(){e.$router.replace("/")}),500))}))}}},m=f,b=(n("8e0d"),n("2877")),l=Object(b["a"])(m,i,r,!1,null,null,null);e["default"]=l.exports},"8e0d":function(t,e,n){"use strict";var i=n("0908"),r=n.n(i);r.a},c030:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return a})),n.d(e,"d",(function(){return o})),n.d(e,"c",(function(){return c}));var i=n("22b6");function r(t,e){return i["a"].post("project/project_member/inviteMember",{memberCode:t,projectCode:e})}function a(t){return i["a"].post("project/project_member/_joinByInviteLink",{inviteCode:t})}function o(t,e){return i["a"].post("project/project_member/removeMember",{memberCode:t,projectCode:e})}function c(t){return i["a"].post("project/project_member/index",t)}},efb5:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return a})),n.d(e,"c",(function(){return o}));var i=n("22b6");function r(t){return i["a"].post("index/index/install",t)}function a(){return i["a"].post("index/index/checkInstall")}function o(t){return i["a"].post("project/invite_link/_read",{inviteCode:t})}}}]);